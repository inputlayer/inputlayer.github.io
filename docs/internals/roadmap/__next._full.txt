1:"$Sreact.fragment"
2:I[1942,["177","static/chunks/app/layout-7e9963bf811be36b.js"],"ThemeProvider"]
3:I[7121,[],""]
4:I[4581,[],""]
6:I[484,[],"OutletBoundary"]
7:"$Sreact.suspense"
9:I[484,[],"ViewportBoundary"]
b:I[484,[],"MetadataBoundary"]
d:I[7123,[],""]
:HL["/_next/static/media/4cf2300e9c8272f7-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/4bd7a24b7976d4e6.css","style"]
0:{"P":null,"b":"05bjYGyiAumoEMBrfWHih","c":["","docs","internals","roadmap",""],"q":"","i":false,"f":[[["",{"children":["docs",{"children":[["slug","internals/roadmap","oc"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],[["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4bd7a24b7976d4e6.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_188709 __variable_9a8899 font-sans antialiased","children":["$","$L2",null,{"attribute":"class","defaultTheme":"dark","enableSystem":true,"disableTransitionOnChange":true,"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":["$L5",null,["$","$L6",null,{"children":["$","$7",null,{"name":"Next.MetadataOutlet","children":"$@8"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],["$","$1","h",{"children":[null,["$","$L9",null,{"children":"$@a"}],["$","div",null,{"hidden":true,"children":["$","$Lb",null,{"children":["$","$7",null,{"name":"Next.Metadata","children":"$@c"}]}]}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],false]],"m":"$undefined","G":["$d",[]],"S":true}
e:I[8428,["758","static/chunks/758-3cb69ce377cde046.js","121","static/chunks/121-aece4f809b101dc1.js","502","static/chunks/502-e809071f8789437b.js","689","static/chunks/689-4fcf9680fdc90283.js","870","static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js"],"DocsPageClient"]
f:Te83,# InputLayer Roadmap

This document tracks planned features and improvements for InputLayer.

## Recently Completed

### String Functions (v0.1.0)

**Status**: Implemented

7 string functions available: `len`, `upper`, `lower`, `trim`, `substr`, `replace`, `concat`.

See `docs/reference/functions.md` Section 8 for full reference.

---

### Math Functions (v0.1.0)

**Status**: Implemented

13 math functions available: `abs`, `abs_int64`, `abs_float64`, `sqrt`, `pow`, `log`, `exp`, `sin`, `cos`, `tan`, `floor`, `ceil`, `sign`.

See `docs/reference/functions.md` Section 7 for full reference.

---

### TopK Aggregate (v0.1.0)

**Status**: Implemented

Top-K selection with ordering support:

```datalog
+top_scores(top_k<3, Name, Score:desc>) <- scores(Name, Score)
```

Variants: `top_k`, `top_k_threshold`, `within_radius`.

---

### Functions in Rule Heads (v0.1.0)

**Status**: Implemented

All builtin functions (vector, math, string, temporal) now work in rule heads via computed head variables:

```datalog
// Compute and store similarities
+similarity(Id1, Id2, Score) <-
    embedding(Id1, V1), embedding(Id2, V2),
    Id1 < Id2,
    Score = cosine(V1, V2)

// Arithmetic in rule heads
+doubled(X, Y) <- nums(X), Y = X * 2
```

---

## Planned Features

### External Data Loading

**Priority**: Medium
**Status**: Not implemented

Load data from external file formats:

```datalog
.load users.json as user
.load sales.parquet as sale
.load events.csv as event
```

**Supported formats**:
| Format | Description |
|--------|-------------|
| `.json` | JSON arrays or objects |
| `.parquet` | Apache Parquet columnar format |
| `.csv` | Comma-separated values |

---

### Distributed Execution

**Priority**: Low
**Status**: Not implemented

Multi-node execution for horizontal scaling. Currently single-node only.

---

### User-Defined Aggregates

**Priority**: Low
**Status**: Not implemented

Allow users to define custom aggregation functions beyond the built-in set.

---

### Worst-Case Optimal Joins

**Priority**: Low
**Status**: Not implemented

WCOJ for cyclic queries where traditional binary join plans are suboptimal.

---

## Implementation Notes

### Adding New Built-in Functions

To add a new built-in function:

1. Add variant to `BuiltinFunc` enum in `src/ast/mod.rs`
2. Implement parsing in `BuiltinFunc::parse()`
3. Add IR variant to `BuiltinFunction` in `src/ir/mod.rs`
4. Add conversion in `src/ir_builder/mod.rs`
5. Add evaluation logic in `src/code_generator/mod.rs`
6. Add tests in `examples/datalog/` with snapshot
7. Update `docs/reference/functions.md`

---

## Version History

### v0.1.0 (Current)
- 55 builtin functions (vector, temporal, math, string, LSH, quantization)
- Functions work in rule heads via computed head variables
- HNSW vector indexes with full query integration (`hnsw_nearest` builtin)
- Count distinct aggregate (`count_distinct`)
- TopK, TopKThreshold, WithinRadius aggregates
- ~3,107 unit tests + ~1,121 snapshot tests = ~4,228 total
- WebSocket API with auth, streaming results, and notification replay (AsyncAPI-documented)
- Production hardening complete (55/55 issues):
  - Multi-user authentication and ACL system
  - Rate limiting (per-connection WS, per-IP HTTP)
  - Auto-compaction for DD-native persist layer
  - Lock-free DD queries via storage snapshots
  - Streaming result transport for large results (>1 MB)
  - Relation drop, rule drop by prefix, clear by prefix
  - TLS deployment support
- WAL-based persistence with configurable durability
- Basic query operations
- Persistent and session rules
- Aggregations (count, sum, min, max, avg)
- Vector distance functions
- Type declarations and schemas
- Differential Dataflow backend5:["$","$Le",null,{"page":{"title":"InputLayer Roadmap","content":"$f","toc":[{"level":2,"text":"Recently Completed","id":"recently-completed"},{"level":3,"text":"String Functions (v0.1.0)","id":"string-functions-v010"},{"level":3,"text":"Math Functions (v0.1.0)","id":"math-functions-v010"},{"level":3,"text":"TopK Aggregate (v0.1.0)","id":"topk-aggregate-v010"},{"level":3,"text":"Functions in Rule Heads (v0.1.0)","id":"functions-in-rule-heads-v010"},{"level":2,"text":"Planned Features","id":"planned-features"},{"level":3,"text":"External Data Loading","id":"external-data-loading"},{"level":3,"text":"Distributed Execution","id":"distributed-execution"},{"level":3,"text":"User-Defined Aggregates","id":"user-defined-aggregates"},{"level":3,"text":"Worst-Case Optimal Joins","id":"worst-case-optimal-joins"},{"level":2,"text":"Implementation Notes","id":"implementation-notes"},{"level":3,"text":"Adding New Built-in Functions","id":"adding-new-built-in-functions"},{"level":2,"text":"Version History","id":"version-history"},{"level":3,"text":"v0.1.0 (Current)","id":"v010-current"}]},"slugKey":"internals/roadmap"}]
a:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
10:I[6869,[],"IconMark"]
c:[["$","title","0",{"children":"InputLayer - A symbolic reasoning engine for AI agents"}],["$","meta","1",{"name":"description","content":"Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system."}],["$","link","2",{"rel":"icon","href":"/icon.svg"}],["$","$L10","3",{}]]
8:null
