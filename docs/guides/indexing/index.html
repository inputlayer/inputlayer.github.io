<!DOCTYPE html><!--05bjYGyiAumoEMBrfWHih--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/4bd7a24b7976d4e6.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js"/><script src="/_next/static/chunks/4bd1b696-deba172d32c79f82.js" async=""></script><script src="/_next/static/chunks/794-275dc9ebd3a29fbf.js" async=""></script><script src="/_next/static/chunks/main-app-1fa5b694e5d36a75.js" async=""></script><script src="/_next/static/chunks/app/layout-7e9963bf811be36b.js" async=""></script><script src="/_next/static/chunks/758-3cb69ce377cde046.js" async=""></script><script src="/_next/static/chunks/121-aece4f809b101dc1.js" async=""></script><script src="/_next/static/chunks/502-e809071f8789437b.js" async=""></script><script src="/_next/static/chunks/689-4fcf9680fdc90283.js" async=""></script><script src="/_next/static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js" async=""></script><meta name="next-size-adjust" content=""/><title>InputLayer - A symbolic reasoning engine for AI agents</title><meta name="description" content="Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system."/><link rel="icon" href="/icon.svg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_188709 __variable_9a8899 font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","dark",null,["light","dark"],null,true,true)</script><div class="flex flex-col h-dvh"><header class="sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"><div class="flex h-14 items-center px-6"><a class="mr-8" href="/"><span class="inline-flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg><span class="font-extrabold tracking-tight text-lg">InputLayer</span></span></a><nav class="hidden md:flex items-center gap-6 text-sm"><a class="text-muted-foreground transition-colors hover:text-foreground" href="/docs/">Docs</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/blog/">Blog</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/use-cases/">Use Cases</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/compare/">Compare</a><a href="https://demo.inputlayer.ai" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-muted-foreground transition-colors hover:text-foreground">Demo<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></nav><div class="ml-auto flex items-center gap-3"><div class="inline-flex items-center gap-1.5"><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-3.5 w-3.5"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg><span>Star</span></a><a href="https://github.com/inputlayer/inputlayer/fork" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-git-fork h-3.5 w-3.5"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg><span>Fork</span></a></div><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 h-9 w-9"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-4 w-4"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button><div class="md:hidden"><button class="inline-flex items-center justify-center rounded-md p-2 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></div></header><div class="flex flex-1 overflow-hidden"><div class="w-64 shrink-0 border-r border-border/50 overflow-y-auto"><div class="flex flex-col h-full"><div class="p-3 border-b border-border/50"><div class="relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><input type="text" placeholder="Search docs..." class="w-full h-8 pl-8 pr-3 text-sm rounded-md border border-border bg-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring" value=""/></div></div><nav class="flex-1 overflow-y-auto p-2 space-y-0.5"><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" href="/docs/index/">Overview</a><div data-state="open" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-foreground font-medium" style="padding-left:12px" type="button" aria-controls="radix-_R_j6av5ubtb_" aria-expanded="true" data-state="open" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform rotate-90"><path d="m9 18 6-6-6-6"></path></svg>Guides</button><div data-state="open" id="radix-_R_j6av5ubtb_" data-slot="collapsible-content"><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/quickstart/">Quick Start</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/installation/">Installation</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/first-program/">Your First Program</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/core-concepts/">Data Modeling</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/repl/">REPL Guide</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/recursion/">Recursion</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/vectors/">Vector Search</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors bg-primary/10 text-primary font-medium" style="padding-left:24px" href="/docs/guides/indexing/">Indexing</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/temporal/">Temporal Reasoning</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/persistence/">Persistence</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/configuration/">Configuration</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/rest-api/">REST API</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/python-sdk/">Python SDK</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/deployment/">Deployment</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/authentication/">Authentication</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/websocket-api/">WebSocket API</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/migrations/">Migrations</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/troubleshooting/">Troubleshooting</a></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_r6av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Reference</button><div data-state="closed" id="radix-_R_r6av5ubtb_" hidden="" data-slot="collapsible-content"></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_136av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Specification</button><div data-state="closed" id="radix-_R_136av5ubtb_" hidden="" data-slot="collapsible-content"></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_1b6av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Internals</button><div data-state="closed" id="radix-_R_1b6av5ubtb_" hidden="" data-slot="collapsible-content"></div></div></nav></div></div><div class="flex flex-1 flex-col overflow-hidden"><div class="flex flex-1 overflow-hidden"><div class="flex-1 overflow-y-auto px-8 py-6 max-w-4xl mx-auto"><article class="docs-prose"><h1 id="indexing-guide" node="[object Object]">Indexing Guide</h1>
<p>InputLayer provides HNSW (Hierarchical Navigable Small World) indexes for fast approximate nearest neighbor search on vector data.</p>
<h2 id="why-use-indexes" node="[object Object]">Why Use Indexes?</h2>
<p>Without an index, vector similarity queries perform a linear scan:</p>
<ul>
<li><strong>10K vectors</strong>: ~10ms</li>
<li><strong>100K vectors</strong>: ~100ms</li>
<li><strong>1M vectors</strong>: ~1s</li>
</ul>
<p>With an HNSW index:</p>
<ul>
<li><strong>10K vectors</strong>: ~1ms</li>
<li><strong>100K vectors</strong>: ~5ms</li>
<li><strong>1M vectors</strong>: ~10ms</li>
</ul>
<p><strong>Trade-off</strong>: Indexes use memory and may return approximate (not exact) results.</p>
<hr/>
<h2 id="creating-an-index" node="[object Object]">Creating an Index</h2>
<h3 id="basic-syntax" node="[object Object]">Basic Syntax</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create &lt;name&gt; on &lt;relation&gt;(&lt;column&gt;) [options]
</code></pre>
<h3 id="simple-example" node="[object Object]">Simple Example</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Create a documents table with embeddings</span>
<span class="syn-arith">+</span><span class="syn-identifier">documents</span><span class="syn-punct">(</span><span class="syn-identifier">id</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">,</span> <span class="syn-identifier">title</span><span class="syn-punct">:</span> <span class="syn-keyword">string</span><span class="syn-punct">,</span> <span class="syn-identifier">embedding</span><span class="syn-punct">:</span> <span class="syn-keyword">vector</span><span class="syn-punct">)</span>

<span class="syn-comment">// Insert some documents</span>
<span class="syn-arith">+</span><span class="syn-identifier">documents</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-string">"Introduction to ML"</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.1</span><span class="syn-punct">,</span> <span class="syn-number">0.2</span><span class="syn-punct">,</span> <span class="syn-number">0.3</span><span class="syn-punct">,</span> <span class="syn-number">0.4</span><span class="syn-punct">]</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">documents</span><span class="syn-punct">(</span><span class="syn-number">2</span><span class="syn-punct">,</span> <span class="syn-string">"Vector Databases"</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.15</span><span class="syn-punct">,</span> <span class="syn-number">0.25</span><span class="syn-punct">,</span> <span class="syn-number">0.28</span><span class="syn-punct">,</span> <span class="syn-number">0.42</span><span class="syn-punct">]</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">documents</span><span class="syn-punct">(</span><span class="syn-number">3</span><span class="syn-punct">,</span> <span class="syn-string">"Graph Theory"</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.8</span><span class="syn-punct">,</span> <span class="syn-number">0.1</span><span class="syn-punct">,</span> <span class="syn-number">0.05</span><span class="syn-punct">,</span> <span class="syn-number">0.05</span><span class="syn-punct">]</span><span class="syn-punct">)</span>
</code></pre>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create doc_emb_idx on documents(embedding)
</code></pre>
<h3 id="with-options" node="[object Object]">With Options</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create doc_emb_idx on documents(embedding) metric cosine m 16 ef_search 50
</code></pre>
<hr/>
<h2 id="index-options" node="[object Object]">Index Options</h2>
<h3 id="distance-metrics" node="[object Object]">Distance Metrics</h3>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Metric</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Aliases</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Use Case</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">cosine</code></td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">cos</code></td><td class="border px-4 py-2" node="[object Object]">Text embeddings (most common)</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">euclidean</code></td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">l2</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">euclid</code></td><td class="border px-4 py-2" node="[object Object]">Image embeddings</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">dot</code></td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">dotproduct</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">inner</code></td><td class="border px-4 py-2" node="[object Object]">When vectors have meaningful magnitude</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">manhattan</code></td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">l1</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">taxicab</code></td><td class="border px-4 py-2" node="[object Object]">Sparse vectors</td></tr></tbody></table></div>
<p><strong>Default</strong>: <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">cosine</code></p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create my_idx on vectors(embedding) metric l2
.index create my_idx on vectors(embedding) metric cosine
.index create my_idx on vectors(embedding) metric dot
</code></pre>
<h3 id="hnsw-parameters" node="[object Object]">HNSW Parameters</h3>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Parameter</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Default</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Description</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">m</code></td><td class="border px-4 py-2" node="[object Object]">16</td><td class="border px-4 py-2" node="[object Object]">Max connections per node (higher = better recall, more memory)</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">ef_construction</code></td><td class="border px-4 py-2" node="[object Object]">200</td><td class="border px-4 py-2" node="[object Object]">Construction-time ef (higher = better quality, slower build)</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">ef_search</code></td><td class="border px-4 py-2" node="[object Object]">50</td><td class="border px-4 py-2" node="[object Object]">Search-time ef (higher = better recall, slower search)</td></tr></tbody></table></div>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create my_idx on vectors(embedding) m 32 ef_search 100
</code></pre>
<h3 id="parameter-tuning" node="[object Object]">Parameter Tuning</h3>
<p><strong>For higher recall (more accurate results):</strong></p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create my_idx on vectors(embedding) m 32 ef_construction 400 ef_search 100
</code></pre>
<p><strong>For faster search (lower recall):</strong></p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create my_idx on vectors(embedding) m 8 ef_search 20
</code></pre>
<p><strong>For large datasets (millions of vectors):</strong></p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create my_idx on vectors(embedding) m 48 ef_construction 500 ef_search 200
</code></pre>
<hr/>
<h2 id="managing-indexes" node="[object Object]">Managing Indexes</h2>
<h3 id="list-all-indexes" node="[object Object]">List All Indexes</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index
</code></pre>
<p>or</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index list
</code></pre>
<p><strong>Output:</strong></p>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Name</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Relation</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Column</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Type</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Metric</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Valid</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]">doc_emb_idx</td><td class="border px-4 py-2" node="[object Object]">documents</td><td class="border px-4 py-2" node="[object Object]">embedding</td><td class="border px-4 py-2" node="[object Object]">hnsw</td><td class="border px-4 py-2" node="[object Object]">cosine</td><td class="border px-4 py-2" node="[object Object]">yes</td></tr></tbody></table></div>
<h3 id="view-index-statistics" node="[object Object]">View Index Statistics</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index stats doc_emb_idx
</code></pre>
<p><strong>Output:</strong></p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">Index: doc_emb_idx
  Relation:   documents
  Column:     embedding
  Type:       hnsw
  Metric:     cosine
  Vectors:    10000
  Dimension:  768
  Valid:      yes
  Tombstones: 0
  Built:      2024-01-15 10:30:00
</code></pre>
<h3 id="rebuild-an-index" node="[object Object]">Rebuild an Index</h3>
<p>After many insertions/deletions, an index may become fragmented. Rebuild to optimize:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index rebuild doc_emb_idx
</code></pre>
<h3 id="drop-an-index" node="[object Object]">Drop an Index</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index drop doc_emb_idx
</code></pre>
<hr/>
<h2 id="using-indexes-in-queries" node="[object Object]">Using Indexes in Queries</h2>
<p>Use the <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">hnsw_nearest()</code> predicate in query bodies to perform fast approximate nearest-neighbor search via an HNSW index.</p>
<h3 id="syntax" node="[object Object]">Syntax</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">hnsw_nearest(&quot;index_name&quot;, QueryVec, K, IdVar, DistVar [, EfSearch])
</code></pre>
<ul>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">index_name</code> — String literal naming the HNSW index</li>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">QueryVec</code> — Variable bound to a vector, or a vector literal <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">[1.0, 2.0]</code></li>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">K</code> — Integer: number of nearest neighbors</li>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">IdVar</code> — Variable to bind result tuple IDs</li>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">DistVar</code> — Variable to bind distances</li>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">EfSearch</code> — Optional integer: override ef_search for this query</li>
</ul>
<h3 id="examples" node="[object Object]">Examples</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Find 5 nearest documents to a literal query vector</span>
<span class="syn-query">?</span> <span class="syn-builtin">hnsw_nearest</span><span class="syn-punct">(</span><span class="syn-string">"doc_emb_idx"</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.11</span><span class="syn-punct">,</span> <span class="syn-number">0.21</span><span class="syn-punct">,</span> <span class="syn-number">0.29</span><span class="syn-punct">]</span><span class="syn-punct">,</span> <span class="syn-number">5</span><span class="syn-punct">,</span> <span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-variable">Dist</span><span class="syn-punct">)</span>

<span class="syn-comment">// Use a bound query vector and join with base data</span>
<span class="syn-query">?</span> <span class="syn-identifier">query_vec</span><span class="syn-punct">(</span><span class="syn-variable">QV</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-builtin">hnsw_nearest</span><span class="syn-punct">(</span><span class="syn-string">"doc_emb_idx"</span><span class="syn-punct">,</span> <span class="syn-variable">QV</span><span class="syn-punct">,</span> <span class="syn-number">10</span><span class="syn-punct">,</span> <span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-variable">Dist</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-identifier">documents</span><span class="syn-punct">(</span><span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-variable">Title</span><span class="syn-punct">,</span> <span class="syn-variable">_</span><span class="syn-punct">)</span>

<span class="syn-comment">// Override ef_search for higher recall</span>
<span class="syn-query">?</span> <span class="syn-builtin">hnsw_nearest</span><span class="syn-punct">(</span><span class="syn-string">"doc_emb_idx"</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.11</span><span class="syn-punct">,</span> <span class="syn-number">0.21</span><span class="syn-punct">,</span> <span class="syn-number">0.29</span><span class="syn-punct">]</span><span class="syn-punct">,</span> <span class="syn-number">5</span><span class="syn-punct">,</span> <span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-variable">Dist</span><span class="syn-punct">,</span> <span class="syn-number">200</span><span class="syn-punct">)</span>
</code></pre>
<p><strong>Note:</strong> Indexes are not used automatically — you must explicitly call <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">hnsw_nearest()</code> to use an HNSW index.</p>
<hr/>
<h2 id="index-lifecycle" node="[object Object]">Index Lifecycle</h2>
<h3 id="build-phase" node="[object Object]">Build Phase</h3>
<p>When you create an index, vectors are inserted incrementally:</p>
<ol>
<li>Index is registered with metadata</li>
<li>Existing vectors are added to the HNSW structure</li>
<li>Index is marked as valid</li>
</ol>
<h3 id="invalidation" node="[object Object]">Invalidation</h3>
<p>Indexes are automatically invalidated when:</p>
<ul>
<li>Base relation is modified (insert/delete)</li>
<li>Schema changes</li>
</ul>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index stats my_idx
  Valid: no  ← Index needs rebuild
</code></pre>
<h3 id="rebuild" node="[object Object]">Rebuild</h3>
<p>Invalid indexes are rebuilt on:</p>
<ul>
<li>Explicit <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index rebuild</code> command</li>
<li>Next query that uses the index</li>
</ul>
<hr/>
<h2 id="index-architecture" node="[object Object]">Index Architecture</h2>
<h3 id="hnsw-structure" node="[object Object]">HNSW Structure</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">Layer 3:  *-------------*
          |             |
Layer 2:  *---*-----*---*---*
          |   |     |   |   |
Layer 1:  *-*-*-*-*-*-*-*-*-*-*
          | | | | | | | | | | |
Layer 0:  *********************** (all nodes)
</code></pre>
<p>Each layer has fewer nodes. Search starts at top layer and descends:</p>
<ol>
<li>Find nearest nodes in current layer</li>
<li>Use those as entry points for next layer</li>
<li>Repeat until layer 0</li>
<li>Return k nearest neighbors</li>
</ol>
<h3 id="memory-usage" node="[object Object]">Memory Usage</h3>
<p>HNSW indexes use approximately:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">memory approx n * (d * 4 + m * 8) bytes
</code></pre>
<p>Where:</p>
<ul>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">n</code> = number of vectors</li>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">d</code> = vector dimension</li>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">m</code> = max connections parameter</li>
</ul>
<p><strong>Example</strong>: 1M vectors × 768 dimensions × m=16:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">1M × (768 × 4 + 16 × 8) = ~3.2 GB
</code></pre>
<hr/>
<h2 id="tombstones-and-compaction" node="[object Object]">Tombstones and Compaction</h2>
<p>When vectors are deleted, they&#x27;re marked with a tombstone rather than removed immediately:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index stats my_idx
  Vectors:    10000
  Tombstones: 500  ← Deleted entries not yet cleaned up
</code></pre>
<h3 id="automatic-compaction" node="[object Object]">Automatic Compaction</h3>
<p>When the tombstone ratio exceeds 30%, the index is automatically rebuilt inline during the delete operation.</p>
<h3 id="manual-compaction" node="[object Object]">Manual Compaction</h3>
<p>Force a rebuild to remove tombstones:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index rebuild my_idx
</code></pre>
<hr/>
<h2 id="best-practices" node="[object Object]">Best Practices</h2>
<h3 id="1-choose-the-right-metric" node="[object Object]">1. Choose the Right Metric</h3>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Embedding Type</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Recommended Metric</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]">OpenAI embeddings</td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">cosine</code></td></tr><tr><td class="border px-4 py-2" node="[object Object]">BERT/Sentence-BERT</td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">cosine</code></td></tr><tr><td class="border px-4 py-2" node="[object Object]">Image embeddings (CLIP)</td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">cosine</code></td></tr><tr><td class="border px-4 py-2" node="[object Object]">Raw feature vectors</td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">euclidean</code></td></tr><tr><td class="border px-4 py-2" node="[object Object]">Pre-normalized vectors</td><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">dot</code> (fastest)</td></tr></tbody></table></div>
<h3 id="2-tune-parameters-for-your-use-case" node="[object Object]">2. Tune Parameters for Your Use Case</h3>
<p><strong>Discovery/Exploration</strong> (higher recall matters):</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create my_idx on docs(emb) m 32 ef_search 100
</code></pre>
<p><strong>Production/Speed</strong> (latency matters):</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create my_idx on docs(emb) m 16 ef_search 30
</code></pre>
<h3 id="3-monitor-index-health" node="[object Object]">3. Monitor Index Health</h3>
<p>Regularly check:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index stats my_idx
</code></pre>
<p>Rebuild if:</p>
<ul>
<li>Tombstone ratio &gt; 30%</li>
<li>Search quality degrades</li>
<li>After bulk insertions</li>
</ul>
<h3 id="4-create-indexes-before-bulk-load" node="[object Object]">4. Create Indexes Before Bulk Load</h3>
<p>For large initial loads, create the index first:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-meta">.index create</span> <span class="syn-identifier">my_idx</span> <span class="syn-identifier">on</span> <span class="syn-identifier">docs</span><span class="syn-punct">(</span><span class="syn-identifier">emb</span><span class="syn-punct">)</span>

<span class="syn-comment">// Then bulk insert</span>
<span class="syn-arith">+</span><span class="syn-identifier">docs</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-string">"..."</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.1</span><span class="syn-punct">,</span> <span class="syn-meta">.</span><span class="syn-meta">.</span><span class="syn-meta">.</span><span class="syn-punct">]</span><span class="syn-punct">)</span><span class="syn-punct">,</span>
      <span class="syn-punct">(</span><span class="syn-number">2</span><span class="syn-punct">,</span> <span class="syn-string">"..."</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.2</span><span class="syn-punct">,</span> <span class="syn-meta">.</span><span class="syn-meta">.</span><span class="syn-meta">.</span><span class="syn-punct">]</span><span class="syn-punct">)</span><span class="syn-punct">,</span>
      <span class="syn-meta">.</span><span class="syn-meta">.</span><span class="syn-meta">.</span><span class="syn-punct">]</span>
</code></pre>
<h3 id="5-use-appropriate-vector-dimensions" node="[object Object]">5. Use Appropriate Vector Dimensions</h3>
<p>Common dimensions:</p>
<ul>
<li>OpenAI text-embedding-3-small: 1536</li>
<li>Cohere embed-english-v3: 1024</li>
<li>all-MiniLM-L6-v2: 384</li>
<li>CLIP ViT-B/32: 512</li>
</ul>
<p>Higher dimensions = more memory, slower search.</p>
<hr/>
<h2 id="troubleshooting" node="[object Object]">Troubleshooting</h2>
<h3 id="index-shows-invalid" node="[object Object]">Index Shows &quot;Invalid&quot;</h3>
<p><strong>Cause</strong>: Base relation was modified.</p>
<p><strong>Solution</strong>:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index rebuild my_idx
</code></pre>
<h3 id="search-returns-no-results" node="[object Object]">Search Returns No Results</h3>
<p><strong>Possible causes</strong>:</p>
<ol>
<li>Index not yet built</li>
<li>Query vector dimension mismatch</li>
<li>No vectors in relation</li>
</ol>
<p><strong>Debug</strong>:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-meta">.index stats</span> <span class="syn-identifier">my_idx</span>
<span class="syn-query">?</span> <span class="syn-identifier">documents</span><span class="syn-punct">(</span><span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-variable">_</span><span class="syn-punct">,</span> <span class="syn-variable">V</span><span class="syn-punct">)</span>  <span class="syn-comment">// Check if data exists</span>
</code></pre>
<h3 id="poor-search-quality" node="[object Object]">Poor Search Quality</h3>
<p><strong>Causes</strong>:</p>
<ol>
<li>Wrong distance metric for embedding type</li>
<li>ef_search too low</li>
<li>Many tombstones</li>
</ol>
<p><strong>Solutions</strong>:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Check metric matches embedding type</span>
<span class="syn-meta">.index stats</span> <span class="syn-identifier">my_idx</span>

<span class="syn-comment">// Increase ef_search</span>
<span class="syn-meta">.index create</span> <span class="syn-identifier">my_idx</span> <span class="syn-identifier">on</span> <span class="syn-identifier">docs</span><span class="syn-punct">(</span><span class="syn-identifier">emb</span><span class="syn-punct">)</span> <span class="syn-identifier">ef_search</span> <span class="syn-number">100</span>

<span class="syn-comment">// Rebuild to remove tombstones</span>
<span class="syn-meta">.index rebuild</span> <span class="syn-identifier">my_idx</span>
</code></pre>
<h3 id="high-memory-usage" node="[object Object]">High Memory Usage</h3>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Reduce <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">m</code> parameter (trades recall for memory)</li>
<li>Use vector quantization (see <a href="vectors" target="_blank" rel="noopener noreferrer" node="[object Object]">Vectors Guide</a>)</li>
<li>Consider approximate embeddings with lower dimensions</li>
</ol>
<hr/>
<h2 id="next-steps" node="[object Object]">Next Steps</h2>
<ul>
<li><a href="vectors" target="_blank" rel="noopener noreferrer" node="[object Object]">Vector Search Tutorial</a> - Distance functions and semantic search</li>
<li><a href="configuration" target="_blank" rel="noopener noreferrer" node="[object Object]">Configuration Guide</a> - Index persistence settings</li>
</ul></article></div><div class="hidden lg:block w-48 shrink-0 border-l border-border/50"><div class="sticky top-0 p-4"><p class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">On this page</p><nav class="space-y-1"><a href="#why-use-indexes" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Why Use Indexes?</a><a href="#creating-an-index" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Creating an Index</a><a href="#basic-syntax" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Basic Syntax</a><a href="#simple-example" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Simple Example</a><a href="#with-options" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">With Options</a><a href="#index-options" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Index Options</a><a href="#distance-metrics" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Distance Metrics</a><a href="#hnsw-parameters" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">HNSW Parameters</a><a href="#parameter-tuning" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Parameter Tuning</a><a href="#managing-indexes" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Managing Indexes</a><a href="#list-all-indexes" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">List All Indexes</a><a href="#view-index-statistics" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">View Index Statistics</a><a href="#rebuild-an-index" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Rebuild an Index</a><a href="#drop-an-index" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Drop an Index</a><a href="#using-indexes-in-queries" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Using Indexes in Queries</a><a href="#syntax" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Syntax</a><a href="#examples" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Examples</a><a href="#index-lifecycle" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Index Lifecycle</a><a href="#build-phase" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Build Phase</a><a href="#invalidation" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Invalidation</a><a href="#rebuild" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Rebuild</a><a href="#index-architecture" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Index Architecture</a><a href="#hnsw-structure" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">HNSW Structure</a><a href="#memory-usage" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Memory Usage</a><a href="#tombstones-and-compaction" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Tombstones and Compaction</a><a href="#automatic-compaction" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Automatic Compaction</a><a href="#manual-compaction" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Manual Compaction</a><a href="#best-practices" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Best Practices</a><a href="#1-choose-the-right-metric" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">1. Choose the Right Metric</a><a href="#2-tune-parameters-for-your-use-case" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">2. Tune Parameters for Your Use Case</a><a href="#3-monitor-index-health" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">3. Monitor Index Health</a><a href="#4-create-indexes-before-bulk-load" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">4. Create Indexes Before Bulk Load</a><a href="#5-use-appropriate-vector-dimensions" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">5. Use Appropriate Vector Dimensions</a><a href="#troubleshooting" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Troubleshooting</a><a href="#index-shows-invalid" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Index Shows &quot;Invalid&quot;</a><a href="#search-returns-no-results" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Search Returns No Results</a><a href="#poor-search-quality" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Poor Search Quality</a><a href="#high-memory-usage" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">High Memory Usage</a><a href="#next-steps" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Next Steps</a></nav></div></div></div></div></div></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1942,[\"177\",\"static/chunks/app/layout-7e9963bf811be36b.js\"],\"ThemeProvider\"]\n3:I[7121,[],\"\"]\n4:I[4581,[],\"\"]\n6:I[484,[],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[484,[],\"ViewportBoundary\"]\nb:I[484,[],\"MetadataBoundary\"]\nd:I[7123,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/4bd7a24b7976d4e6.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"05bjYGyiAumoEMBrfWHih\",\"c\":[\"\",\"docs\",\"guides\",\"indexing\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"guides/indexing\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4bd7a24b7976d4e6.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_188709 __variable_9a8899 font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:I[8428,[\"758\",\"static/chunks/758-3cb69ce377cde046.js\",\"121\",\"static/chunks/121-aece4f809b101dc1.js\",\"502\",\"static/chunks/502-e809071f8789437b.js\",\"689\",\"static/chunks/689-4fcf9680fdc90283.js\",\"870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js\"],\"DocsPageClient\"]\nf:T208e,"])</script><script>self.__next_f.push([1,"# Indexing Guide\n\nInputLayer provides HNSW (Hierarchical Navigable Small World) indexes for fast approximate nearest neighbor search on vector data.\n\n## Why Use Indexes?\n\nWithout an index, vector similarity queries perform a linear scan:\n- **10K vectors**: ~10ms\n- **100K vectors**: ~100ms\n- **1M vectors**: ~1s\n\nWith an HNSW index:\n- **10K vectors**: ~1ms\n- **100K vectors**: ~5ms\n- **1M vectors**: ~10ms\n\n**Trade-off**: Indexes use memory and may return approximate (not exact) results.\n\n---\n\n## Creating an Index\n\n### Basic Syntax\n\n```\n.index create \u003cname\u003e on \u003crelation\u003e(\u003ccolumn\u003e) [options]\n```\n\n### Simple Example\n\n```datalog\n// Create a documents table with embeddings\n+documents(id: int, title: string, embedding: vector)\n\n// Insert some documents\n+documents(1, \"Introduction to ML\", [0.1, 0.2, 0.3, 0.4])\n+documents(2, \"Vector Databases\", [0.15, 0.25, 0.28, 0.42])\n+documents(3, \"Graph Theory\", [0.8, 0.1, 0.05, 0.05])\n```\n\n```\n.index create doc_emb_idx on documents(embedding)\n```\n\n### With Options\n\n```\n.index create doc_emb_idx on documents(embedding) metric cosine m 16 ef_search 50\n```\n\n---\n\n## Index Options\n\n### Distance Metrics\n\n| Metric | Aliases | Use Case |\n|--------|---------|----------|\n| `cosine` | `cos` | Text embeddings (most common) |\n| `euclidean` | `l2`, `euclid` | Image embeddings |\n| `dot` | `dotproduct`, `inner` | When vectors have meaningful magnitude |\n| `manhattan` | `l1`, `taxicab` | Sparse vectors |\n\n**Default**: `cosine`\n\n```\n.index create my_idx on vectors(embedding) metric l2\n.index create my_idx on vectors(embedding) metric cosine\n.index create my_idx on vectors(embedding) metric dot\n```\n\n### HNSW Parameters\n\n| Parameter | Default | Description |\n|-----------|---------|-------------|\n| `m` | 16 | Max connections per node (higher = better recall, more memory) |\n| `ef_construction` | 200 | Construction-time ef (higher = better quality, slower build) |\n| `ef_search` | 50 | Search-time ef (higher = better recall, slower search) |\n\n```\n.index create my_idx on vectors(embedding) m 32 ef_search 100\n```\n\n### Parameter Tuning\n\n**For higher recall (more accurate results):**\n```\n.index create my_idx on vectors(embedding) m 32 ef_construction 400 ef_search 100\n```\n\n**For faster search (lower recall):**\n```\n.index create my_idx on vectors(embedding) m 8 ef_search 20\n```\n\n**For large datasets (millions of vectors):**\n```\n.index create my_idx on vectors(embedding) m 48 ef_construction 500 ef_search 200\n```\n\n---\n\n## Managing Indexes\n\n### List All Indexes\n\n```\n.index\n```\n\nor\n\n```\n.index list\n```\n\n**Output:**\n\n| Name | Relation | Column | Type | Metric | Valid |\n|---|---|---|---|---|---|\n| doc_emb_idx | documents | embedding | hnsw | cosine | yes |\n\n### View Index Statistics\n\n```\n.index stats doc_emb_idx\n```\n\n**Output:**\n```\nIndex: doc_emb_idx\n  Relation:   documents\n  Column:     embedding\n  Type:       hnsw\n  Metric:     cosine\n  Vectors:    10000\n  Dimension:  768\n  Valid:      yes\n  Tombstones: 0\n  Built:      2024-01-15 10:30:00\n```\n\n### Rebuild an Index\n\nAfter many insertions/deletions, an index may become fragmented. Rebuild to optimize:\n\n```\n.index rebuild doc_emb_idx\n```\n\n### Drop an Index\n\n```\n.index drop doc_emb_idx\n```\n\n---\n\n## Using Indexes in Queries\n\nUse the `hnsw_nearest()` predicate in query bodies to perform fast approximate nearest-neighbor search via an HNSW index.\n\n### Syntax\n\n```\nhnsw_nearest(\"index_name\", QueryVec, K, IdVar, DistVar [, EfSearch])\n```\n\n- `index_name` — String literal naming the HNSW index\n- `QueryVec` — Variable bound to a vector, or a vector literal `[1.0, 2.0]`\n- `K` — Integer: number of nearest neighbors\n- `IdVar` — Variable to bind result tuple IDs\n- `DistVar` — Variable to bind distances\n- `EfSearch` — Optional integer: override ef_search for this query\n\n### Examples\n\n```datalog\n// Find 5 nearest documents to a literal query vector\n? hnsw_nearest(\"doc_emb_idx\", [0.11, 0.21, 0.29], 5, Id, Dist)\n\n// Use a bound query vector and join with base data\n? query_vec(QV), hnsw_nearest(\"doc_emb_idx\", QV, 10, Id, Dist), documents(Id, Title, _)\n\n// Override ef_search for higher recall\n? hnsw_nearest(\"doc_emb_idx\", [0.11, 0.21, 0.29], 5, Id, Dist, 200)\n```\n\n**Note:** Indexes are not used automatically — you must explicitly call `hnsw_nearest()` to use an HNSW index.\n\n---\n\n## Index Lifecycle\n\n### Build Phase\n\nWhen you create an index, vectors are inserted incrementally:\n\n1. Index is registered with metadata\n2. Existing vectors are added to the HNSW structure\n3. Index is marked as valid\n\n### Invalidation\n\nIndexes are automatically invalidated when:\n- Base relation is modified (insert/delete)\n- Schema changes\n\n```\n.index stats my_idx\n  Valid: no  ← Index needs rebuild\n```\n\n### Rebuild\n\nInvalid indexes are rebuilt on:\n- Explicit `.index rebuild` command\n- Next query that uses the index\n\n---\n\n## Index Architecture\n\n### HNSW Structure\n\n```\nLayer 3:  *-------------*\n          |             |\nLayer 2:  *---*-----*---*---*\n          |   |     |   |   |\nLayer 1:  *-*-*-*-*-*-*-*-*-*-*\n          | | | | | | | | | | |\nLayer 0:  *********************** (all nodes)\n```\n\nEach layer has fewer nodes. Search starts at top layer and descends:\n1. Find nearest nodes in current layer\n2. Use those as entry points for next layer\n3. Repeat until layer 0\n4. Return k nearest neighbors\n\n### Memory Usage\n\nHNSW indexes use approximately:\n\n```\nmemory approx n * (d * 4 + m * 8) bytes\n```\n\nWhere:\n- `n` = number of vectors\n- `d` = vector dimension\n- `m` = max connections parameter\n\n**Example**: 1M vectors × 768 dimensions × m=16:\n```\n1M × (768 × 4 + 16 × 8) = ~3.2 GB\n```\n\n---\n\n## Tombstones and Compaction\n\nWhen vectors are deleted, they're marked with a tombstone rather than removed immediately:\n\n```\n.index stats my_idx\n  Vectors:    10000\n  Tombstones: 500  ← Deleted entries not yet cleaned up\n```\n\n### Automatic Compaction\n\nWhen the tombstone ratio exceeds 30%, the index is automatically rebuilt inline during the delete operation.\n\n### Manual Compaction\n\nForce a rebuild to remove tombstones:\n\n```\n.index rebuild my_idx\n```\n\n---\n\n## Best Practices\n\n### 1. Choose the Right Metric\n\n| Embedding Type | Recommended Metric |\n|---------------|-------------------|\n| OpenAI embeddings | `cosine` |\n| BERT/Sentence-BERT | `cosine` |\n| Image embeddings (CLIP) | `cosine` |\n| Raw feature vectors | `euclidean` |\n| Pre-normalized vectors | `dot` (fastest) |\n\n### 2. Tune Parameters for Your Use Case\n\n**Discovery/Exploration** (higher recall matters):\n```\n.index create my_idx on docs(emb) m 32 ef_search 100\n```\n\n**Production/Speed** (latency matters):\n```\n.index create my_idx on docs(emb) m 16 ef_search 30\n```\n\n### 3. Monitor Index Health\n\nRegularly check:\n```\n.index stats my_idx\n```\n\nRebuild if:\n- Tombstone ratio \u003e 30%\n- Search quality degrades\n- After bulk insertions\n\n### 4. Create Indexes Before Bulk Load\n\nFor large initial loads, create the index first:\n\n```datalog\n.index create my_idx on docs(emb)\n\n// Then bulk insert\n+docs[(1, \"...\", [0.1, ...]),\n      (2, \"...\", [0.2, ...]),\n      ...]\n```\n\n### 5. Use Appropriate Vector Dimensions\n\nCommon dimensions:\n- OpenAI text-embedding-3-small: 1536\n- Cohere embed-english-v3: 1024\n- all-MiniLM-L6-v2: 384\n- CLIP ViT-B/32: 512\n\nHigher dimensions = more memory, slower search.\n\n---\n\n## Troubleshooting\n\n### Index Shows \"Invalid\"\n\n**Cause**: Base relation was modified.\n\n**Solution**:\n```\n.index rebuild my_idx\n```\n\n### Search Returns No Results\n\n**Possible causes**:\n1. Index not yet built\n2. Query vector dimension mismatch\n3. No vectors in relation\n\n**Debug**:\n```datalog\n.index stats my_idx\n? documents(Id, _, V)  // Check if data exists\n```\n\n### Poor Search Quality\n\n**Causes**:\n1. Wrong distance metric for embedding type\n2. ef_search too low\n3. Many tombstones\n\n**Solutions**:\n```datalog\n// Check metric matches embedding type\n.index stats my_idx\n\n// Increase ef_search\n.index create my_idx on docs(emb) ef_search 100\n\n// Rebuild to remove tombstones\n.index rebuild my_idx\n```\n\n### High Memory Usage\n\n**Solutions**:\n1. Reduce `m` parameter (trades recall for memory)\n2. Use vector quantization (see [Vectors Guide](vectors))\n3. Consider approximate embeddings with lower dimensions\n\n---\n\n## Next Steps\n\n- [Vector Search Tutorial](vectors) - Distance functions and semantic search\n- [Configuration Guide](configuration) - Index persistence settings"])</script><script>self.__next_f.push([1,"5:[\"$\",\"$Le\",null,{\"page\":{\"title\":\"Indexing Guide\",\"content\":\"$f\",\"toc\":[{\"level\":2,\"text\":\"Why Use Indexes?\",\"id\":\"why-use-indexes\"},{\"level\":2,\"text\":\"Creating an Index\",\"id\":\"creating-an-index\"},{\"level\":3,\"text\":\"Basic Syntax\",\"id\":\"basic-syntax\"},{\"level\":3,\"text\":\"Simple Example\",\"id\":\"simple-example\"},{\"level\":3,\"text\":\"With Options\",\"id\":\"with-options\"},{\"level\":2,\"text\":\"Index Options\",\"id\":\"index-options\"},{\"level\":3,\"text\":\"Distance Metrics\",\"id\":\"distance-metrics\"},{\"level\":3,\"text\":\"HNSW Parameters\",\"id\":\"hnsw-parameters\"},{\"level\":3,\"text\":\"Parameter Tuning\",\"id\":\"parameter-tuning\"},{\"level\":2,\"text\":\"Managing Indexes\",\"id\":\"managing-indexes\"},{\"level\":3,\"text\":\"List All Indexes\",\"id\":\"list-all-indexes\"},{\"level\":3,\"text\":\"View Index Statistics\",\"id\":\"view-index-statistics\"},{\"level\":3,\"text\":\"Rebuild an Index\",\"id\":\"rebuild-an-index\"},{\"level\":3,\"text\":\"Drop an Index\",\"id\":\"drop-an-index\"},{\"level\":2,\"text\":\"Using Indexes in Queries\",\"id\":\"using-indexes-in-queries\"},{\"level\":3,\"text\":\"Syntax\",\"id\":\"syntax\"},{\"level\":3,\"text\":\"Examples\",\"id\":\"examples\"},{\"level\":2,\"text\":\"Index Lifecycle\",\"id\":\"index-lifecycle\"},{\"level\":3,\"text\":\"Build Phase\",\"id\":\"build-phase\"},{\"level\":3,\"text\":\"Invalidation\",\"id\":\"invalidation\"},{\"level\":3,\"text\":\"Rebuild\",\"id\":\"rebuild\"},{\"level\":2,\"text\":\"Index Architecture\",\"id\":\"index-architecture\"},{\"level\":3,\"text\":\"HNSW Structure\",\"id\":\"hnsw-structure\"},{\"level\":3,\"text\":\"Memory Usage\",\"id\":\"memory-usage\"},{\"level\":2,\"text\":\"Tombstones and Compaction\",\"id\":\"tombstones-and-compaction\"},{\"level\":3,\"text\":\"Automatic Compaction\",\"id\":\"automatic-compaction\"},{\"level\":3,\"text\":\"Manual Compaction\",\"id\":\"manual-compaction\"},{\"level\":2,\"text\":\"Best Practices\",\"id\":\"best-practices\"},{\"level\":3,\"text\":\"1. Choose the Right Metric\",\"id\":\"1-choose-the-right-metric\"},{\"level\":3,\"text\":\"2. Tune Parameters for Your Use Case\",\"id\":\"2-tune-parameters-for-your-use-case\"},{\"level\":3,\"text\":\"3. Monitor Index Health\",\"id\":\"3-monitor-index-health\"},{\"level\":3,\"text\":\"4. Create Indexes Before Bulk Load\",\"id\":\"4-create-indexes-before-bulk-load\"},{\"level\":3,\"text\":\"5. Use Appropriate Vector Dimensions\",\"id\":\"5-use-appropriate-vector-dimensions\"},{\"level\":2,\"text\":\"Troubleshooting\",\"id\":\"troubleshooting\"},{\"level\":3,\"text\":\"Index Shows \\\"Invalid\\\"\",\"id\":\"index-shows-invalid\"},{\"level\":3,\"text\":\"Search Returns No Results\",\"id\":\"search-returns-no-results\"},{\"level\":3,\"text\":\"Poor Search Quality\",\"id\":\"poor-search-quality\"},{\"level\":3,\"text\":\"High Memory Usage\",\"id\":\"high-memory-usage\"},{\"level\":2,\"text\":\"Next Steps\",\"id\":\"next-steps\"}]},\"slugKey\":\"guides/indexing\"}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[6869,[],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"InputLayer - A symbolic reasoning engine for AI agents\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/icon.svg\"}],[\"$\",\"$L10\",\"3\",{}]]\n8:null\n"])</script></body></html>