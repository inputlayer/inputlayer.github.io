<!DOCTYPE html><!--05bjYGyiAumoEMBrfWHih--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/4bd7a24b7976d4e6.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js"/><script src="/_next/static/chunks/4bd1b696-deba172d32c79f82.js" async=""></script><script src="/_next/static/chunks/794-275dc9ebd3a29fbf.js" async=""></script><script src="/_next/static/chunks/main-app-1fa5b694e5d36a75.js" async=""></script><script src="/_next/static/chunks/app/layout-7e9963bf811be36b.js" async=""></script><script src="/_next/static/chunks/758-3cb69ce377cde046.js" async=""></script><script src="/_next/static/chunks/121-aece4f809b101dc1.js" async=""></script><script src="/_next/static/chunks/502-e809071f8789437b.js" async=""></script><script src="/_next/static/chunks/689-4fcf9680fdc90283.js" async=""></script><script src="/_next/static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js" async=""></script><meta name="next-size-adjust" content=""/><title>InputLayer - A symbolic reasoning engine for AI agents</title><meta name="description" content="Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system."/><link rel="icon" href="/icon.svg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_188709 __variable_9a8899 font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","dark",null,["light","dark"],null,true,true)</script><div class="flex flex-col h-dvh"><header class="sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"><div class="flex h-14 items-center px-6"><a class="mr-8" href="/"><span class="inline-flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg><span class="font-extrabold tracking-tight text-lg">InputLayer</span></span></a><nav class="hidden md:flex items-center gap-6 text-sm"><a class="text-muted-foreground transition-colors hover:text-foreground" href="/docs/">Docs</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/blog/">Blog</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/use-cases/">Use Cases</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/compare/">Compare</a><a href="https://demo.inputlayer.ai" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-muted-foreground transition-colors hover:text-foreground">Demo<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></nav><div class="ml-auto flex items-center gap-3"><div class="inline-flex items-center gap-1.5"><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-3.5 w-3.5"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg><span>Star</span></a><a href="https://github.com/inputlayer/inputlayer/fork" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-git-fork h-3.5 w-3.5"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg><span>Fork</span></a></div><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 h-9 w-9"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-4 w-4"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button><div class="md:hidden"><button class="inline-flex items-center justify-center rounded-md p-2 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></div></header><div class="flex flex-1 overflow-hidden"><div class="w-64 shrink-0 border-r border-border/50 overflow-y-auto"><div class="flex flex-col h-full"><div class="p-3 border-b border-border/50"><div class="relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><input type="text" placeholder="Search docs..." class="w-full h-8 pl-8 pr-3 text-sm rounded-md border border-border bg-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring" value=""/></div></div><nav class="flex-1 overflow-y-auto p-2 space-y-0.5"><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" href="/docs/index/">Overview</a><div data-state="open" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-foreground font-medium" style="padding-left:12px" type="button" aria-controls="radix-_R_j6av5ubtb_" aria-expanded="true" data-state="open" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform rotate-90"><path d="m9 18 6-6-6-6"></path></svg>Guides</button><div data-state="open" id="radix-_R_j6av5ubtb_" data-slot="collapsible-content"><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/quickstart/">Quick Start</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/installation/">Installation</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/first-program/">Your First Program</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/core-concepts/">Data Modeling</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/repl/">REPL Guide</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/recursion/">Recursion</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/vectors/">Vector Search</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/indexing/">Indexing</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/temporal/">Temporal Reasoning</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/persistence/">Persistence</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/configuration/">Configuration</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors bg-primary/10 text-primary font-medium" style="padding-left:24px" href="/docs/guides/rest-api/">REST API</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/python-sdk/">Python SDK</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/deployment/">Deployment</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/authentication/">Authentication</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/websocket-api/">WebSocket API</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/migrations/">Migrations</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/troubleshooting/">Troubleshooting</a></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_r6av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Reference</button><div data-state="closed" id="radix-_R_r6av5ubtb_" hidden="" data-slot="collapsible-content"></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_136av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Specification</button><div data-state="closed" id="radix-_R_136av5ubtb_" hidden="" data-slot="collapsible-content"></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_1b6av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Internals</button><div data-state="closed" id="radix-_R_1b6av5ubtb_" hidden="" data-slot="collapsible-content"></div></div></nav></div></div><div class="flex flex-1 flex-col overflow-hidden"><div class="flex flex-1 overflow-hidden"><div class="flex-1 overflow-y-auto px-8 py-6 max-w-4xl mx-auto"><article class="docs-prose"><h1 id="http-api-guide" node="[object Object]">HTTP API Guide</h1>
<p>InputLayer is a <strong>WebSocket-first</strong> system. All data operations (queries, inserts, rule definitions, meta commands) go through the WebSocket API. The HTTP REST endpoints provide health checks, metrics, and documentation.</p>
<p>For query execution, see the <a href="websocket-api" target="_blank" rel="noopener noreferrer" node="[object Object]">WebSocket API</a> guide.</p>
<h2 id="starting-the-server" node="[object Object]">Starting the Server</h2>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-bash text-sm"><span class="syn-comment"># Start the HTTP server</span>
./target/release/inputlayer<span class="syn-meta">-server</span>

<span class="syn-comment"># With custom port</span>
./target/release/inputlayer<span class="syn-meta">-server</span> <span class="syn-meta">--port</span> 9090

<span class="syn-comment"># With config file</span>
./target/release/inputlayer<span class="syn-meta">-server</span> <span class="syn-meta">--config</span> config.toml</code></pre>
<p>Or enable in configuration:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-toml text-sm"><span class="syn-meta">[http]</span>
<span class="syn-identifier">enabled</span> = <span class="syn-keyword">true</span>
<span class="syn-identifier">host</span> = <span class="syn-string">"127.0.0.1"</span>
<span class="syn-identifier">port</span> = <span class="syn-number">8080</span></code></pre>
<h2 id="base-url" node="[object Object]">Base URL</h2>
<p>All endpoints are available at both root and versioned paths:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">http://localhost:8080/health
http://localhost:8080/v1/health
</code></pre>
<hr/>
<h2 id="health-monitoring-endpoints" node="[object Object]">Health &amp; Monitoring Endpoints</h2>
<h3 id="health-check" node="[object Object]">Health Check</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /health</code></pre>
<p>Returns server health status. Returns HTTP 200 when healthy, 503 when storage is degraded.</p>
<p><strong>Response (200):</strong></p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-json text-sm">{
  <span class="syn-identifier">"success"</span>: <span class="syn-keyword">true</span>,
  <span class="syn-identifier">"data"</span>: {
    <span class="syn-identifier">"status"</span>: <span class="syn-string">"healthy"</span>,
    <span class="syn-identifier">"version"</span>: <span class="syn-string">"0.1.0"</span>,
    <span class="syn-identifier">"uptime_secs"</span>: <span class="syn-number">3600</span>
  }
}</code></pre>
<p><strong>Response (503) - Storage lock contended:</strong></p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-json text-sm">{
  <span class="syn-identifier">"success"</span>: <span class="syn-keyword">true</span>,
  <span class="syn-identifier">"data"</span>: {
    <span class="syn-identifier">"status"</span>: <span class="syn-string">"degraded"</span>,
    <span class="syn-identifier">"version"</span>: <span class="syn-string">"0.1.0"</span>,
    <span class="syn-identifier">"uptime_secs"</span>: <span class="syn-number">3600</span>
  }
}</code></pre>
<h3 id="liveness-probe" node="[object Object]">Liveness Probe</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /live</code></pre>
<p>Always returns HTTP 200 if the process is alive. Does not check storage. Use for Kubernetes liveness probes.</p>
<h3 id="readiness-probe" node="[object Object]">Readiness Probe</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /ready</code></pre>
<p>Returns HTTP 200 if the server can handle requests (storage accessible). Returns 503 if storage lock is contended. Use for Kubernetes readiness probes.</p>
<h3 id="server-statistics" node="[object Object]">Server Statistics</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /metrics</code></pre>
<p><strong>Response:</strong></p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-json text-sm">{
  <span class="syn-identifier">"success"</span>: <span class="syn-keyword">true</span>,
  <span class="syn-identifier">"data"</span>: {
    <span class="syn-identifier">"knowledge_graphs"</span>: <span class="syn-number">3</span>,
    <span class="syn-identifier">"relations"</span>: <span class="syn-number">10</span>,
    <span class="syn-identifier">"views"</span>: <span class="syn-number">5</span>,
    <span class="syn-identifier">"memory_usage_bytes"</span>: <span class="syn-number">262144</span>,
    <span class="syn-identifier">"query_count"</span>: <span class="syn-number">15000</span>,
    <span class="syn-identifier">"uptime_secs"</span>: <span class="syn-number">3600</span>,
    <span class="syn-identifier">"sessions"</span>: {
      <span class="syn-identifier">"total"</span>: <span class="syn-number">5</span>,
      <span class="syn-identifier">"clean"</span>: <span class="syn-number">3</span>,
      <span class="syn-identifier">"dirty"</span>: <span class="syn-number">2</span>,
      <span class="syn-identifier">"total_ephemeral_facts"</span>: <span class="syn-number">100</span>,
      <span class="syn-identifier">"total_ephemeral_rules"</span>: <span class="syn-number">10</span>
    }
  }
}</code></pre>
<h3 id="prometheus-metrics" node="[object Object]">Prometheus Metrics</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /metrics/prometheus</code></pre>
<p>Returns metrics in Prometheus text exposition format:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]"># HELP inputlayer_uptime_seconds Server uptime in seconds.
# TYPE inputlayer_uptime_seconds gauge
inputlayer_uptime_seconds 3600
# HELP inputlayer_queries_total Total queries executed.
# TYPE inputlayer_queries_total counter
inputlayer_queries_total 15000
# HELP inputlayer_knowledge_graphs Number of knowledge graphs.
# TYPE inputlayer_knowledge_graphs gauge
inputlayer_knowledge_graphs 3
# HELP inputlayer_relations_total Total base relations.
# TYPE inputlayer_relations_total gauge
inputlayer_relations_total 10
# HELP inputlayer_views_total Total derived views (rules).
# TYPE inputlayer_views_total gauge
inputlayer_views_total 5
# HELP inputlayer_sessions_total Active sessions.
# TYPE inputlayer_sessions_total gauge
inputlayer_sessions_total 5
# HELP inputlayer_sessions_clean Clean (idle) sessions.
# TYPE inputlayer_sessions_clean gauge
inputlayer_sessions_clean 3
# HELP inputlayer_sessions_dirty Dirty (active) sessions.
# TYPE inputlayer_sessions_dirty gauge
inputlayer_sessions_dirty 2
# HELP inputlayer_tuples_total Total stored tuples.
# TYPE inputlayer_tuples_total gauge
inputlayer_tuples_total 50000
# HELP inputlayer_memory_usage_bytes Estimated memory usage.
# TYPE inputlayer_memory_usage_bytes gauge
inputlayer_memory_usage_bytes 104857600
# HELP inputlayer_ephemeral_facts Ephemeral facts across sessions.
# TYPE inputlayer_ephemeral_facts gauge
inputlayer_ephemeral_facts 10
# HELP inputlayer_ephemeral_rules Ephemeral rules across sessions.
# TYPE inputlayer_ephemeral_rules gauge
inputlayer_ephemeral_rules 2
</code></pre>
<hr/>
<h2 id="websocket-endpoints" node="[object Object]">WebSocket Endpoints</h2>
<h3 id="global-websocket" node="[object Object]">Global WebSocket</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /ws</code></pre>
<p>Upgrades to a WebSocket connection. Requires authentication as the first message. See <a href="websocket-api" target="_blank" rel="noopener noreferrer" node="[object Object]">WebSocket API</a> for the full protocol.</p>
<h3 id="session-scoped-websocket" node="[object Object]">Session-Scoped WebSocket</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /sessions/:id/ws</code></pre>
<p>Connects to an existing session by ID.</p>
<hr/>
<h2 id="documentation-endpoints" node="[object Object]">Documentation Endpoints</h2>
<h3 id="asyncapi-specification" node="[object Object]">AsyncAPI Specification</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /api/asyncapi.yaml</code></pre>
<p>Returns the AsyncAPI specification describing the WebSocket message protocol.</p>
<h3 id="openapi-specification" node="[object Object]">OpenAPI Specification</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /api/openapi.yaml</code></pre>
<p>Returns the OpenAPI specification describing the REST endpoints.</p>
<h3 id="websocket-documentation" node="[object Object]">WebSocket Documentation</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-keyword">GET</span> /api/ws-docs</code></pre>
<p>Returns an interactive HTML page for exploring the WebSocket API.</p>
<hr/>
<h2 id="authentication" node="[object Object]">Authentication</h2>
<p>REST endpoints (except health/live/ready) require an API key in the Authorization header:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-http text-sm"><span class="syn-identifier">Authorization</span>: Bearer &lt;api-key&gt;</code></pre>
<p>API keys are managed via meta commands in the WebSocket session:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-meta">.apikey create</span> <span class="syn-identifier">my</span><span class="syn-arith">-</span><span class="syn-identifier">service</span><span class="syn-arith">-</span><span class="syn-identifier">key</span>
<span class="syn-meta">.apikey list</span>
<span class="syn-meta">.apikey revoke</span> <span class="syn-identifier">my</span><span class="syn-arith">-</span><span class="syn-identifier">service</span><span class="syn-arith">-</span><span class="syn-identifier">key</span>
</code></pre>
<p>See <a href="authentication" target="_blank" rel="noopener noreferrer" node="[object Object]">Authentication</a> for details.</p>
<hr/>
<h2 id="error-responses" node="[object Object]">Error Responses</h2>
<p>All errors use a consistent format:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-json text-sm">{
  <span class="syn-identifier">"success"</span>: <span class="syn-keyword">false</span>,
  <span class="syn-identifier">"error"</span>: {
    <span class="syn-identifier">"code"</span>: <span class="syn-string">"NOT_FOUND"</span>,
    <span class="syn-identifier">"message"</span>: <span class="syn-string">"Resource not found"</span>
  }
}</code></pre>
<p><strong>Error Codes:</strong></p>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Code</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">HTTP Status</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Description</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">NOT_FOUND</code></td><td class="border px-4 py-2" node="[object Object]">404</td><td class="border px-4 py-2" node="[object Object]">Resource not found</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">BAD_REQUEST</code></td><td class="border px-4 py-2" node="[object Object]">400</td><td class="border px-4 py-2" node="[object Object]">Invalid request</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">INTERNAL_ERROR</code></td><td class="border px-4 py-2" node="[object Object]">500</td><td class="border px-4 py-2" node="[object Object]">Server error</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">SERVICE_UNAVAILABLE</code></td><td class="border px-4 py-2" node="[object Object]">503</td><td class="border px-4 py-2" node="[object Object]">Server not ready</td></tr></tbody></table></div>
<hr/>
<h2 id="client-examples" node="[object Object]">Client Examples</h2>
<h3 id="curl-health-check" node="[object Object]">cURL - Health Check</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-bash text-sm"><span class="syn-comment"># Check server health</span>
<span class="syn-builtin">curl</span> http://localhost:8080/health

<span class="syn-comment"># Get server stats</span>
<span class="syn-builtin">curl</span> http://localhost:8080/metrics

<span class="syn-comment"># Get Prometheus metrics</span>
<span class="syn-builtin">curl</span> http://localhost:8080/metrics/prometheus</code></pre>
<h3 id="curl-with-authentication" node="[object Object]">cURL - With Authentication</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-bash text-sm"><span class="syn-comment"># Authenticated request</span>
<span class="syn-builtin">curl</span> <span class="syn-meta">-H</span> <span class="syn-string">"Authorization: Bearer your-api-key"</span> http://localhost:8080/metrics</code></pre>
<h3 id="kubernetes-probes" node="[object Object]">Kubernetes Probes</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-yaml text-sm"><span class="syn-identifier">livenessProbe</span>:
  httpGet:
    path: /live
    port: <span class="syn-number">8080</span>
  initialDelaySeconds: <span class="syn-number">5</span>
  periodSeconds: <span class="syn-number">10</span>

<span class="syn-identifier">readinessProbe</span>:
  httpGet:
    path: /ready
    port: <span class="syn-number">8080</span>
  initialDelaySeconds: <span class="syn-number">5</span>
  periodSeconds: <span class="syn-number">5</span></code></pre>
<hr/>
<h2 id="next-steps" node="[object Object]">Next Steps</h2>
<ul>
<li><a href="websocket-api" target="_blank" rel="noopener noreferrer" node="[object Object]">WebSocket API</a> - Execute queries and manage data</li>
<li><a href="configuration" target="_blank" rel="noopener noreferrer" node="[object Object]">Configuration</a> - Server configuration options</li>
<li><a href="authentication" target="_blank" rel="noopener noreferrer" node="[object Object]">Authentication</a> - User and API key management</li>
</ul></article></div><div class="hidden lg:block w-48 shrink-0 border-l border-border/50"><div class="sticky top-0 p-4"><p class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">On this page</p><nav class="space-y-1"><a href="#starting-the-server" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Starting the Server</a><a href="#base-url" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Base URL</a><a href="#health-monitoring-endpoints" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Health &amp; Monitoring Endpoints</a><a href="#health-check" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Health Check</a><a href="#liveness-probe" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Liveness Probe</a><a href="#readiness-probe" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Readiness Probe</a><a href="#server-statistics" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Server Statistics</a><a href="#prometheus-metrics" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Prometheus Metrics</a><a href="#websocket-endpoints" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">WebSocket Endpoints</a><a href="#global-websocket" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Global WebSocket</a><a href="#session-scoped-websocket" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Session-Scoped WebSocket</a><a href="#documentation-endpoints" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Documentation Endpoints</a><a href="#asyncapi-specification" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">AsyncAPI Specification</a><a href="#openapi-specification" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">OpenAPI Specification</a><a href="#websocket-documentation" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">WebSocket Documentation</a><a href="#authentication" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Authentication</a><a href="#error-responses" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Error Responses</a><a href="#client-examples" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Client Examples</a><a href="#curl-health-check" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">cURL - Health Check</a><a href="#curl-with-authentication" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">cURL - With Authentication</a><a href="#kubernetes-probes" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Kubernetes Probes</a><a href="#next-steps" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Next Steps</a></nav></div></div></div></div></div></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1942,[\"177\",\"static/chunks/app/layout-7e9963bf811be36b.js\"],\"ThemeProvider\"]\n3:I[7121,[],\"\"]\n4:I[4581,[],\"\"]\n6:I[484,[],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[484,[],\"ViewportBoundary\"]\nb:I[484,[],\"MetadataBoundary\"]\nd:I[7123,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/4bd7a24b7976d4e6.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"05bjYGyiAumoEMBrfWHih\",\"c\":[\"\",\"docs\",\"guides\",\"rest-api\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"guides/rest-api\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4bd7a24b7976d4e6.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_188709 __variable_9a8899 font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:I[8428,[\"758\",\"static/chunks/758-3cb69ce377cde046.js\",\"121\",\"static/chunks/121-aece4f809b101dc1.js\",\"502\",\"static/chunks/502-e809071f8789437b.js\",\"689\",\"static/chunks/689-4fcf9680fdc90283.js\",\"870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js\"],\"DocsPageClient\"]\nf:T17df,"])</script><script>self.__next_f.push([1,"# HTTP API Guide\n\nInputLayer is a **WebSocket-first** system. All data operations (queries, inserts, rule definitions, meta commands) go through the WebSocket API. The HTTP REST endpoints provide health checks, metrics, and documentation.\n\nFor query execution, see the [WebSocket API](websocket-api) guide.\n\n## Starting the Server\n\n```bash\n# Start the HTTP server\n./target/release/inputlayer-server\n\n# With custom port\n./target/release/inputlayer-server --port 9090\n\n# With config file\n./target/release/inputlayer-server --config config.toml\n```\n\nOr enable in configuration:\n\n```toml\n[http]\nenabled = true\nhost = \"127.0.0.1\"\nport = 8080\n```\n\n## Base URL\n\nAll endpoints are available at both root and versioned paths:\n\n```\nhttp://localhost:8080/health\nhttp://localhost:8080/v1/health\n```\n\n---\n\n## Health \u0026 Monitoring Endpoints\n\n### Health Check\n\n```http\nGET /health\n```\n\nReturns server health status. Returns HTTP 200 when healthy, 503 when storage is degraded.\n\n**Response (200):**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"status\": \"healthy\",\n    \"version\": \"0.1.0\",\n    \"uptime_secs\": 3600\n  }\n}\n```\n\n**Response (503) - Storage lock contended:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"status\": \"degraded\",\n    \"version\": \"0.1.0\",\n    \"uptime_secs\": 3600\n  }\n}\n```\n\n### Liveness Probe\n\n```http\nGET /live\n```\n\nAlways returns HTTP 200 if the process is alive. Does not check storage. Use for Kubernetes liveness probes.\n\n### Readiness Probe\n\n```http\nGET /ready\n```\n\nReturns HTTP 200 if the server can handle requests (storage accessible). Returns 503 if storage lock is contended. Use for Kubernetes readiness probes.\n\n### Server Statistics\n\n```http\nGET /metrics\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"knowledge_graphs\": 3,\n    \"relations\": 10,\n    \"views\": 5,\n    \"memory_usage_bytes\": 262144,\n    \"query_count\": 15000,\n    \"uptime_secs\": 3600,\n    \"sessions\": {\n      \"total\": 5,\n      \"clean\": 3,\n      \"dirty\": 2,\n      \"total_ephemeral_facts\": 100,\n      \"total_ephemeral_rules\": 10\n    }\n  }\n}\n```\n\n### Prometheus Metrics\n\n```http\nGET /metrics/prometheus\n```\n\nReturns metrics in Prometheus text exposition format:\n\n```\n# HELP inputlayer_uptime_seconds Server uptime in seconds.\n# TYPE inputlayer_uptime_seconds gauge\ninputlayer_uptime_seconds 3600\n# HELP inputlayer_queries_total Total queries executed.\n# TYPE inputlayer_queries_total counter\ninputlayer_queries_total 15000\n# HELP inputlayer_knowledge_graphs Number of knowledge graphs.\n# TYPE inputlayer_knowledge_graphs gauge\ninputlayer_knowledge_graphs 3\n# HELP inputlayer_relations_total Total base relations.\n# TYPE inputlayer_relations_total gauge\ninputlayer_relations_total 10\n# HELP inputlayer_views_total Total derived views (rules).\n# TYPE inputlayer_views_total gauge\ninputlayer_views_total 5\n# HELP inputlayer_sessions_total Active sessions.\n# TYPE inputlayer_sessions_total gauge\ninputlayer_sessions_total 5\n# HELP inputlayer_sessions_clean Clean (idle) sessions.\n# TYPE inputlayer_sessions_clean gauge\ninputlayer_sessions_clean 3\n# HELP inputlayer_sessions_dirty Dirty (active) sessions.\n# TYPE inputlayer_sessions_dirty gauge\ninputlayer_sessions_dirty 2\n# HELP inputlayer_tuples_total Total stored tuples.\n# TYPE inputlayer_tuples_total gauge\ninputlayer_tuples_total 50000\n# HELP inputlayer_memory_usage_bytes Estimated memory usage.\n# TYPE inputlayer_memory_usage_bytes gauge\ninputlayer_memory_usage_bytes 104857600\n# HELP inputlayer_ephemeral_facts Ephemeral facts across sessions.\n# TYPE inputlayer_ephemeral_facts gauge\ninputlayer_ephemeral_facts 10\n# HELP inputlayer_ephemeral_rules Ephemeral rules across sessions.\n# TYPE inputlayer_ephemeral_rules gauge\ninputlayer_ephemeral_rules 2\n```\n\n---\n\n## WebSocket Endpoints\n\n### Global WebSocket\n\n```http\nGET /ws\n```\n\nUpgrades to a WebSocket connection. Requires authentication as the first message. See [WebSocket API](websocket-api) for the full protocol.\n\n### Session-Scoped WebSocket\n\n```http\nGET /sessions/:id/ws\n```\n\nConnects to an existing session by ID.\n\n---\n\n## Documentation Endpoints\n\n### AsyncAPI Specification\n\n```http\nGET /api/asyncapi.yaml\n```\n\nReturns the AsyncAPI specification describing the WebSocket message protocol.\n\n### OpenAPI Specification\n\n```http\nGET /api/openapi.yaml\n```\n\nReturns the OpenAPI specification describing the REST endpoints.\n\n### WebSocket Documentation\n\n```http\nGET /api/ws-docs\n```\n\nReturns an interactive HTML page for exploring the WebSocket API.\n\n---\n\n## Authentication\n\nREST endpoints (except health/live/ready) require an API key in the Authorization header:\n\n```http\nAuthorization: Bearer \u003capi-key\u003e\n```\n\nAPI keys are managed via meta commands in the WebSocket session:\n\n```datalog\n.apikey create my-service-key\n.apikey list\n.apikey revoke my-service-key\n```\n\nSee [Authentication](authentication) for details.\n\n---\n\n## Error Responses\n\nAll errors use a consistent format:\n\n```json\n{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"NOT_FOUND\",\n    \"message\": \"Resource not found\"\n  }\n}\n```\n\n**Error Codes:**\n\n| Code | HTTP Status | Description |\n|------|-------------|-------------|\n| `NOT_FOUND` | 404 | Resource not found |\n| `BAD_REQUEST` | 400 | Invalid request |\n| `INTERNAL_ERROR` | 500 | Server error |\n| `SERVICE_UNAVAILABLE` | 503 | Server not ready |\n\n---\n\n## Client Examples\n\n### cURL - Health Check\n\n```bash\n# Check server health\ncurl http://localhost:8080/health\n\n# Get server stats\ncurl http://localhost:8080/metrics\n\n# Get Prometheus metrics\ncurl http://localhost:8080/metrics/prometheus\n```\n\n### cURL - With Authentication\n\n```bash\n# Authenticated request\ncurl -H \"Authorization: Bearer your-api-key\" http://localhost:8080/metrics\n```\n\n### Kubernetes Probes\n\n```yaml\nlivenessProbe:\n  httpGet:\n    path: /live\n    port: 8080\n  initialDelaySeconds: 5\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /ready\n    port: 8080\n  initialDelaySeconds: 5\n  periodSeconds: 5\n```\n\n---\n\n## Next Steps\n\n- [WebSocket API](websocket-api) - Execute queries and manage data\n- [Configuration](configuration) - Server configuration options\n- [Authentication](authentication) - User and API key management"])</script><script>self.__next_f.push([1,"5:[\"$\",\"$Le\",null,{\"page\":{\"title\":\"HTTP API Guide\",\"content\":\"$f\",\"toc\":[{\"level\":2,\"text\":\"Starting the Server\",\"id\":\"starting-the-server\"},{\"level\":2,\"text\":\"Base URL\",\"id\":\"base-url\"},{\"level\":2,\"text\":\"Health \u0026 Monitoring Endpoints\",\"id\":\"health-monitoring-endpoints\"},{\"level\":3,\"text\":\"Health Check\",\"id\":\"health-check\"},{\"level\":3,\"text\":\"Liveness Probe\",\"id\":\"liveness-probe\"},{\"level\":3,\"text\":\"Readiness Probe\",\"id\":\"readiness-probe\"},{\"level\":3,\"text\":\"Server Statistics\",\"id\":\"server-statistics\"},{\"level\":3,\"text\":\"Prometheus Metrics\",\"id\":\"prometheus-metrics\"},{\"level\":2,\"text\":\"WebSocket Endpoints\",\"id\":\"websocket-endpoints\"},{\"level\":3,\"text\":\"Global WebSocket\",\"id\":\"global-websocket\"},{\"level\":3,\"text\":\"Session-Scoped WebSocket\",\"id\":\"session-scoped-websocket\"},{\"level\":2,\"text\":\"Documentation Endpoints\",\"id\":\"documentation-endpoints\"},{\"level\":3,\"text\":\"AsyncAPI Specification\",\"id\":\"asyncapi-specification\"},{\"level\":3,\"text\":\"OpenAPI Specification\",\"id\":\"openapi-specification\"},{\"level\":3,\"text\":\"WebSocket Documentation\",\"id\":\"websocket-documentation\"},{\"level\":2,\"text\":\"Authentication\",\"id\":\"authentication\"},{\"level\":2,\"text\":\"Error Responses\",\"id\":\"error-responses\"},{\"level\":2,\"text\":\"Client Examples\",\"id\":\"client-examples\"},{\"level\":3,\"text\":\"cURL - Health Check\",\"id\":\"curl-health-check\"},{\"level\":3,\"text\":\"cURL - With Authentication\",\"id\":\"curl-with-authentication\"},{\"level\":3,\"text\":\"Kubernetes Probes\",\"id\":\"kubernetes-probes\"},{\"level\":2,\"text\":\"Next Steps\",\"id\":\"next-steps\"}]},\"slugKey\":\"guides/rest-api\"}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[6869,[],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"InputLayer - A symbolic reasoning engine for AI agents\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/icon.svg\"}],[\"$\",\"$L10\",\"3\",{}]]\n8:null\n"])</script></body></html>