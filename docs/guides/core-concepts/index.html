<!DOCTYPE html><!--05bjYGyiAumoEMBrfWHih--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/4bd7a24b7976d4e6.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js"/><script src="/_next/static/chunks/4bd1b696-deba172d32c79f82.js" async=""></script><script src="/_next/static/chunks/794-275dc9ebd3a29fbf.js" async=""></script><script src="/_next/static/chunks/main-app-1fa5b694e5d36a75.js" async=""></script><script src="/_next/static/chunks/app/layout-7e9963bf811be36b.js" async=""></script><script src="/_next/static/chunks/758-3cb69ce377cde046.js" async=""></script><script src="/_next/static/chunks/121-aece4f809b101dc1.js" async=""></script><script src="/_next/static/chunks/502-e809071f8789437b.js" async=""></script><script src="/_next/static/chunks/689-4fcf9680fdc90283.js" async=""></script><script src="/_next/static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js" async=""></script><meta name="next-size-adjust" content=""/><title>InputLayer - A symbolic reasoning engine for AI agents</title><meta name="description" content="Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system."/><link rel="icon" href="/icon.svg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_188709 __variable_9a8899 font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","dark",null,["light","dark"],null,true,true)</script><div class="flex flex-col h-dvh"><header class="sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"><div class="flex h-14 items-center px-6"><a class="mr-8" href="/"><span class="inline-flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg><span class="font-extrabold tracking-tight text-lg">InputLayer</span></span></a><nav class="hidden md:flex items-center gap-6 text-sm"><a class="text-muted-foreground transition-colors hover:text-foreground" href="/docs/">Docs</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/blog/">Blog</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/use-cases/">Use Cases</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/compare/">Compare</a><a href="https://demo.inputlayer.ai" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-muted-foreground transition-colors hover:text-foreground">Demo<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></nav><div class="ml-auto flex items-center gap-3"><div class="inline-flex items-center gap-1.5"><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-3.5 w-3.5"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg><span>Star</span></a><a href="https://github.com/inputlayer/inputlayer/fork" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-git-fork h-3.5 w-3.5"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg><span>Fork</span></a></div><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 h-9 w-9"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-4 w-4"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button><div class="md:hidden"><button class="inline-flex items-center justify-center rounded-md p-2 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></div></header><div class="flex flex-1 overflow-hidden"><div class="w-64 shrink-0 border-r border-border/50 overflow-y-auto"><div class="flex flex-col h-full"><div class="p-3 border-b border-border/50"><div class="relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><input type="text" placeholder="Search docs..." class="w-full h-8 pl-8 pr-3 text-sm rounded-md border border-border bg-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring" value=""/></div></div><nav class="flex-1 overflow-y-auto p-2 space-y-0.5"><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" href="/docs/index/">Overview</a><div data-state="open" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-foreground font-medium" style="padding-left:12px" type="button" aria-controls="radix-_R_j6av5ubtb_" aria-expanded="true" data-state="open" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform rotate-90"><path d="m9 18 6-6-6-6"></path></svg>Guides</button><div data-state="open" id="radix-_R_j6av5ubtb_" data-slot="collapsible-content"><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/quickstart/">Quick Start</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/installation/">Installation</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/first-program/">Your First Program</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors bg-primary/10 text-primary font-medium" style="padding-left:24px" href="/docs/guides/core-concepts/">Data Modeling</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/repl/">REPL Guide</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/recursion/">Recursion</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/vectors/">Vector Search</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/indexing/">Indexing</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/temporal/">Temporal Reasoning</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/persistence/">Persistence</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/configuration/">Configuration</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/rest-api/">REST API</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/python-sdk/">Python SDK</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/deployment/">Deployment</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/authentication/">Authentication</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/websocket-api/">WebSocket API</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/migrations/">Migrations</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/guides/troubleshooting/">Troubleshooting</a></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_r6av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Reference</button><div data-state="closed" id="radix-_R_r6av5ubtb_" hidden="" data-slot="collapsible-content"></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_136av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Specification</button><div data-state="closed" id="radix-_R_136av5ubtb_" hidden="" data-slot="collapsible-content"></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_1b6av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Internals</button><div data-state="closed" id="radix-_R_1b6av5ubtb_" hidden="" data-slot="collapsible-content"></div></div></nav></div></div><div class="flex flex-1 flex-col overflow-hidden"><div class="flex flex-1 overflow-hidden"><div class="flex-1 overflow-y-auto px-8 py-6 max-w-4xl mx-auto"><article class="docs-prose"><h1 id="data-modeling-guide" node="[object Object]">Data Modeling Guide</h1>
<p>Identity semantics, schema options, and update patterns.</p>
<h2 id="identity-model" node="[object Object]">Identity Model</h2>
<p>InputLayer uses <strong>pure multiset semantics</strong> by default, where the <strong>entire tuple is the identity</strong>. This is the native model for Differential Dataflow (DD).</p>
<h3 id="default-behavior-no-schema" node="[object Object]">Default Behavior (No Schema)</h3>
<p>Without an explicit schema, tuples are identified by all their values:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-number">30</span><span class="syn-punct">)</span>     <span class="syn-comment">// Insert tuple ("alice", 30)</span>
<span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-number">31</span><span class="syn-punct">)</span>     <span class="syn-comment">// Insert different tuple ("alice", 31)</span>
</code></pre>
<p>Both tuples coexist because they are different values. There is no concept of &quot;alice&quot; as an entity with a mutable &quot;age&quot; attribute.</p>
<h3 id="implications" node="[object Object]">Implications</h3>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Aspect</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Behavior</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]">Tuple identity</td><td class="border px-4 py-2" node="[object Object]">ALL columns (entire tuple)</td></tr><tr><td class="border px-4 py-2" node="[object Object]">Duplicate handling</td><td class="border px-4 py-2" node="[object Object]">Multiset - same tuple can exist multiple times</td></tr><tr><td class="border px-4 py-2" node="[object Object]">Updates</td><td class="border px-4 py-2" node="[object Object]">Must know all column values to delete</td></tr></tbody></table></div>
<h2 id="schema-declarations" node="[object Object]">Schema Declarations</h2>
<p>Schemas define the structure and constraints for relations.</p>
<h3 id="basic-schema" node="[object Object]">Basic Schema</h3>
<p>Declare a schema using typed arguments:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-identifier">id</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">,</span> <span class="syn-identifier">name</span><span class="syn-punct">:</span> <span class="syn-keyword">string</span><span class="syn-punct">,</span> <span class="syn-identifier">age</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">)</span>
</code></pre>
<h2 id="update-patterns" node="[object Object]">Update Patterns</h2>
<h3 id="pattern-1-exact-delete-know-all-values" node="[object Object]">Pattern 1: Exact Delete (Know All Values)</h3>
<p>When you know the exact tuple to delete:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">-</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-number">30</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-number">31</span><span class="syn-punct">)</span>
</code></pre>
<h3 id="pattern-2-conditional-delete-unknown-values" node="[object Object]">Pattern 2: Conditional Delete (Unknown Values)</h3>
<p>When you don&#x27;t know all column values, use a conditional delete:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Delete alice regardless of age</span>
<span class="syn-arith">-</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-variable">Age</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">person</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-variable">Age</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-number">31</span><span class="syn-punct">)</span>
</code></pre>
<h3 id="pattern-3-atomic-update" node="[object Object]">Pattern 3: Atomic Update</h3>
<p>Combine delete and insert in one atomic operation:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">-</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">OldAge</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">NewAge</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span>
  <span class="syn-body-id">person</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">OldAge</span><span class="syn-punct">)</span><span class="syn-punct">,</span>
  <span class="syn-variable">Name</span> <span class="syn-comparison">=</span> <span class="syn-string">"alice"</span><span class="syn-punct">,</span>
  <span class="syn-variable">NewAge</span> <span class="syn-comparison">=</span> <span class="syn-variable">OldAge</span> <span class="syn-arith">+</span> <span class="syn-number">1</span>
</code></pre>
<p>This executes at the same logical timestamp, ensuring atomicity.</p>
<h2 id="deletion-patterns" node="[object Object]">Deletion Patterns</h2>
<h3 id="delete-specific-tuple" node="[object Object]">Delete Specific Tuple</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">-</span><span class="syn-identifier">edge</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">2</span><span class="syn-punct">)</span>
</code></pre>
<h3 id="delete-all-matching-tuples" node="[object Object]">Delete All Matching Tuples</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Delete all edges from node 5</span>
<span class="syn-arith">-</span><span class="syn-identifier">edge</span><span class="syn-punct">(</span><span class="syn-number">5</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-number">5</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>

<span class="syn-comment">// Delete all high earners</span>
<span class="syn-arith">-</span><span class="syn-identifier">employee</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">Dept</span><span class="syn-punct">,</span> <span class="syn-variable">Salary</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span>
  <span class="syn-body-id">employee</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">Dept</span><span class="syn-punct">,</span> <span class="syn-variable">Salary</span><span class="syn-punct">)</span><span class="syn-punct">,</span>
  <span class="syn-variable">Salary</span> <span class="syn-comparison">&gt;</span> <span class="syn-number">100000</span>
</code></pre>
<h3 id="delete-a-rule" node="[object Object]">Delete a Rule</h3>
<p>To delete a persistent rule:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">-</span><span class="syn-identifier">reachable</span>
</code></pre>
<p>This drops the rule named <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">reachable</code>. To delete all facts from a relation, use a conditional delete:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">-</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">person</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span>  <span class="syn-comment">// Delete all tuples</span>
</code></pre>
<p>To drop a relation entirely (schema + data), use the meta command:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-meta">.rel</span> <span class="syn-identifier">drop</span> <span class="syn-identifier">person</span>
</code></pre>
<h2 id="schema-inference" node="[object Object]">Schema Inference</h2>
<p>When no schema is declared, it&#x27;s inferred from the first insert:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-number">30</span><span class="syn-punct">)</span>          <span class="syn-comment">// Inferred: person(string, int)</span>
<span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"bob"</span><span class="syn-punct">,</span> <span class="syn-number">25</span><span class="syn-punct">)</span>            <span class="syn-comment">// OK: matches inferred schema</span>
<span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-string">"charlie"</span><span class="syn-punct">,</span> <span class="syn-string">"young"</span><span class="syn-punct">)</span>   <span class="syn-comment">// ERROR: type mismatch (string vs int)</span>
</code></pre>
<h2 id="transient-vs-persistent" node="[object Object]">Transient vs Persistent</h2>
<h3 id="persistent-schema-object-object-prefix" node="[object Object]">Persistent Schema (<code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">+</code> prefix)</h3>
<p>Stored in the database catalog:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-identifier">id</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">,</span> <span class="syn-identifier">name</span><span class="syn-punct">:</span> <span class="syn-keyword">string</span><span class="syn-punct">,</span> <span class="syn-identifier">age</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">)</span>
</code></pre>
<h3 id="transient-schema-no-prefix" node="[object Object]">Transient Schema (no prefix)</h3>
<p>Session-only, cleared on database switch:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-identifier">temp</span><span class="syn-punct">(</span><span class="syn-identifier">x</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">,</span> <span class="syn-identifier">y</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">)</span>
<span class="syn-identifier">temp</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">2</span><span class="syn-punct">)</span>
<span class="syn-identifier">temp</span><span class="syn-punct">(</span><span class="syn-number">3</span><span class="syn-punct">,</span> <span class="syn-number">4</span><span class="syn-punct">)</span>
<span class="syn-comment">// Cleared when switching databases</span>
</code></pre>
<p>Use transient schemas for:</p>
<ul>
<li>REPL exploration with type safety</li>
<li>Temporary working data</li>
<li>Testing schema designs before persisting</li>
</ul>
<h2 id="rules-views" node="[object Object]">Rules (Views)</h2>
<h3 id="rule-identity" node="[object Object]">Rule Identity</h3>
<p>A <strong>view</strong> (derived relation) is identified by its <strong>head predicate name</strong>. A view contains one or more rules:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>                   <span class="syn-comment">// Creates view, adds rule 1</span>
<span class="syn-arith">+</span><span class="syn-identifier">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">Z</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>  <span class="syn-comment">// Adds rule 2 to same view</span>
</code></pre>
<h3 id="deleting-views" node="[object Object]">Deleting Views</h3>
<p>Delete an entire view with:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">-</span><span class="syn-identifier">reachable</span>
</code></pre>
<p>Individual rule clauses can be removed using <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.rule remove</code>:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-meta">.rule remove</span> <span class="syn-identifier">reachable</span> <span class="syn-number">1</span>   <span class="syn-comment">// Remove first clause of 'reachable' rule</span>
<span class="syn-meta">.rule drop</span> <span class="syn-identifier">reachable</span>       <span class="syn-comment">// Remove entire 'reachable' rule (all clauses)</span>
</code></pre>
<p>Or use file-based workflow:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-meta">.rule clear</span> <span class="syn-identifier">reachable</span>
<span class="syn-meta">.load</span> <span class="syn-identifier">views</span><span class="syn-arith">/</span><span class="syn-identifier">reachable</span><span class="syn-meta">.</span><span class="syn-identifier">idl</span>
</code></pre>
<h3 id="session-rules" node="[object Object]">Session Rules</h3>
<p>Rules without <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">+</code> are transient:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-identifier">temp</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">X</span> <span class="syn-comparison">&lt;</span> <span class="syn-variable">Y</span>
</code></pre>
<p>Session rules:</p>
<ul>
<li>Are not persisted</li>
<li>Are cleared on database switch</li>
<li>Support recursion (full fixed-point iteration)</li>
</ul>
<h2 id="file-based-workflow" node="[object Object]">File-Based Workflow</h2>
<p>For complex views with many rules, use <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.idl</code> script files:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// views/reachable.idl</span>
<span class="syn-arith">+</span><span class="syn-identifier">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">Z</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
</code></pre>
<h3 id="example-workflow" node="[object Object]">Example Workflow</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Initial load</span>
<span class="syn-meta">.load</span> <span class="syn-identifier">views</span><span class="syn-arith">/</span><span class="syn-identifier">access_control</span><span class="syn-meta">.</span><span class="syn-identifier">idl</span>

<span class="syn-comment">// After modifying the file, clear rules first then reload</span>
<span class="syn-meta">.rule clear</span> <span class="syn-identifier">access_control</span>
<span class="syn-meta">.load</span> <span class="syn-identifier">views</span><span class="syn-arith">/</span><span class="syn-identifier">access_control</span><span class="syn-meta">.</span><span class="syn-identifier">idl</span>
</code></pre>
<h2 id="best-practices" node="[object Object]">Best Practices</h2>
<h3 id="1-use-explicit-schemas" node="[object Object]">1. Use Explicit Schemas</h3>
<p>Explicit schemas catch type errors early:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">employee</span><span class="syn-punct">(</span><span class="syn-identifier">id</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">,</span> <span class="syn-identifier">name</span><span class="syn-punct">:</span> <span class="syn-keyword">string</span><span class="syn-punct">,</span> <span class="syn-identifier">salary</span><span class="syn-punct">:</span> <span class="syn-keyword">float</span><span class="syn-punct">)</span>
</code></pre>
<h3 id="2-use-conditional-deletes-for-unknown-values" node="[object Object]">2. Use Conditional Deletes for Unknown Values</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Update all employees in a department</span>
<span class="syn-arith">-</span><span class="syn-identifier">employee</span><span class="syn-punct">(</span><span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-variable">OldDept</span><span class="syn-punct">,</span> <span class="syn-variable">Name</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-arith">+</span><span class="syn-identifier">employee</span><span class="syn-punct">(</span><span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-string">"Engineering"</span><span class="syn-punct">,</span> <span class="syn-variable">Name</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span>
  <span class="syn-body-id">employee</span><span class="syn-punct">(</span><span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-variable">OldDept</span><span class="syn-punct">,</span> <span class="syn-variable">Name</span><span class="syn-punct">)</span><span class="syn-punct">,</span>
  <span class="syn-variable">OldDept</span> <span class="syn-comparison">=</span> <span class="syn-string">"Legacy"</span>
</code></pre>
<h3 id="3-use-file-based-workflow-for-complex-rules" node="[object Object]">3. Use File-Based Workflow for Complex Rules</h3>
<p>Keep rule definitions in version-controlled files:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">views/
  access_control.idl
  graph_analysis.idl
  reporting.idl
</code></pre>
<h3 id="4-use-persistent-rules-for-automatic-materialization" node="[object Object]">4. Use Persistent Rules for Automatic Materialization</h3>
<p>Persistent rules are automatically materialized and updated when base data changes:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Session rules compute fresh each query:</span>
<span class="syn-identifier">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
<span class="syn-identifier">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">Z</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>

<span class="syn-comment">// Persistent rules materialize and cache results:</span>
<span class="syn-arith">+</span><span class="syn-identifier">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">reachable</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">Z</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
</code></pre>
<p>Both session and persistent rules support full recursion with fixed-point iteration.</p></article></div><div class="hidden lg:block w-48 shrink-0 border-l border-border/50"><div class="sticky top-0 p-4"><p class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">On this page</p><nav class="space-y-1"><a href="#identity-model" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Identity Model</a><a href="#default-behavior-no-schema" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Default Behavior (No Schema)</a><a href="#implications" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Implications</a><a href="#schema-declarations" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Schema Declarations</a><a href="#basic-schema" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Basic Schema</a><a href="#update-patterns" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Update Patterns</a><a href="#pattern-1-exact-delete-know-all-values" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Pattern 1: Exact Delete (Know All Values)</a><a href="#pattern-2-conditional-delete-unknown-values" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Pattern 2: Conditional Delete (Unknown Values)</a><a href="#pattern-3-atomic-update" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Pattern 3: Atomic Update</a><a href="#deletion-patterns" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Deletion Patterns</a><a href="#delete-specific-tuple" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Delete Specific Tuple</a><a href="#delete-all-matching-tuples" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Delete All Matching Tuples</a><a href="#delete-a-rule" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Delete a Rule</a><a href="#schema-inference" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Schema Inference</a><a href="#transient-vs-persistent" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Transient vs Persistent</a><a href="#persistent-schema-prefix" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Persistent Schema (+ prefix)</a><a href="#transient-schema-no-prefix" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Transient Schema (no prefix)</a><a href="#rules-views" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Rules (Views)</a><a href="#rule-identity" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Rule Identity</a><a href="#deleting-views" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Deleting Views</a><a href="#session-rules" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Session Rules</a><a href="#file-based-workflow" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">File-Based Workflow</a><a href="#example-workflow" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Example Workflow</a><a href="#best-practices" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Best Practices</a><a href="#1-use-explicit-schemas" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">1. Use Explicit Schemas</a><a href="#2-use-conditional-deletes-for-unknown-values" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">2. Use Conditional Deletes for Unknown Values</a><a href="#3-use-file-based-workflow-for-complex-rules" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">3. Use File-Based Workflow for Complex Rules</a><a href="#4-use-persistent-rules-for-automatic-materialization" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">4. Use Persistent Rules for Automatic Materialization</a></nav></div></div></div></div></div></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1942,[\"177\",\"static/chunks/app/layout-7e9963bf811be36b.js\"],\"ThemeProvider\"]\n3:I[7121,[],\"\"]\n4:I[4581,[],\"\"]\n6:I[484,[],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[484,[],\"ViewportBoundary\"]\nb:I[484,[],\"MetadataBoundary\"]\nd:I[7123,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/4bd7a24b7976d4e6.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"05bjYGyiAumoEMBrfWHih\",\"c\":[\"\",\"docs\",\"guides\",\"core-concepts\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"guides/core-concepts\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4bd7a24b7976d4e6.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_188709 __variable_9a8899 font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:I[8428,[\"758\",\"static/chunks/758-3cb69ce377cde046.js\",\"121\",\"static/chunks/121-aece4f809b101dc1.js\",\"502\",\"static/chunks/502-e809071f8789437b.js\",\"689\",\"static/chunks/689-4fcf9680fdc90283.js\",\"870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js\"],\"DocsPageClient\"]\nf:T15a3,"])</script><script>self.__next_f.push([1,"# Data Modeling Guide\n\nIdentity semantics, schema options, and update patterns.\n\n## Identity Model\n\nInputLayer uses **pure multiset semantics** by default, where the **entire tuple is the identity**. This is the native model for Differential Dataflow (DD).\n\n### Default Behavior (No Schema)\n\nWithout an explicit schema, tuples are identified by all their values:\n\n```datalog\n+person(\"alice\", 30)     // Insert tuple (\"alice\", 30)\n+person(\"alice\", 31)     // Insert different tuple (\"alice\", 31)\n```\n\nBoth tuples coexist because they are different values. There is no concept of \"alice\" as an entity with a mutable \"age\" attribute.\n\n### Implications\n\n| Aspect | Behavior |\n|--------|----------|\n| Tuple identity | ALL columns (entire tuple) |\n| Duplicate handling | Multiset - same tuple can exist multiple times |\n| Updates | Must know all column values to delete |\n\n## Schema Declarations\n\nSchemas define the structure and constraints for relations.\n\n### Basic Schema\n\nDeclare a schema using typed arguments:\n\n```datalog\n+person(id: int, name: string, age: int)\n```\n\n## Update Patterns\n\n### Pattern 1: Exact Delete (Know All Values)\n\nWhen you know the exact tuple to delete:\n\n```datalog\n-person(\"alice\", 30)\n+person(\"alice\", 31)\n```\n\n### Pattern 2: Conditional Delete (Unknown Values)\n\nWhen you don't know all column values, use a conditional delete:\n\n```datalog\n// Delete alice regardless of age\n-person(\"alice\", Age) \u003c- person(\"alice\", Age)\n+person(\"alice\", 31)\n```\n\n### Pattern 3: Atomic Update\n\nCombine delete and insert in one atomic operation:\n\n```datalog\n-person(Name, OldAge), +person(Name, NewAge) \u003c-\n  person(Name, OldAge),\n  Name = \"alice\",\n  NewAge = OldAge + 1\n```\n\nThis executes at the same logical timestamp, ensuring atomicity.\n\n## Deletion Patterns\n\n### Delete Specific Tuple\n\n```datalog\n-edge(1, 2)\n```\n\n### Delete All Matching Tuples\n\n```datalog\n// Delete all edges from node 5\n-edge(5, Y) \u003c- edge(5, Y)\n\n// Delete all high earners\n-employee(Name, Dept, Salary) \u003c-\n  employee(Name, Dept, Salary),\n  Salary \u003e 100000\n```\n\n### Delete a Rule\n\nTo delete a persistent rule:\n\n```datalog\n-reachable\n```\n\nThis drops the rule named `reachable`. To delete all facts from a relation, use a conditional delete:\n\n```datalog\n-person(X, Y, Z) \u003c- person(X, Y, Z)  // Delete all tuples\n```\n\nTo drop a relation entirely (schema + data), use the meta command:\n\n```datalog\n.rel drop person\n```\n\n## Schema Inference\n\nWhen no schema is declared, it's inferred from the first insert:\n\n```datalog\n+person(\"alice\", 30)          // Inferred: person(string, int)\n+person(\"bob\", 25)            // OK: matches inferred schema\n+person(\"charlie\", \"young\")   // ERROR: type mismatch (string vs int)\n```\n\n## Transient vs Persistent\n\n### Persistent Schema (`+` prefix)\n\nStored in the database catalog:\n\n```datalog\n+person(id: int, name: string, age: int)\n```\n\n### Transient Schema (no prefix)\n\nSession-only, cleared on database switch:\n\n```datalog\ntemp(x: int, y: int)\ntemp(1, 2)\ntemp(3, 4)\n// Cleared when switching databases\n```\n\nUse transient schemas for:\n- REPL exploration with type safety\n- Temporary working data\n- Testing schema designs before persisting\n\n## Rules (Views)\n\n### Rule Identity\n\nA **view** (derived relation) is identified by its **head predicate name**. A view contains one or more rules:\n\n```datalog\n+reachable(X, Y) \u003c- edge(X, Y)                   // Creates view, adds rule 1\n+reachable(X, Y) \u003c- reachable(X, Z), edge(Z, Y)  // Adds rule 2 to same view\n```\n\n### Deleting Views\n\nDelete an entire view with:\n\n```datalog\n-reachable\n```\n\nIndividual rule clauses can be removed using `.rule remove`:\n\n```datalog\n.rule remove reachable 1   // Remove first clause of 'reachable' rule\n.rule drop reachable       // Remove entire 'reachable' rule (all clauses)\n```\n\nOr use file-based workflow:\n\n```datalog\n.rule clear reachable\n.load views/reachable.idl\n```\n\n### Session Rules\n\nRules without `+` are transient:\n\n```datalog\ntemp(X, Y) \u003c- edge(X, Y), X \u003c Y\n```\n\nSession rules:\n- Are not persisted\n- Are cleared on database switch\n- Support recursion (full fixed-point iteration)\n\n## File-Based Workflow\n\nFor complex views with many rules, use `.idl` script files:\n\n```datalog\n// views/reachable.idl\n+reachable(X, Y) \u003c- edge(X, Y)\n+reachable(X, Y) \u003c- reachable(X, Z), edge(Z, Y)\n```\n\n### Example Workflow\n\n```datalog\n// Initial load\n.load views/access_control.idl\n\n// After modifying the file, clear rules first then reload\n.rule clear access_control\n.load views/access_control.idl\n```\n\n## Best Practices\n\n### 1. Use Explicit Schemas\n\nExplicit schemas catch type errors early:\n\n```datalog\n+employee(id: int, name: string, salary: float)\n```\n\n### 2. Use Conditional Deletes for Unknown Values\n\n```datalog\n// Update all employees in a department\n-employee(Id, OldDept, Name), +employee(Id, \"Engineering\", Name) \u003c-\n  employee(Id, OldDept, Name),\n  OldDept = \"Legacy\"\n```\n\n### 3. Use File-Based Workflow for Complex Rules\n\nKeep rule definitions in version-controlled files:\n\n```\nviews/\n  access_control.idl\n  graph_analysis.idl\n  reporting.idl\n```\n\n### 4. Use Persistent Rules for Automatic Materialization\n\nPersistent rules are automatically materialized and updated when base data changes:\n\n```datalog\n// Session rules compute fresh each query:\nreachable(X, Y) \u003c- edge(X, Y)\nreachable(X, Y) \u003c- reachable(X, Z), edge(Z, Y)\n\n// Persistent rules materialize and cache results:\n+reachable(X, Y) \u003c- edge(X, Y)\n+reachable(X, Y) \u003c- reachable(X, Z), edge(Z, Y)\n```\n\nBoth session and persistent rules support full recursion with fixed-point iteration."])</script><script>self.__next_f.push([1,"5:[\"$\",\"$Le\",null,{\"page\":{\"title\":\"Data Modeling Guide\",\"content\":\"$f\",\"toc\":[{\"level\":2,\"text\":\"Identity Model\",\"id\":\"identity-model\"},{\"level\":3,\"text\":\"Default Behavior (No Schema)\",\"id\":\"default-behavior-no-schema\"},{\"level\":3,\"text\":\"Implications\",\"id\":\"implications\"},{\"level\":2,\"text\":\"Schema Declarations\",\"id\":\"schema-declarations\"},{\"level\":3,\"text\":\"Basic Schema\",\"id\":\"basic-schema\"},{\"level\":2,\"text\":\"Update Patterns\",\"id\":\"update-patterns\"},{\"level\":3,\"text\":\"Pattern 1: Exact Delete (Know All Values)\",\"id\":\"pattern-1-exact-delete-know-all-values\"},{\"level\":3,\"text\":\"Pattern 2: Conditional Delete (Unknown Values)\",\"id\":\"pattern-2-conditional-delete-unknown-values\"},{\"level\":3,\"text\":\"Pattern 3: Atomic Update\",\"id\":\"pattern-3-atomic-update\"},{\"level\":2,\"text\":\"Deletion Patterns\",\"id\":\"deletion-patterns\"},{\"level\":3,\"text\":\"Delete Specific Tuple\",\"id\":\"delete-specific-tuple\"},{\"level\":3,\"text\":\"Delete All Matching Tuples\",\"id\":\"delete-all-matching-tuples\"},{\"level\":3,\"text\":\"Delete a Rule\",\"id\":\"delete-a-rule\"},{\"level\":2,\"text\":\"Schema Inference\",\"id\":\"schema-inference\"},{\"level\":2,\"text\":\"Transient vs Persistent\",\"id\":\"transient-vs-persistent\"},{\"level\":3,\"text\":\"Persistent Schema (+ prefix)\",\"id\":\"persistent-schema-prefix\"},{\"level\":3,\"text\":\"Transient Schema (no prefix)\",\"id\":\"transient-schema-no-prefix\"},{\"level\":2,\"text\":\"Rules (Views)\",\"id\":\"rules-views\"},{\"level\":3,\"text\":\"Rule Identity\",\"id\":\"rule-identity\"},{\"level\":3,\"text\":\"Deleting Views\",\"id\":\"deleting-views\"},{\"level\":3,\"text\":\"Session Rules\",\"id\":\"session-rules\"},{\"level\":2,\"text\":\"File-Based Workflow\",\"id\":\"file-based-workflow\"},{\"level\":3,\"text\":\"Example Workflow\",\"id\":\"example-workflow\"},{\"level\":2,\"text\":\"Best Practices\",\"id\":\"best-practices\"},{\"level\":3,\"text\":\"1. Use Explicit Schemas\",\"id\":\"1-use-explicit-schemas\"},{\"level\":3,\"text\":\"2. Use Conditional Deletes for Unknown Values\",\"id\":\"2-use-conditional-deletes-for-unknown-values\"},{\"level\":3,\"text\":\"3. Use File-Based Workflow for Complex Rules\",\"id\":\"3-use-file-based-workflow-for-complex-rules\"},{\"level\":3,\"text\":\"4. Use Persistent Rules for Automatic Materialization\",\"id\":\"4-use-persistent-rules-for-automatic-materialization\"}]},\"slugKey\":\"guides/core-concepts\"}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[6869,[],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"InputLayer - A symbolic reasoning engine for AI agents\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/icon.svg\"}],[\"$\",\"$L10\",\"3\",{}]]\n8:null\n"])</script></body></html>