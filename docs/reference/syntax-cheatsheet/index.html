<!DOCTYPE html><!--05bjYGyiAumoEMBrfWHih--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/4bd7a24b7976d4e6.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js"/><script src="/_next/static/chunks/4bd1b696-deba172d32c79f82.js" async=""></script><script src="/_next/static/chunks/794-275dc9ebd3a29fbf.js" async=""></script><script src="/_next/static/chunks/main-app-1fa5b694e5d36a75.js" async=""></script><script src="/_next/static/chunks/app/layout-7e9963bf811be36b.js" async=""></script><script src="/_next/static/chunks/758-3cb69ce377cde046.js" async=""></script><script src="/_next/static/chunks/121-aece4f809b101dc1.js" async=""></script><script src="/_next/static/chunks/502-e809071f8789437b.js" async=""></script><script src="/_next/static/chunks/689-4fcf9680fdc90283.js" async=""></script><script src="/_next/static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js" async=""></script><meta name="next-size-adjust" content=""/><title>InputLayer - A symbolic reasoning engine for AI agents</title><meta name="description" content="Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system."/><link rel="icon" href="/icon.svg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_188709 __variable_9a8899 font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","dark",null,["light","dark"],null,true,true)</script><div class="flex flex-col h-dvh"><header class="sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"><div class="flex h-14 items-center px-6"><a class="mr-8" href="/"><span class="inline-flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg><span class="font-extrabold tracking-tight text-lg">InputLayer</span></span></a><nav class="hidden md:flex items-center gap-6 text-sm"><a class="text-muted-foreground transition-colors hover:text-foreground" href="/docs/">Docs</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/blog/">Blog</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/use-cases/">Use Cases</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/compare/">Compare</a><a href="https://demo.inputlayer.ai" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-muted-foreground transition-colors hover:text-foreground">Demo<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></nav><div class="ml-auto flex items-center gap-3"><div class="inline-flex items-center gap-1.5"><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-3.5 w-3.5"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg><span>Star</span></a><a href="https://github.com/inputlayer/inputlayer/fork" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-git-fork h-3.5 w-3.5"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg><span>Fork</span></a></div><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 h-9 w-9"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-4 w-4"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button><div class="md:hidden"><button class="inline-flex items-center justify-center rounded-md p-2 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></div></header><div class="flex flex-1 overflow-hidden"><div class="w-64 shrink-0 border-r border-border/50 overflow-y-auto"><div class="flex flex-col h-full"><div class="p-3 border-b border-border/50"><div class="relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg><input type="text" placeholder="Search docs..." class="w-full h-8 pl-8 pr-3 text-sm rounded-md border border-border bg-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring" value=""/></div></div><nav class="flex-1 overflow-y-auto p-2 space-y-0.5"><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" href="/docs/index/">Overview</a><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_j6av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Guides</button><div data-state="closed" id="radix-_R_j6av5ubtb_" hidden="" data-slot="collapsible-content"></div></div><div data-state="open" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-foreground font-medium" style="padding-left:12px" type="button" aria-controls="radix-_R_r6av5ubtb_" aria-expanded="true" data-state="open" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform rotate-90"><path d="m9 18 6-6-6-6"></path></svg>Reference</button><div data-state="open" id="radix-_R_r6av5ubtb_" data-slot="collapsible-content"><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/reference/index/">Overview</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/reference/commands/">Commands</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/reference/functions/">Functions</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/reference/syntax/">Syntax</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors bg-primary/10 text-primary font-medium" style="padding-left:24px" href="/docs/reference/syntax-cheatsheet/">Syntax Cheatsheet</a><a class="block py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:24px" href="/docs/reference/aggregations/">Aggregations</a></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_136av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Specification</button><div data-state="closed" id="radix-_R_136av5ubtb_" hidden="" data-slot="collapsible-content"></div></div><div data-state="closed" data-slot="collapsible"><button class="w-full flex items-center w-full py-1.5 px-3 text-sm rounded-md transition-colors text-muted-foreground hover:bg-muted hover:text-foreground" style="padding-left:12px" type="button" aria-controls="radix-_R_1b6av5ubtb_" aria-expanded="false" data-state="closed" data-slot="collapsible-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-3.5 w-3.5 mr-1 shrink-0 transition-transform"><path d="m9 18 6-6-6-6"></path></svg>Internals</button><div data-state="closed" id="radix-_R_1b6av5ubtb_" hidden="" data-slot="collapsible-content"></div></div></nav></div></div><div class="flex flex-1 flex-col overflow-hidden"><div class="flex flex-1 overflow-hidden"><div class="flex-1 overflow-y-auto px-8 py-6 max-w-4xl mx-auto"><article class="docs-prose"><h1 id="inputlayer-syntax-cheatsheet" node="[object Object]">InputLayer Syntax Cheatsheet</h1>
<p>A unified syntax for InputLayer, designed for intuitive data manipulation and querying.</p>
<h2 id="quick-reference" node="[object Object]">Quick Reference</h2>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Operator</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Meaning</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Persisted</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">DD Semantics</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">+</code></td><td class="border px-4 py-2" node="[object Object]">Insert fact or persistent rule</td><td class="border px-4 py-2" node="[object Object]">Yes</td><td class="border px-4 py-2" node="[object Object]">diff = +1</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">-</code></td><td class="border px-4 py-2" node="[object Object]">Delete fact or drop rule</td><td class="border px-4 py-2" node="[object Object]">Yes</td><td class="border px-4 py-2" node="[object Object]">diff = -1</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">&lt;-</code> (no <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">+</code>)</td><td class="border px-4 py-2" node="[object Object]">Session rule (transient)</td><td class="border px-4 py-2" node="[object Object]">No</td><td class="border px-4 py-2" node="[object Object]">Ad-hoc computation</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">?</code></td><td class="border px-4 py-2" node="[object Object]">Query</td><td class="border px-4 py-2" node="[object Object]">No</td><td class="border px-4 py-2" node="[object Object]">Ad-hoc query</td></tr></tbody></table></div>
<h2 id="key-terminology" node="[object Object]">Key Terminology</h2>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Term</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Description</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]"><strong>Fact</strong></td><td class="border px-4 py-2" node="[object Object]">Base data stored in a relation (e.g., <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">+edge(1, 2)</code>)</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><strong>Rule</strong></td><td class="border px-4 py-2" node="[object Object]">Derived relation defined by a rule (persistent)</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><strong>Session Rule</strong></td><td class="border px-4 py-2" node="[object Object]">Transient rule that exists only for current session</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><strong>Schema</strong></td><td class="border px-4 py-2" node="[object Object]">Type definition for a relation&#x27;s columns</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><strong>Query</strong></td><td class="border px-4 py-2" node="[object Object]">One-shot question against facts and rules</td></tr><tr><td class="border px-4 py-2" node="[object Object]"><strong>Knowledge Graph</strong></td><td class="border px-4 py-2" node="[object Object]">Isolated namespace containing relations, rules, and indexes</td></tr></tbody></table></div>
<h2 id="meta-commands" node="[object Object]">Meta Commands</h2>
<p>Meta commands start with <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.</code> and control the system:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.kg                  Show current knowledge graph
.kg list             List all knowledge graphs
.kg create &lt;name&gt;    Create knowledge graph
.kg use &lt;name&gt;       Switch to knowledge graph
.kg drop &lt;name&gt;      Drop knowledge graph (cannot drop current)

.rel                 List relations (base facts)
.rel &lt;name&gt;          Describe relation schema
.rel drop &lt;name&gt;     Drop a relation and its data

.rule                List persistent rules
.rule &lt;name&gt;         Query rule (show computed data)
.rule def &lt;name&gt;     Show rule definition
.rule drop &lt;name&gt;    Drop all clauses of a rule
.rule remove &lt;name&gt; &lt;n&gt;  Remove clause #n from rule (1-based)
.rule clear &lt;name&gt;   Clear all clauses for re-registration

.session             List session rules
.session clear       Clear all session rules
.session drop &lt;n&gt;    Remove session rule #n

.index               List all indexes
.index list          List all indexes (explicit)
.index create &lt;name&gt; on &lt;relation&gt;(&lt;column&gt;) [options]
.index drop &lt;name&gt;   Drop an index
.index stats &lt;name&gt;  Show index statistics
.index rebuild &lt;name&gt;  Rebuild an index

.load &lt;file&gt;         Load and execute a .idl file

.user list           List all users
.user create &lt;name&gt; &lt;password&gt; &lt;role&gt;  Create user
.user drop &lt;name&gt;    Delete user
.user password &lt;name&gt; &lt;password&gt;       Change password
.user role &lt;name&gt; &lt;role&gt;               Change role

.apikey create &lt;label&gt;   Create API key
.apikey list             List API keys
.apikey revoke &lt;label&gt;   Revoke API key

.kg acl list [&lt;kg&gt;]              List ACLs
.kg acl grant &lt;kg&gt; &lt;user&gt; &lt;role&gt; Grant access
.kg acl revoke &lt;kg&gt; &lt;user&gt;       Revoke access

.explain &lt;query&gt;     Show query plan without executing
.compact             Compact WAL and consolidate batch files
.status              Show system status
.help                Show this help
.quit                Exit client
</code></pre>
<h3 id="index-creation-options" node="[object Object]">Index Creation Options</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index create vec_idx on docs(embedding) type hnsw metric cosine m 16 ef_construction 200
</code></pre>
<p>Options: <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">type &lt;hnsw&gt;</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">metric &lt;cosine|euclidean|dot_product|manhattan&gt;</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">m &lt;N&gt;</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">ef_construction &lt;N&gt;</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">ef_search &lt;N&gt;</code></p>
<p><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.idx</code> is an alias for <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">.index</code>.</p>
<h2 id="data-manipulation" node="[object Object]">Data Manipulation</h2>
<h3 id="insert-facts-object-object" node="[object Object]">Insert Facts (<code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">+</code>)</h3>
<p>Single fact:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">edge</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">2</span><span class="syn-punct">)</span>
</code></pre>
<p>Bulk insert:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">edge</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">2</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-number">2</span><span class="syn-punct">,</span> <span class="syn-number">3</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-number">3</span><span class="syn-punct">,</span> <span class="syn-number">4</span><span class="syn-punct">)</span><span class="syn-punct">]</span>
</code></pre>
<h3 id="delete-facts-object-object" node="[object Object]">Delete Facts (<code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">-</code>)</h3>
<p>Single fact:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">-</span><span class="syn-identifier">edge</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">2</span><span class="syn-punct">)</span>
</code></pre>
<p>Conditional delete (query-based):</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">-</span><span class="syn-identifier">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">X</span> <span class="syn-comparison">&gt;</span> <span class="syn-number">5</span>
</code></pre>
<h3 id="updates-delete-then-insert" node="[object Object]">Updates (Delete then Insert)</h3>
<p>To update data, delete the old value then insert the new:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Delete old value</span>
<span class="syn-arith">-</span><span class="syn-identifier">counter</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">0</span><span class="syn-punct">)</span>
<span class="syn-comment">// Insert new value</span>
<span class="syn-arith">+</span><span class="syn-identifier">counter</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">5</span><span class="syn-punct">)</span>
</code></pre>
<h2 id="persistent-rules-object-object" node="[object Object]">Persistent Rules (<code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">+head &lt;- body</code>)</h2>
<p>Persistent rules are saved to disk and incrementally maintained by Differential Dataflow.</p>
<p>Simple rule:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">path</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
</code></pre>
<p>Recursive rule (transitive closure):</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">path</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">path</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">path</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">Y</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span>
</code></pre>
<p>Rule with filter:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">adult</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">Age</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">person</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">Age</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">Age</span> <span class="syn-comparison">&gt;=</span> <span class="syn-number">18</span>
</code></pre>
<p>Rule with computed head variable:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">doubled</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">nums</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span> <span class="syn-comparison">=</span> <span class="syn-variable">X</span> <span class="syn-arith">*</span> <span class="syn-number">2</span>
</code></pre>
<p>Rules are saved to <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">{kg_dir}/rules/catalog.json</code> and automatically loaded on knowledge graph startup.</p>
<h2 id="session-rules-object-object" node="[object Object]">Session Rules (<code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">&lt;-</code>)</h2>
<p>Session rules are executed immediately but not persisted. They&#x27;re useful for ad-hoc analysis:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-identifier">result</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">edge</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">X</span> <span class="syn-comparison">&lt;</span> <span class="syn-variable">Y</span>
</code></pre>
<p>Session rules can reference persistent rules:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-identifier">reachable_from_one</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">path</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-variable">X</span><span class="syn-punct">)</span>
</code></pre>
<p>Multiple session rules accumulate and evaluate together:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-identifier">foo</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">bar</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
<span class="syn-identifier">foo</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">foo</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">foo</span><span class="syn-punct">(</span><span class="syn-variable">Y</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span>  <span class="syn-comment">// Adds to previous rule</span>
</code></pre>
<h2 id="queries-object-object" node="[object Object]">Queries (<code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">?</code>)</h2>
<p>Query a relation or rule:</p>
<p>Simple query:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-query">?</span> <span class="syn-identifier">edge</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-variable">X</span><span class="syn-punct">)</span>
</code></pre>
<p>Query with constraints:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-query">?</span> <span class="syn-identifier">person</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">Age</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">Age</span> <span class="syn-comparison">&gt;</span> <span class="syn-number">30</span>
</code></pre>
<p>Query a derived relation:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-query">?</span> <span class="syn-identifier">path</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-variable">X</span><span class="syn-punct">)</span>
</code></pre>
<h2 id="schema-declarations" node="[object Object]">Schema Declarations</h2>
<p>Define typed relations:</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">employee</span><span class="syn-punct">(</span><span class="syn-identifier">id</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">,</span> <span class="syn-identifier">name</span><span class="syn-punct">:</span> <span class="syn-keyword">string</span><span class="syn-punct">,</span> <span class="syn-identifier">dept_id</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">user</span><span class="syn-punct">(</span><span class="syn-identifier">id</span><span class="syn-punct">:</span> <span class="syn-keyword">int</span><span class="syn-punct">,</span> <span class="syn-identifier">email</span><span class="syn-punct">:</span> <span class="syn-keyword">string</span><span class="syn-punct">,</span> <span class="syn-identifier">name</span><span class="syn-punct">:</span> <span class="syn-keyword">string</span><span class="syn-punct">)</span>
</code></pre>
<h2 id="aggregations" node="[object Object]">Aggregations</h2>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">total_sales</span><span class="syn-punct">(</span><span class="syn-variable">Dept</span><span class="syn-punct">,</span> <span class="syn-aggregate">sum</span><span class="syn-comparison">&lt;</span><span class="syn-variable">Amount</span><span class="syn-comparison">&gt;</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">sales</span><span class="syn-punct">(</span><span class="syn-variable">Dept</span><span class="syn-punct">,</span> <span class="syn-variable">_</span><span class="syn-punct">,</span> <span class="syn-variable">Amount</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">employee_count</span><span class="syn-punct">(</span><span class="syn-variable">Dept</span><span class="syn-punct">,</span> <span class="syn-aggregate">count</span><span class="syn-comparison">&lt;</span><span class="syn-variable">Id</span><span class="syn-comparison">&gt;</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">employee</span><span class="syn-punct">(</span><span class="syn-variable">Id</span><span class="syn-punct">,</span> <span class="syn-variable">_</span><span class="syn-punct">,</span> <span class="syn-variable">Dept</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">max_salary</span><span class="syn-punct">(</span><span class="syn-variable">Dept</span><span class="syn-punct">,</span> <span class="syn-aggregate">max</span><span class="syn-comparison">&lt;</span><span class="syn-variable">Salary</span><span class="syn-comparison">&gt;</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">employee</span><span class="syn-punct">(</span><span class="syn-variable">_</span><span class="syn-punct">,</span> <span class="syn-variable">Salary</span><span class="syn-punct">,</span> <span class="syn-variable">Dept</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">min_age</span><span class="syn-punct">(</span><span class="syn-aggregate">min</span><span class="syn-comparison">&lt;</span><span class="syn-variable">Age</span><span class="syn-comparison">&gt;</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">person</span><span class="syn-punct">(</span><span class="syn-variable">_</span><span class="syn-punct">,</span> <span class="syn-variable">Age</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">avg_score</span><span class="syn-punct">(</span><span class="syn-aggregate">avg</span><span class="syn-comparison">&lt;</span><span class="syn-variable">Score</span><span class="syn-comparison">&gt;</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">test_results</span><span class="syn-punct">(</span><span class="syn-variable">_</span><span class="syn-punct">,</span> <span class="syn-variable">Score</span><span class="syn-punct">)</span>
</code></pre>
<p>Supported aggregates: <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">count</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">sum</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">min</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">max</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">avg</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">count_distinct</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">top_k</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">top_k_threshold</code>.</p>
<h3 id="topk-example" node="[object Object]">TopK Example</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-arith">+</span><span class="syn-identifier">top_scores</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-aggregate">top_k</span><span class="syn-comparison">&lt;</span><span class="syn-number">3</span><span class="syn-punct">,</span> <span class="syn-variable">Score</span><span class="syn-punct">,</span> <span class="syn-identifier">desc</span><span class="syn-comparison">&gt;</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">scores</span><span class="syn-punct">(</span><span class="syn-variable">Name</span><span class="syn-punct">,</span> <span class="syn-variable">Score</span><span class="syn-punct">)</span>
</code></pre>
<h2 id="builtin-functions" node="[object Object]">Builtin Functions</h2>
<h3 id="distance-functions" node="[object Object]">Distance Functions</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-variable">Dist</span> <span class="syn-comparison">=</span> <span class="syn-builtin">euclidean</span><span class="syn-punct">(</span><span class="syn-variable">V1</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span>    <span class="syn-comment">// Euclidean (L2) distance</span>
<span class="syn-variable">Dist</span> <span class="syn-comparison">=</span> <span class="syn-builtin">cosine</span><span class="syn-punct">(</span><span class="syn-variable">V1</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span>       <span class="syn-comment">// Cosine distance (1 - similarity)</span>
<span class="syn-variable">Score</span> <span class="syn-comparison">=</span> <span class="syn-builtin">dot</span><span class="syn-punct">(</span><span class="syn-variable">V1</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span>         <span class="syn-comment">// Dot product</span>
<span class="syn-variable">Dist</span> <span class="syn-comparison">=</span> <span class="syn-builtin">manhattan</span><span class="syn-punct">(</span><span class="syn-variable">V1</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span>    <span class="syn-comment">// Manhattan (L1) distance</span>
</code></pre>
<h3 id="vector-operations" node="[object Object]">Vector Operations</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-variable">NormV</span> <span class="syn-comparison">=</span> <span class="syn-builtin">normalize</span><span class="syn-punct">(</span><span class="syn-variable">V</span><span class="syn-punct">)</span>        <span class="syn-comment">// Unit vector</span>
<span class="syn-variable">Dim</span> <span class="syn-comparison">=</span> <span class="syn-builtin">vec_dim</span><span class="syn-punct">(</span><span class="syn-variable">V</span><span class="syn-punct">)</span>            <span class="syn-comment">// Vector dimension</span>
<span class="syn-variable">Sum</span> <span class="syn-comparison">=</span> <span class="syn-builtin">vec_add</span><span class="syn-punct">(</span><span class="syn-variable">V1</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span>       <span class="syn-comment">// Element-wise addition</span>
<span class="syn-variable">Scaled</span> <span class="syn-comparison">=</span> <span class="syn-builtin">vec_scale</span><span class="syn-punct">(</span><span class="syn-variable">V</span><span class="syn-punct">,</span> <span class="syn-variable">S</span><span class="syn-punct">)</span>    <span class="syn-comment">// Scalar multiplication</span>
</code></pre>
<h3 id="math-functions" node="[object Object]">Math Functions</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-variable">A</span> <span class="syn-comparison">=</span> <span class="syn-builtin">abs</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                  <span class="syn-comment">// Absolute value</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">sqrt</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                 <span class="syn-comment">// Square root</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">pow</span><span class="syn-punct">(</span><span class="syn-variable">Base</span><span class="syn-punct">,</span> <span class="syn-variable">Exp</span><span class="syn-punct">)</span>          <span class="syn-comment">// Power</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">log</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                  <span class="syn-comment">// Natural logarithm</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">exp</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                  <span class="syn-comment">// Exponential (e^x)</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">sin</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                  <span class="syn-comment">// Sine (radians)</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">cos</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                  <span class="syn-comment">// Cosine (radians)</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">tan</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                  <span class="syn-comment">// Tangent (radians)</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">floor</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                <span class="syn-comment">// Floor</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">ceil</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                 <span class="syn-comment">// Ceiling</span>
<span class="syn-variable">S</span> <span class="syn-comparison">=</span> <span class="syn-builtin">sign</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">)</span>                 <span class="syn-comment">// Sign (-1, 0, 1)</span>
</code></pre>
<h3 id="string-functions" node="[object Object]">String Functions</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-variable">L</span> <span class="syn-comparison">=</span> <span class="syn-builtin">len</span><span class="syn-punct">(</span><span class="syn-variable">S</span><span class="syn-punct">)</span>                  <span class="syn-comment">// String length</span>
<span class="syn-variable">U</span> <span class="syn-comparison">=</span> <span class="syn-builtin">upper</span><span class="syn-punct">(</span><span class="syn-variable">S</span><span class="syn-punct">)</span>                <span class="syn-comment">// To uppercase</span>
<span class="syn-variable">L</span> <span class="syn-comparison">=</span> <span class="syn-builtin">lower</span><span class="syn-punct">(</span><span class="syn-variable">S</span><span class="syn-punct">)</span>                <span class="syn-comment">// To lowercase</span>
<span class="syn-variable">T</span> <span class="syn-comparison">=</span> <span class="syn-builtin">trim</span><span class="syn-punct">(</span><span class="syn-variable">S</span><span class="syn-punct">)</span>                 <span class="syn-comment">// Trim whitespace</span>
<span class="syn-variable">Sub</span> <span class="syn-comparison">=</span> <span class="syn-builtin">substr</span><span class="syn-punct">(</span><span class="syn-variable">S</span><span class="syn-punct">,</span> <span class="syn-variable">Start</span><span class="syn-punct">,</span> <span class="syn-variable">Len</span><span class="syn-punct">)</span> <span class="syn-comment">// Substring</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">replace</span><span class="syn-punct">(</span><span class="syn-variable">S</span><span class="syn-punct">,</span> <span class="syn-variable">Find</span><span class="syn-punct">,</span> <span class="syn-variable">Repl</span><span class="syn-punct">)</span>  <span class="syn-comment">// Replace all</span>
<span class="syn-variable">R</span> <span class="syn-comparison">=</span> <span class="syn-builtin">concat</span><span class="syn-punct">(</span><span class="syn-variable">S1</span><span class="syn-punct">,</span> <span class="syn-variable">S2</span><span class="syn-punct">)</span>          <span class="syn-comment">// Concatenate</span>
</code></pre>
<h3 id="temporal-functions" node="[object Object]">Temporal Functions</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-variable">Now</span> <span class="syn-comparison">=</span> <span class="syn-builtin">time_now</span><span class="syn-punct">(</span><span class="syn-punct">)</span>            <span class="syn-comment">// Current Unix timestamp (ms)</span>
<span class="syn-variable">Diff</span> <span class="syn-comparison">=</span> <span class="syn-builtin">time_diff</span><span class="syn-punct">(</span><span class="syn-variable">T1</span><span class="syn-punct">,</span> <span class="syn-variable">T2</span><span class="syn-punct">)</span>   <span class="syn-comment">// Timestamp difference</span>
<span class="syn-variable">New</span> <span class="syn-comparison">=</span> <span class="syn-builtin">time_add</span><span class="syn-punct">(</span><span class="syn-variable">Ts</span><span class="syn-punct">,</span> <span class="syn-variable">Dur</span><span class="syn-punct">)</span>     <span class="syn-comment">// Add duration</span>
<span class="syn-variable">New</span> <span class="syn-comparison">=</span> <span class="syn-builtin">time_sub</span><span class="syn-punct">(</span><span class="syn-variable">Ts</span><span class="syn-punct">,</span> <span class="syn-variable">Dur</span><span class="syn-punct">)</span>     <span class="syn-comment">// Subtract duration</span>
<span class="syn-variable">W</span> <span class="syn-comparison">=</span> <span class="syn-builtin">time_decay</span><span class="syn-punct">(</span><span class="syn-variable">Ts</span><span class="syn-punct">,</span> <span class="syn-variable">Now</span><span class="syn-punct">,</span> <span class="syn-variable">HL</span><span class="syn-punct">)</span> <span class="syn-comment">// Exponential decay</span>
</code></pre>
<h3 id="scalar-minmax" node="[object Object]">Scalar Min/Max</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-variable">M</span> <span class="syn-comparison">=</span> <span class="syn-builtin">min_val</span><span class="syn-punct">(</span><span class="syn-variable">A</span><span class="syn-punct">,</span> <span class="syn-variable">B</span><span class="syn-punct">)</span>           <span class="syn-comment">// Smaller of two values</span>
<span class="syn-variable">M</span> <span class="syn-comparison">=</span> <span class="syn-builtin">max_val</span><span class="syn-punct">(</span><span class="syn-variable">A</span><span class="syn-punct">,</span> <span class="syn-variable">B</span><span class="syn-punct">)</span>           <span class="syn-comment">// Larger of two values</span>
</code></pre>
<p>See <a href="functions" target="_blank" rel="noopener noreferrer" node="[object Object]">functions</a> for the complete reference (55 functions).</p>
<h2 id="vector-operations-example" node="[object Object]">Vector Operations Example</h2>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Insert vectors</span>
<span class="syn-arith">+</span><span class="syn-identifier">vectors</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">1.0</span><span class="syn-punct">,</span> <span class="syn-number">0.0</span><span class="syn-punct">,</span> <span class="syn-number">0.0</span><span class="syn-punct">]</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-number">2</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.0</span><span class="syn-punct">,</span> <span class="syn-number">1.0</span><span class="syn-punct">,</span> <span class="syn-number">0.0</span><span class="syn-punct">]</span><span class="syn-punct">)</span><span class="syn-punct">]</span>

<span class="syn-comment">// Query with distance computation</span>
<span class="syn-query">?</span> <span class="syn-identifier">vectors</span><span class="syn-punct">(</span><span class="syn-variable">Id1</span><span class="syn-punct">,</span> <span class="syn-variable">V1</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-identifier">vectors</span><span class="syn-punct">(</span><span class="syn-variable">Id2</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">Id1</span> <span class="syn-comparison">&lt;</span> <span class="syn-variable">Id2</span><span class="syn-punct">,</span>
   <span class="syn-variable">Dist</span> <span class="syn-comparison">=</span> <span class="syn-builtin">euclidean</span><span class="syn-punct">(</span><span class="syn-variable">V1</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">Dist</span> <span class="syn-comparison">&lt;</span> <span class="syn-number">1.0</span>

<span class="syn-comment">// Persistent rule with vector computation</span>
<span class="syn-arith">+</span><span class="syn-identifier">similarity</span><span class="syn-punct">(</span><span class="syn-variable">Id1</span><span class="syn-punct">,</span> <span class="syn-variable">Id2</span><span class="syn-punct">,</span> <span class="syn-variable">Score</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span>
    <span class="syn-body-id">vectors</span><span class="syn-punct">(</span><span class="syn-variable">Id1</span><span class="syn-punct">,</span> <span class="syn-variable">V1</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">vectors</span><span class="syn-punct">(</span><span class="syn-variable">Id2</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span><span class="syn-punct">,</span>
    <span class="syn-variable">Id1</span> <span class="syn-comparison">&lt;</span> <span class="syn-variable">Id2</span><span class="syn-punct">,</span>
    <span class="syn-variable">Score</span> <span class="syn-comparison">=</span> <span class="syn-builtin">cosine</span><span class="syn-punct">(</span><span class="syn-variable">V1</span><span class="syn-punct">,</span> <span class="syn-variable">V2</span><span class="syn-punct">)</span>
</code></pre>
<h2 id="examples" node="[object Object]">Examples</h2>
<h3 id="social-graph" node="[object Object]">Social Graph</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-comment">// Create knowledge graph</span>
<span class="syn-meta">.kg create</span> <span class="syn-identifier">social</span>
<span class="syn-meta">.kg use</span> <span class="syn-identifier">social</span>

<span class="syn-comment">// Add edges</span>
<span class="syn-arith">+</span><span class="syn-identifier">follows</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">2</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-number">2</span><span class="syn-punct">,</span> <span class="syn-number">3</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-number">3</span><span class="syn-punct">,</span> <span class="syn-number">4</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-number">4</span><span class="syn-punct">)</span><span class="syn-punct">]</span>

<span class="syn-comment">// Define reachability rule (persistent)</span>
<span class="syn-arith">+</span><span class="syn-identifier">reach</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">follows</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span>
<span class="syn-arith">+</span><span class="syn-identifier">reach</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">reach</span><span class="syn-punct">(</span><span class="syn-variable">X</span><span class="syn-punct">,</span> <span class="syn-variable">Y</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">follows</span><span class="syn-punct">(</span><span class="syn-variable">Y</span><span class="syn-punct">,</span> <span class="syn-variable">Z</span><span class="syn-punct">)</span>

<span class="syn-comment">// Query who user 1 can reach</span>
<span class="syn-query">?</span> <span class="syn-identifier">reach</span><span class="syn-punct">(</span><span class="syn-number">1</span><span class="syn-punct">,</span> <span class="syn-variable">X</span><span class="syn-punct">)</span>
</code></pre>
<h3 id="access-control-rbac" node="[object Object]">Access Control (RBAC)</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-meta">.kg create</span> <span class="syn-identifier">acl</span>
<span class="syn-meta">.kg use</span> <span class="syn-identifier">acl</span>

<span class="syn-comment">// Facts: users, roles, permissions</span>
<span class="syn-arith">+</span><span class="syn-identifier">user_role</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-string">"admin"</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-string">"bob"</span><span class="syn-punct">,</span> <span class="syn-string">"viewer"</span><span class="syn-punct">)</span><span class="syn-punct">]</span>
<span class="syn-arith">+</span><span class="syn-identifier">role_permission</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-string">"admin"</span><span class="syn-punct">,</span> <span class="syn-string">"read"</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-string">"admin"</span><span class="syn-punct">,</span> <span class="syn-string">"write"</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-string">"viewer"</span><span class="syn-punct">,</span> <span class="syn-string">"read"</span><span class="syn-punct">)</span><span class="syn-punct">]</span>

<span class="syn-comment">// Rule: user has permission if they have a role with that permission</span>
<span class="syn-arith">+</span><span class="syn-identifier">has_permission</span><span class="syn-punct">(</span><span class="syn-variable">User</span><span class="syn-punct">,</span> <span class="syn-variable">Perm</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span>
  <span class="syn-body-id">user_role</span><span class="syn-punct">(</span><span class="syn-variable">User</span><span class="syn-punct">,</span> <span class="syn-variable">Role</span><span class="syn-punct">)</span><span class="syn-punct">,</span>
  <span class="syn-body-id">role_permission</span><span class="syn-punct">(</span><span class="syn-variable">Role</span><span class="syn-punct">,</span> <span class="syn-variable">Perm</span><span class="syn-punct">)</span>

<span class="syn-comment">// Query: what can alice do?</span>
<span class="syn-query">?</span> <span class="syn-identifier">has_permission</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-variable">Perm</span><span class="syn-punct">)</span>
</code></pre>
<h3 id="policy-first-rag" node="[object Object]">Policy-First RAG</h3>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-datalog text-sm"><span class="syn-meta">.kg create</span> <span class="syn-identifier">rag</span>
<span class="syn-meta">.kg use</span> <span class="syn-identifier">rag</span>

<span class="syn-comment">// Facts</span>
<span class="syn-arith">+</span><span class="syn-identifier">member</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-string">"engineering"</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-string">"bob"</span><span class="syn-punct">,</span> <span class="syn-string">"sales"</span><span class="syn-punct">)</span><span class="syn-punct">]</span>
<span class="syn-arith">+</span><span class="syn-identifier">doc</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-number">101</span><span class="syn-punct">,</span> <span class="syn-string">"Design Doc"</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-number">102</span><span class="syn-punct">,</span> <span class="syn-string">"Sales Pitch"</span><span class="syn-punct">)</span><span class="syn-punct">]</span>
<span class="syn-arith">+</span><span class="syn-identifier">acl</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-string">"engineering"</span><span class="syn-punct">,</span> <span class="syn-number">101</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-string">"sales"</span><span class="syn-punct">,</span> <span class="syn-number">102</span><span class="syn-punct">)</span><span class="syn-punct">]</span>
<span class="syn-arith">+</span><span class="syn-identifier">emb</span><span class="syn-punct">[</span><span class="syn-punct">(</span><span class="syn-number">101</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">1.0</span><span class="syn-punct">,</span> <span class="syn-number">0.0</span><span class="syn-punct">]</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-punct">(</span><span class="syn-number">102</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.0</span><span class="syn-punct">,</span> <span class="syn-number">1.0</span><span class="syn-punct">]</span><span class="syn-punct">)</span><span class="syn-punct">]</span>

<span class="syn-comment">// Rule: user can access docs via group membership</span>
<span class="syn-arith">+</span><span class="syn-identifier">can_access</span><span class="syn-punct">(</span><span class="syn-variable">User</span><span class="syn-punct">,</span> <span class="syn-variable">DocId</span><span class="syn-punct">)</span> <span class="syn-arrow">&lt;-</span> <span class="syn-body-id">member</span><span class="syn-punct">(</span><span class="syn-variable">User</span><span class="syn-punct">,</span> <span class="syn-variable">Group</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-body-id">acl</span><span class="syn-punct">(</span><span class="syn-variable">Group</span><span class="syn-punct">,</span> <span class="syn-variable">DocId</span><span class="syn-punct">)</span>

<span class="syn-comment">// Query: what can alice retrieve, with similarity score?</span>
<span class="syn-query">?</span> <span class="syn-identifier">can_access</span><span class="syn-punct">(</span><span class="syn-string">"alice"</span><span class="syn-punct">,</span> <span class="syn-variable">DocId</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-identifier">emb</span><span class="syn-punct">(</span><span class="syn-variable">DocId</span><span class="syn-punct">,</span> <span class="syn-variable">V</span><span class="syn-punct">)</span><span class="syn-punct">,</span>
   <span class="syn-variable">Sim</span> <span class="syn-comparison">=</span> <span class="syn-builtin">cosine</span><span class="syn-punct">(</span><span class="syn-variable">V</span><span class="syn-punct">,</span> <span class="syn-punct">[</span><span class="syn-number">0.9</span><span class="syn-punct">,</span> <span class="syn-number">0.1</span><span class="syn-punct">]</span><span class="syn-punct">)</span><span class="syn-punct">,</span> <span class="syn-variable">Sim</span> <span class="syn-comparison">&gt;</span> <span class="syn-number">0.5</span>
</code></pre>
<h2 id="differential-dataflow-semantics" node="[object Object]">Differential Dataflow Semantics</h2>
<p>InputLayer is built on Differential Dataflow (DD), which uses a diff-based model:</p>
<ul>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">+fact</code> sends <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">(fact, time, +1)</code> to DD</li>
<li><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">-fact</code> sends <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">(fact, time, -1)</code> to DD</li>
<li>Rules are incrementally maintained using DD&#x27;s <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">iterate()</code> operator</li>
<li>Queries are executed using DD&#x27;s dataflow operators</li>
</ul>
<p>The persistence layer stores <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">(data, time, diff)</code> triples, enabling:</p>
<ul>
<li>Efficient incremental updates</li>
<li>Crash recovery with WAL (Write-Ahead Log)</li>
</ul>
<h2 id="architecture" node="[object Object]">Architecture</h2>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">Statement Parser     -&gt;  Statement enum (facts, rules, queries)
       |
Storage Engine       -&gt;  Multi-knowledge-graph management
       |
Rule Catalog         -&gt;  Persistent rule definitions (JSON)
       |
Query Engine       -&gt;  DD-based execution
       |
Persist Layer        -&gt;  WAL + batched Parquet storage
</code></pre>
<p>See <a href="../internals/architecture" target="_blank" rel="noopener noreferrer" node="[object Object]">architecture</a> for the complete architecture reference.</p>
<h2 id="file-locations" node="[object Object]">File Locations</h2>
<ul>
<li>Config: <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">./config.toml</code> or <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">--config &lt;path&gt;</code></li>
<li>Data: <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">{data_dir}/{knowledge_graph}/</code></li>
<li>Rules: <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">{data_dir}/{knowledge_graph}/rules/catalog.json</code></li>
<li>Persist: <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">{data_dir}/persist/{knowledge_graph}:{relation}/</code></li>
</ul></article></div><div class="hidden lg:block w-48 shrink-0 border-l border-border/50"><div class="sticky top-0 p-4"><p class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">On this page</p><nav class="space-y-1"><a href="#quick-reference" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Quick Reference</a><a href="#key-terminology" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Key Terminology</a><a href="#meta-commands" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Meta Commands</a><a href="#index-creation-options" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Index Creation Options</a><a href="#data-manipulation" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Data Manipulation</a><a href="#insert-facts-" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Insert Facts (+)</a><a href="#delete-facts-" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Delete Facts (-)</a><a href="#updates-delete-then-insert" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Updates (Delete then Insert)</a><a href="#persistent-rules-head-body" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Persistent Rules (+head &lt;- body)</a><a href="#session-rules-" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Session Rules (&lt;-)</a><a href="#queries-" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Queries (?)</a><a href="#schema-declarations" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Schema Declarations</a><a href="#aggregations" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Aggregations</a><a href="#topk-example" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">TopK Example</a><a href="#builtin-functions" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Builtin Functions</a><a href="#distance-functions" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Distance Functions</a><a href="#vector-operations" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Vector Operations</a><a href="#math-functions" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Math Functions</a><a href="#string-functions" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">String Functions</a><a href="#temporal-functions" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Temporal Functions</a><a href="#scalar-minmax" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Scalar Min/Max</a><a href="#vector-operations-example" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Vector Operations Example</a><a href="#examples" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Examples</a><a href="#social-graph" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Social Graph</a><a href="#access-control-rbac" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Access Control (RBAC)</a><a href="#policy-first-rag" class="block text-xs py-0.5 transition-colors hover:text-foreground pl-3 text-muted-foreground">Policy-First RAG</a><a href="#differential-dataflow-semantics" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Differential Dataflow Semantics</a><a href="#architecture" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">Architecture</a><a href="#file-locations" class="block text-xs py-0.5 transition-colors hover:text-foreground text-muted-foreground">File Locations</a></nav></div></div></div></div></div></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1942,[\"177\",\"static/chunks/app/layout-7e9963bf811be36b.js\"],\"ThemeProvider\"]\n3:I[7121,[],\"\"]\n4:I[4581,[],\"\"]\n6:I[484,[],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[484,[],\"ViewportBoundary\"]\nb:I[484,[],\"MetadataBoundary\"]\nd:I[7123,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/4bd7a24b7976d4e6.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"05bjYGyiAumoEMBrfWHih\",\"c\":[\"\",\"docs\",\"reference\",\"syntax-cheatsheet\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"reference/syntax-cheatsheet\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4bd7a24b7976d4e6.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_188709 __variable_9a8899 font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:I[8428,[\"758\",\"static/chunks/758-3cb69ce377cde046.js\",\"121\",\"static/chunks/121-aece4f809b101dc1.js\",\"502\",\"static/chunks/502-e809071f8789437b.js\",\"689\",\"static/chunks/689-4fcf9680fdc90283.js\",\"870\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js\"],\"DocsPageClient\"]\nf:T27df,"])</script><script>self.__next_f.push([1,"# InputLayer Syntax Cheatsheet\n\nA unified syntax for InputLayer, designed for intuitive data manipulation and querying.\n\n## Quick Reference\n\n| Operator | Meaning | Persisted | DD Semantics |\n|----------|---------|-----------|--------------|\n| `+` | Insert fact or persistent rule | Yes | diff = +1 |\n| `-` | Delete fact or drop rule | Yes | diff = -1 |\n| `\u003c-` (no `+`) | Session rule (transient) | No | Ad-hoc computation |\n| `?` | Query | No | Ad-hoc query |\n\n## Key Terminology\n\n| Term | Description |\n|------|-------------|\n| **Fact** | Base data stored in a relation (e.g., `+edge(1, 2)`) |\n| **Rule** | Derived relation defined by a rule (persistent) |\n| **Session Rule** | Transient rule that exists only for current session |\n| **Schema** | Type definition for a relation's columns |\n| **Query** | One-shot question against facts and rules |\n| **Knowledge Graph** | Isolated namespace containing relations, rules, and indexes |\n\n## Meta Commands\n\nMeta commands start with `.` and control the system:\n\n```\n.kg                  Show current knowledge graph\n.kg list             List all knowledge graphs\n.kg create \u003cname\u003e    Create knowledge graph\n.kg use \u003cname\u003e       Switch to knowledge graph\n.kg drop \u003cname\u003e      Drop knowledge graph (cannot drop current)\n\n.rel                 List relations (base facts)\n.rel \u003cname\u003e          Describe relation schema\n.rel drop \u003cname\u003e     Drop a relation and its data\n\n.rule                List persistent rules\n.rule \u003cname\u003e         Query rule (show computed data)\n.rule def \u003cname\u003e     Show rule definition\n.rule drop \u003cname\u003e    Drop all clauses of a rule\n.rule remove \u003cname\u003e \u003cn\u003e  Remove clause #n from rule (1-based)\n.rule clear \u003cname\u003e   Clear all clauses for re-registration\n\n.session             List session rules\n.session clear       Clear all session rules\n.session drop \u003cn\u003e    Remove session rule #n\n\n.index               List all indexes\n.index list          List all indexes (explicit)\n.index create \u003cname\u003e on \u003crelation\u003e(\u003ccolumn\u003e) [options]\n.index drop \u003cname\u003e   Drop an index\n.index stats \u003cname\u003e  Show index statistics\n.index rebuild \u003cname\u003e  Rebuild an index\n\n.load \u003cfile\u003e         Load and execute a .idl file\n\n.user list           List all users\n.user create \u003cname\u003e \u003cpassword\u003e \u003crole\u003e  Create user\n.user drop \u003cname\u003e    Delete user\n.user password \u003cname\u003e \u003cpassword\u003e       Change password\n.user role \u003cname\u003e \u003crole\u003e               Change role\n\n.apikey create \u003clabel\u003e   Create API key\n.apikey list             List API keys\n.apikey revoke \u003clabel\u003e   Revoke API key\n\n.kg acl list [\u003ckg\u003e]              List ACLs\n.kg acl grant \u003ckg\u003e \u003cuser\u003e \u003crole\u003e Grant access\n.kg acl revoke \u003ckg\u003e \u003cuser\u003e       Revoke access\n\n.explain \u003cquery\u003e     Show query plan without executing\n.compact             Compact WAL and consolidate batch files\n.status              Show system status\n.help                Show this help\n.quit                Exit client\n```\n\n### Index Creation Options\n\n```\n.index create vec_idx on docs(embedding) type hnsw metric cosine m 16 ef_construction 200\n```\n\nOptions: `type \u003chnsw\u003e`, `metric \u003ccosine|euclidean|dot_product|manhattan\u003e`, `m \u003cN\u003e`, `ef_construction \u003cN\u003e`, `ef_search \u003cN\u003e`\n\n`.idx` is an alias for `.index`.\n\n## Data Manipulation\n\n### Insert Facts (`+`)\n\nSingle fact:\n```datalog\n+edge(1, 2)\n```\n\nBulk insert:\n```datalog\n+edge[(1, 2), (2, 3), (3, 4)]\n```\n\n### Delete Facts (`-`)\n\nSingle fact:\n```datalog\n-edge(1, 2)\n```\n\nConditional delete (query-based):\n```datalog\n-edge(X, Y) \u003c- edge(X, Y), X \u003e 5\n```\n\n### Updates (Delete then Insert)\n\nTo update data, delete the old value then insert the new:\n```datalog\n// Delete old value\n-counter(1, 0)\n// Insert new value\n+counter(1, 5)\n```\n\n## Persistent Rules (`+head \u003c- body`)\n\nPersistent rules are saved to disk and incrementally maintained by Differential Dataflow.\n\nSimple rule:\n```datalog\n+path(X, Y) \u003c- edge(X, Y)\n```\n\nRecursive rule (transitive closure):\n```datalog\n+path(X, Y) \u003c- edge(X, Y)\n+path(X, Z) \u003c- path(X, Y), edge(Y, Z)\n```\n\nRule with filter:\n```datalog\n+adult(Name, Age) \u003c- person(Name, Age), Age \u003e= 18\n```\n\nRule with computed head variable:\n```datalog\n+doubled(X, Y) \u003c- nums(X), Y = X * 2\n```\n\nRules are saved to `{kg_dir}/rules/catalog.json` and automatically loaded on knowledge graph startup.\n\n## Session Rules (`\u003c-`)\n\nSession rules are executed immediately but not persisted. They're useful for ad-hoc analysis:\n\n```datalog\nresult(X, Y) \u003c- edge(X, Y), X \u003c Y\n```\n\nSession rules can reference persistent rules:\n```datalog\nreachable_from_one(X) \u003c- path(1, X)\n```\n\nMultiple session rules accumulate and evaluate together:\n```datalog\nfoo(X, Y) \u003c- bar(X, Y)\nfoo(X, Z) \u003c- foo(X, Y), foo(Y, Z)  // Adds to previous rule\n```\n\n## Queries (`?`)\n\nQuery a relation or rule:\n\nSimple query:\n```datalog\n? edge(1, X)\n```\n\nQuery with constraints:\n```datalog\n? person(Name, Age), Age \u003e 30\n```\n\nQuery a derived relation:\n```datalog\n? path(1, X)\n```\n\n## Schema Declarations\n\nDefine typed relations:\n\n```datalog\n+employee(id: int, name: string, dept_id: int)\n+user(id: int, email: string, name: string)\n```\n\n## Aggregations\n\n```datalog\n+total_sales(Dept, sum\u003cAmount\u003e) \u003c- sales(Dept, _, Amount)\n+employee_count(Dept, count\u003cId\u003e) \u003c- employee(Id, _, Dept)\n+max_salary(Dept, max\u003cSalary\u003e) \u003c- employee(_, Salary, Dept)\n+min_age(min\u003cAge\u003e) \u003c- person(_, Age)\n+avg_score(avg\u003cScore\u003e) \u003c- test_results(_, Score)\n```\n\nSupported aggregates: `count`, `sum`, `min`, `max`, `avg`, `count_distinct`, `top_k`, `top_k_threshold`.\n\n### TopK Example\n```datalog\n+top_scores(Name, top_k\u003c3, Score, desc\u003e) \u003c- scores(Name, Score)\n```\n\n## Builtin Functions\n\n### Distance Functions\n```datalog\nDist = euclidean(V1, V2)    // Euclidean (L2) distance\nDist = cosine(V1, V2)       // Cosine distance (1 - similarity)\nScore = dot(V1, V2)         // Dot product\nDist = manhattan(V1, V2)    // Manhattan (L1) distance\n```\n\n### Vector Operations\n```datalog\nNormV = normalize(V)        // Unit vector\nDim = vec_dim(V)            // Vector dimension\nSum = vec_add(V1, V2)       // Element-wise addition\nScaled = vec_scale(V, S)    // Scalar multiplication\n```\n\n### Math Functions\n```datalog\nA = abs(X)                  // Absolute value\nR = sqrt(X)                 // Square root\nR = pow(Base, Exp)          // Power\nR = log(X)                  // Natural logarithm\nR = exp(X)                  // Exponential (e^x)\nR = sin(X)                  // Sine (radians)\nR = cos(X)                  // Cosine (radians)\nR = tan(X)                  // Tangent (radians)\nR = floor(X)                // Floor\nR = ceil(X)                 // Ceiling\nS = sign(X)                 // Sign (-1, 0, 1)\n```\n\n### String Functions\n```datalog\nL = len(S)                  // String length\nU = upper(S)                // To uppercase\nL = lower(S)                // To lowercase\nT = trim(S)                 // Trim whitespace\nSub = substr(S, Start, Len) // Substring\nR = replace(S, Find, Repl)  // Replace all\nR = concat(S1, S2)          // Concatenate\n```\n\n### Temporal Functions\n```datalog\nNow = time_now()            // Current Unix timestamp (ms)\nDiff = time_diff(T1, T2)   // Timestamp difference\nNew = time_add(Ts, Dur)     // Add duration\nNew = time_sub(Ts, Dur)     // Subtract duration\nW = time_decay(Ts, Now, HL) // Exponential decay\n```\n\n### Scalar Min/Max\n```datalog\nM = min_val(A, B)           // Smaller of two values\nM = max_val(A, B)           // Larger of two values\n```\n\nSee [functions](functions) for the complete reference (55 functions).\n\n## Vector Operations Example\n\n```datalog\n// Insert vectors\n+vectors[(1, [1.0, 0.0, 0.0]), (2, [0.0, 1.0, 0.0])]\n\n// Query with distance computation\n? vectors(Id1, V1), vectors(Id2, V2), Id1 \u003c Id2,\n   Dist = euclidean(V1, V2), Dist \u003c 1.0\n\n// Persistent rule with vector computation\n+similarity(Id1, Id2, Score) \u003c-\n    vectors(Id1, V1), vectors(Id2, V2),\n    Id1 \u003c Id2,\n    Score = cosine(V1, V2)\n```\n\n## Examples\n\n### Social Graph\n\n```datalog\n// Create knowledge graph\n.kg create social\n.kg use social\n\n// Add edges\n+follows[(1, 2), (2, 3), (3, 4), (1, 4)]\n\n// Define reachability rule (persistent)\n+reach(X, Y) \u003c- follows(X, Y)\n+reach(X, Z) \u003c- reach(X, Y), follows(Y, Z)\n\n// Query who user 1 can reach\n? reach(1, X)\n```\n\n### Access Control (RBAC)\n\n```datalog\n.kg create acl\n.kg use acl\n\n// Facts: users, roles, permissions\n+user_role[(\"alice\", \"admin\"), (\"bob\", \"viewer\")]\n+role_permission[(\"admin\", \"read\"), (\"admin\", \"write\"), (\"viewer\", \"read\")]\n\n// Rule: user has permission if they have a role with that permission\n+has_permission(User, Perm) \u003c-\n  user_role(User, Role),\n  role_permission(Role, Perm)\n\n// Query: what can alice do?\n? has_permission(\"alice\", Perm)\n```\n\n### Policy-First RAG\n\n```datalog\n.kg create rag\n.kg use rag\n\n// Facts\n+member[(\"alice\", \"engineering\"), (\"bob\", \"sales\")]\n+doc[(101, \"Design Doc\"), (102, \"Sales Pitch\")]\n+acl[(\"engineering\", 101), (\"sales\", 102)]\n+emb[(101, [1.0, 0.0]), (102, [0.0, 1.0])]\n\n// Rule: user can access docs via group membership\n+can_access(User, DocId) \u003c- member(User, Group), acl(Group, DocId)\n\n// Query: what can alice retrieve, with similarity score?\n? can_access(\"alice\", DocId), emb(DocId, V),\n   Sim = cosine(V, [0.9, 0.1]), Sim \u003e 0.5\n```\n\n## Differential Dataflow Semantics\n\nInputLayer is built on Differential Dataflow (DD), which uses a diff-based model:\n\n- `+fact` sends `(fact, time, +1)` to DD\n- `-fact` sends `(fact, time, -1)` to DD\n- Rules are incrementally maintained using DD's `iterate()` operator\n- Queries are executed using DD's dataflow operators\n\nThe persistence layer stores `(data, time, diff)` triples, enabling:\n- Efficient incremental updates\n- Crash recovery with WAL (Write-Ahead Log)\n\n## Architecture\n\n```\nStatement Parser     -\u003e  Statement enum (facts, rules, queries)\n       |\nStorage Engine       -\u003e  Multi-knowledge-graph management\n       |\nRule Catalog         -\u003e  Persistent rule definitions (JSON)\n       |\nQuery Engine       -\u003e  DD-based execution\n       |\nPersist Layer        -\u003e  WAL + batched Parquet storage\n```\n\nSee [architecture](../internals/architecture) for the complete architecture reference.\n\n## File Locations\n\n- Config: `./config.toml` or `--config \u003cpath\u003e`\n- Data: `{data_dir}/{knowledge_graph}/`\n- Rules: `{data_dir}/{knowledge_graph}/rules/catalog.json`\n- Persist: `{data_dir}/persist/{knowledge_graph}:{relation}/`"])</script><script>self.__next_f.push([1,"5:[\"$\",\"$Le\",null,{\"page\":{\"title\":\"InputLayer Syntax Cheatsheet\",\"content\":\"$f\",\"toc\":[{\"level\":2,\"text\":\"Quick Reference\",\"id\":\"quick-reference\"},{\"level\":2,\"text\":\"Key Terminology\",\"id\":\"key-terminology\"},{\"level\":2,\"text\":\"Meta Commands\",\"id\":\"meta-commands\"},{\"level\":3,\"text\":\"Index Creation Options\",\"id\":\"index-creation-options\"},{\"level\":2,\"text\":\"Data Manipulation\",\"id\":\"data-manipulation\"},{\"level\":3,\"text\":\"Insert Facts (+)\",\"id\":\"insert-facts-\"},{\"level\":3,\"text\":\"Delete Facts (-)\",\"id\":\"delete-facts-\"},{\"level\":3,\"text\":\"Updates (Delete then Insert)\",\"id\":\"updates-delete-then-insert\"},{\"level\":2,\"text\":\"Persistent Rules (+head \u003c- body)\",\"id\":\"persistent-rules-head-body\"},{\"level\":2,\"text\":\"Session Rules (\u003c-)\",\"id\":\"session-rules-\"},{\"level\":2,\"text\":\"Queries (?)\",\"id\":\"queries-\"},{\"level\":2,\"text\":\"Schema Declarations\",\"id\":\"schema-declarations\"},{\"level\":2,\"text\":\"Aggregations\",\"id\":\"aggregations\"},{\"level\":3,\"text\":\"TopK Example\",\"id\":\"topk-example\"},{\"level\":2,\"text\":\"Builtin Functions\",\"id\":\"builtin-functions\"},{\"level\":3,\"text\":\"Distance Functions\",\"id\":\"distance-functions\"},{\"level\":3,\"text\":\"Vector Operations\",\"id\":\"vector-operations\"},{\"level\":3,\"text\":\"Math Functions\",\"id\":\"math-functions\"},{\"level\":3,\"text\":\"String Functions\",\"id\":\"string-functions\"},{\"level\":3,\"text\":\"Temporal Functions\",\"id\":\"temporal-functions\"},{\"level\":3,\"text\":\"Scalar Min/Max\",\"id\":\"scalar-minmax\"},{\"level\":2,\"text\":\"Vector Operations Example\",\"id\":\"vector-operations-example\"},{\"level\":2,\"text\":\"Examples\",\"id\":\"examples\"},{\"level\":3,\"text\":\"Social Graph\",\"id\":\"social-graph\"},{\"level\":3,\"text\":\"Access Control (RBAC)\",\"id\":\"access-control-rbac\"},{\"level\":3,\"text\":\"Policy-First RAG\",\"id\":\"policy-first-rag\"},{\"level\":2,\"text\":\"Differential Dataflow Semantics\",\"id\":\"differential-dataflow-semantics\"},{\"level\":2,\"text\":\"Architecture\",\"id\":\"architecture\"},{\"level\":2,\"text\":\"File Locations\",\"id\":\"file-locations\"}]},\"slugKey\":\"reference/syntax-cheatsheet\"}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[6869,[],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"InputLayer - A symbolic reasoning engine for AI agents\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/icon.svg\"}],[\"$\",\"$L10\",\"3\",{}]]\n8:null\n"])</script></body></html>