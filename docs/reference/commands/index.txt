1:"$Sreact.fragment"
2:I[1942,["177","static/chunks/app/layout-7e9963bf811be36b.js"],"ThemeProvider"]
3:I[7121,[],""]
4:I[4581,[],""]
6:I[484,[],"OutletBoundary"]
7:"$Sreact.suspense"
9:I[484,[],"ViewportBoundary"]
b:I[484,[],"MetadataBoundary"]
d:I[7123,[],""]
:HL["/_next/static/media/4cf2300e9c8272f7-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/4bd7a24b7976d4e6.css","style"]
0:{"P":null,"b":"05bjYGyiAumoEMBrfWHih","c":["","docs","reference","commands",""],"q":"","i":false,"f":[[["",{"children":["docs",{"children":[["slug","reference/commands","oc"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],[["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4bd7a24b7976d4e6.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_188709 __variable_9a8899 font-sans antialiased","children":["$","$L2",null,{"attribute":"class","defaultTheme":"dark","enableSystem":true,"disableTransitionOnChange":true,"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":["$L5",null,["$","$L6",null,{"children":["$","$7",null,{"name":"Next.MetadataOutlet","children":"$@8"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],["$","$1","h",{"children":[null,["$","$L9",null,{"children":"$@a"}],["$","div",null,{"hidden":true,"children":["$","$Lb",null,{"children":["$","$7",null,{"name":"Next.Metadata","children":"$@c"}]}]}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],false]],"m":"$undefined","G":["$d",[]],"S":true}
e:I[8428,["758","static/chunks/758-3cb69ce377cde046.js","121","static/chunks/121-aece4f809b101dc1.js","502","static/chunks/502-e809071f8789437b.js","689","static/chunks/689-4fcf9680fdc90283.js","870","static/chunks/app/docs/%5B%5B...slug%5D%5D/page-004ec69e3c86920a.js"],"DocsPageClient"]
f:T2455,# Meta Commands Reference

Meta commands control the InputLayer environment. They start with a `.` prefix.

## Knowledge Graph Commands

### `.kg`

Show current knowledge graph.

```
.kg
```

**Output:**
```
Current knowledge graph: mykg
```

### `.kg list`

List all knowledge graphs.

```
.kg list
```

**Output:**
```
Knowledge graphs:
  default (current)
  mykg
  analytics
```

### `.kg create <name>`

Create a new knowledge graph.

```
.kg create analytics
```

### `.kg use <name>`

Switch to a knowledge graph.

```
.kg use analytics
```

**Note:** Switching knowledge graphs clears session rules and transient data.

### `.kg drop <name>`

Delete a knowledge graph and all its data.

```
.kg drop old_knowledge_graph
```

**Warning:** This permanently deletes all relations, rules, and data.

## Access Control Commands

### `.kg acl list [kg_name]`

List access control entries for a knowledge graph. If no name is given, lists ACLs for the current KG.

```
.kg acl list
.kg acl list analytics
```

### `.kg acl grant <kg> <user> <role>`

Grant a user access to a knowledge graph with a specific role.

```
.kg acl grant analytics alice viewer
.kg acl grant shared_data bob editor
```

**KG Roles:** `owner`, `editor`, `viewer`

### `.kg acl revoke <kg> <user>`

Revoke a user's access to a knowledge graph.

```
.kg acl revoke analytics alice
```

## User Management Commands

### `.user list`

List all users and their roles.

```
.user list
```

### `.user create <username> <password> <role>`

Create a new user with the given password and role.

```
.user create alice s3cret viewer
.user create bob hunter2 admin
```

**Roles:** `admin`, `editor`, `viewer`

### `.user drop <username>`

Delete a user.

```
.user drop alice
```

### `.user password <username> <new_password>`

Change a user's password.

```
.user password alice new-s3cret
```

### `.user role <username> <new_role>`

Change a user's role.

```
.user role alice admin
```

---

## Relation Commands

### `.rel`

List all relations with row counts.

```
.rel
```

**Output:**
```
Relations:
  edge (arity: 2, columns: [col0: any, col1: any], tuples: 150)
  person (arity: 3, columns: [id: int, name: string, age: int], tuples: 25)
  department (arity: 2, columns: [col0: any, col1: any], tuples: 5)
```

### `.rel drop <name>`

Delete a relation and all its data and schema.

```
.rel drop old_events
```

**Warning:** This permanently deletes the relation's tuples, metadata, schema, and persist storage. If a persistent rule exists with the same name as the relation, that rule is also removed. Other rules that reference the dropped relation are **not** automatically deleted — they will fail at query time. A `schema_change` notification is emitted.

### `.rel <name>`

Describe a relation's schema and show sample data.

```
.rel person
```

**Output:**
```
Relation: person
```

| A | B | C |
|---|---|---|
| 1 | "alice" | 30 |
| 2 | "bob" | 25 |

*2 of 25 total rows*

## Rule Commands

### `.rule`

List all persistent rules.

```
.rule
```

**Output:**
```
Rules:
  reachable (2 clause(s))
  can_access (3 clause(s))
```

### `.rule list`

Same as `.rule` - list all persistent rules.

```
.rule list
```

### `.rule <name>`

Query a rule and show computed results.

```
.rule reachable
```

**Output:**

| X | Y |
|---|---|
| 1 | 2 |
| 1 | 3 |
| 1 | 4 |

*3 rows*

### `.rule def <name>`

Show the definition of a rule.

```
.rule def reachable
```

**Output:**
```
Rule: reachable
Clauses:
  1. reachable(X, Y) <- edge(X, Y)
  2. reachable(X, Z) <- reachable(X, Y), edge(Y, Z)
```

### `.rule drop <name>`

Delete a rule entirely (removes all clauses).

```
.rule drop reachable
```

### `.rule drop prefix <prefix>`

Delete all rules whose names start with the given prefix.

```
.rule drop prefix temp_
```

**Note:** An empty prefix is rejected to prevent accidentally dropping all rules.

### `.rule remove <name> <index>`

Remove a specific clause from a rule by index (1-based).

```
.rule remove reachable 2
```

**Output:**
```
Clause 2 removed from rule 'reachable'
```

**Note:** If the last clause is removed, the entire rule is deleted:
```
Clause 1 removed from rule 'simple'. Rule completely deleted (no clauses remaining)
```

**Errors:**
- If clause index is out of bounds: `Clause index 5 out of bounds. Rule 'reachable' has 2 clause(s)`
- If rule doesn't exist: `Rule 'nonexistent' does not exist`

### `.rule clear <name>`

Clear all clauses from a rule for re-registration.

```
.rule clear reachable
```

### `.rule edit <name> <index> <clause>`

Edit a specific clause in a rule.

```
.rule edit reachable 2 +reachable(X, Z) <- edge(X, Y), reachable(Y, Z)
```

**Note:** Index is 1-based.

## Session Commands

Session rules are transient and not persisted.

### `.session`

List current session rules.

```
.session
```

**Output:**
```
Session rules (2):
  1. temp(X) <- edge(X, _)
  2. filtered(X, Y) <- temp(X), edge(X, Y)
```

### `.session clear`

Clear all session rules.

```
.session clear
```

### `.session drop <n>`

Remove a specific session rule by index.

```
.session drop 1
```

**Note:** Index is 1-based.

## Load Command

The `.load` command reads and executes all statements from a `.idl` file sequentially.

### `.load <file>`

Load and execute a file.

```
.load schema.idl
```

**Behavior:**
- Reads the file from disk
- Parses and executes each statement in order
- Continues through non-fatal errors (parse errors, server errors) so that cleanup commands (e.g., `.kg drop`) always run
- Only connection errors abort the script

**Note:** The parser accepts `--replace` and `--merge` flags, but these modes are not yet implemented — all three modes currently execute identically (sequential statement execution).

### Supported File Formats

| Extension | Description |
|-----------|-------------|
| `.idl` | InputLayer script (statements) |

## System Commands

### `.status`

Show system status.

```
.status
```

**Output:**
```
Knowledge graph: mykg
Relations: 5
Rules: 3
Session rules: 2
Data directory: ./data
```

### `.clear prefix <prefix>`

Clear all facts from relations whose names start with the given prefix.

```
.clear prefix temp_
```

**Note:** An empty prefix is rejected. This clears data only - schemas and rules are preserved.

### `.explain <query>`

Show the query plan for a query without executing it. Displays the logical plan and applied optimizations.

```
.explain ?edge(X, Y)
.explain ?path(1, X)
```

### `.compact`

Compact storage by consolidating WAL and batch files.

```
.compact
```

### `.help`

Show help message.

```
.help
```

### `.quit` / `.exit` / `.q`

Exit the REPL.

```
.quit
```

---

## Index Commands

Commands for managing HNSW (Hierarchical Navigable Small World) indexes for fast vector similarity search.

### `.index` / `.index list`

List all indexes in the current knowledge graph.

```
.index
.index list
```

**Output:**
```
Indexes:
  embeddings_idx on embeddings(vector) [hnsw, cosine]
  docs_idx on documents(embedding) [hnsw, euclidean]
```

### `.index create`

Create a new HNSW index on a vector column.

**Syntax:**
```
.index create <name> on <relation>(<column>) [type <index_type>] [metric <distance_metric>] [m <max_connections>] [ef_construction <beam_width>] [ef_search <search_beam>]
```

**Parameters:**
- `name` - Unique name for the index
- `relation` - Relation containing the vector column
- `column` - Column name containing vectors
- `type` - Index type (default: `hnsw`)
- `metric` - Distance metric: `cosine`, `euclidean`, `dot_product`, `manhattan` (default: `cosine`)
- `m` - Max connections per node (default: 16, higher = better recall, more memory)
- `ef_construction` - Beam width during construction (default: 200, higher = better quality, slower build)
- `ef_search` - Beam width during search (default: 50, higher = better recall, slower search)

**Examples:**

Basic index with defaults:
```
.index create my_idx on embeddings(vector)
```

Index with cosine distance:
```
.index create doc_idx on documents(embedding) metric cosine
```

Tuned index for high recall:
```
.index create high_recall_idx on items(vec) metric euclidean m 32 ef_construction 200 ef_search 100
```

### `.index drop`

Delete an index.

```
.index drop <name>
```

**Example:**
```
.index drop embeddings_idx
```

### `.index stats`

Show statistics for an index including size, build time, and configuration.

```
.index stats <name>
```

**Example:**
```
.index stats embeddings_idx
```

**Output:**
```
Index: embeddings_idx
  Relation: embeddings
  Column: vector
  Type: hnsw
  Metric: cosine
  Vectors: 10,000
  Dimensions: 384
  M: 16
  ef_construction: 200
  ef_search: 50
  Memory: 15.2 MB
```

### `.index rebuild`

Force rebuild an index. Useful after bulk inserts or if index becomes stale.

```
.index rebuild <name>
```

**Example:**
```
.index rebuild embeddings_idx
```

**Note:** Rebuilding large indexes may take significant time. The index remains available during rebuild.

---

## Error Handling

### Invalid Command

```
.foo
```

**Output:**
```
Unknown meta command: .foo
```

### Missing Arguments

```
.kg create
```

**Output:**
```
Usage: .kg create <name>
```

### Rule Not Found

```
.rule nonexistent
```

**Output:**
```
Rule 'nonexistent' not found
```5:["$","$Le",null,{"page":{"title":"Meta Commands Reference","content":"$f","toc":[{"level":2,"text":"Knowledge Graph Commands","id":"knowledge-graph-commands"},{"level":3,"text":".kg","id":"kg"},{"level":3,"text":".kg list","id":"kg-list"},{"level":3,"text":".kg create <name>","id":"kg-create-name"},{"level":3,"text":".kg use <name>","id":"kg-use-name"},{"level":3,"text":".kg drop <name>","id":"kg-drop-name"},{"level":2,"text":"Access Control Commands","id":"access-control-commands"},{"level":3,"text":".kg acl list [kgname]","id":"kg-acl-list-kgname"},{"level":3,"text":".kg acl grant <kg> <user> <role>","id":"kg-acl-grant-kg-user-role"},{"level":3,"text":".kg acl revoke <kg> <user>","id":"kg-acl-revoke-kg-user"},{"level":2,"text":"User Management Commands","id":"user-management-commands"},{"level":3,"text":".user list","id":"user-list"},{"level":3,"text":".user create <username> <password> <role>","id":"user-create-username-password-role"},{"level":3,"text":".user drop <username>","id":"user-drop-username"},{"level":3,"text":".user password <username> <newpassword>","id":"user-password-username-newpassword"},{"level":3,"text":".user role <username> <newrole>","id":"user-role-username-newrole"},{"level":2,"text":"Relation Commands","id":"relation-commands"},{"level":3,"text":".rel","id":"rel"},{"level":3,"text":".rel drop <name>","id":"rel-drop-name"},{"level":3,"text":".rel <name>","id":"rel-name"},{"level":2,"text":"Rule Commands","id":"rule-commands"},{"level":3,"text":".rule","id":"rule"},{"level":3,"text":".rule list","id":"rule-list"},{"level":3,"text":".rule <name>","id":"rule-name"},{"level":3,"text":".rule def <name>","id":"rule-def-name"},{"level":3,"text":".rule drop <name>","id":"rule-drop-name"},{"level":3,"text":".rule drop prefix <prefix>","id":"rule-drop-prefix-prefix"},{"level":3,"text":".rule remove <name> <index>","id":"rule-remove-name-index"},{"level":3,"text":".rule clear <name>","id":"rule-clear-name"},{"level":3,"text":".rule edit <name> <index> <clause>","id":"rule-edit-name-index-clause"},{"level":2,"text":"Session Commands","id":"session-commands"},{"level":3,"text":".session","id":"session"},{"level":3,"text":".session clear","id":"session-clear"},{"level":3,"text":".session drop <n>","id":"session-drop-n"},{"level":2,"text":"Load Command","id":"load-command"},{"level":3,"text":".load <file>","id":"load-file"},{"level":3,"text":"Supported File Formats","id":"supported-file-formats"},{"level":2,"text":"System Commands","id":"system-commands"},{"level":3,"text":".status","id":"status"},{"level":3,"text":".clear prefix <prefix>","id":"clear-prefix-prefix"},{"level":3,"text":".explain <query>","id":"explain-query"},{"level":3,"text":".compact","id":"compact"},{"level":3,"text":".help","id":"help"},{"level":3,"text":".quit / .exit / .q","id":"quit-exit-q"},{"level":2,"text":"Index Commands","id":"index-commands"},{"level":3,"text":".index / .index list","id":"index-index-list"},{"level":3,"text":".index create","id":"index-create"},{"level":3,"text":".index drop","id":"index-drop"},{"level":3,"text":".index stats","id":"index-stats"},{"level":3,"text":".index rebuild","id":"index-rebuild"},{"level":2,"text":"Error Handling","id":"error-handling"},{"level":3,"text":"Invalid Command","id":"invalid-command"},{"level":3,"text":"Missing Arguments","id":"missing-arguments"},{"level":3,"text":"Rule Not Found","id":"rule-not-found"}]},"slugKey":"reference/commands"}]
a:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
10:I[6869,[],"IconMark"]
c:[["$","title","0",{"children":"InputLayer - A symbolic reasoning engine for AI agents"}],["$","meta","1",{"name":"description","content":"Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system."}],["$","link","2",{"rel":"icon","href":"/icon.svg"}],["$","$L10","3",{}]]
8:null
