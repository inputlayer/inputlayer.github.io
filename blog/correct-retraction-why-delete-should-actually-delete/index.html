<!DOCTYPE html><!--05bjYGyiAumoEMBrfWHih--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/4bd7a24b7976d4e6.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js"/><script src="/_next/static/chunks/4bd1b696-deba172d32c79f82.js" async=""></script><script src="/_next/static/chunks/794-275dc9ebd3a29fbf.js" async=""></script><script src="/_next/static/chunks/main-app-1fa5b694e5d36a75.js" async=""></script><script src="/_next/static/chunks/app/layout-7e9963bf811be36b.js" async=""></script><script src="/_next/static/chunks/758-3cb69ce377cde046.js" async=""></script><script src="/_next/static/chunks/121-aece4f809b101dc1.js" async=""></script><script src="/_next/static/chunks/830-dbae36b1030f3d7c.js" async=""></script><script src="/_next/static/chunks/689-4fcf9680fdc90283.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-a68506d98e2282cb.js" async=""></script><meta name="next-size-adjust" content=""/><title>InputLayer - A symbolic reasoning engine for AI agents</title><meta name="description" content="Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system."/><link rel="icon" href="/icon.svg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_188709 __variable_9a8899 font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","dark",null,["light","dark"],null,true,true)</script><div class="flex flex-col min-h-dvh"><header class="sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"><div class="flex h-14 items-center px-6"><a class="mr-8" href="/"><span class="inline-flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg><span class="font-extrabold tracking-tight text-lg">InputLayer</span></span></a><nav class="hidden md:flex items-center gap-6 text-sm"><a class="text-muted-foreground transition-colors hover:text-foreground" href="/docs/">Docs</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/blog/">Blog</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/use-cases/">Use Cases</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/compare/">Compare</a><a href="https://demo.inputlayer.ai" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-muted-foreground transition-colors hover:text-foreground">Demo<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></nav><div class="ml-auto flex items-center gap-3"><div class="inline-flex items-center gap-1.5"><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-3.5 w-3.5"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg><span>Star</span></a><a href="https://github.com/inputlayer/inputlayer/fork" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-git-fork h-3.5 w-3.5"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg><span>Fork</span></a></div><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 h-9 w-9"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-4 w-4"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button><div class="md:hidden"><button class="inline-flex items-center justify-center rounded-md p-2 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></div></header><main class="flex-1"><section class="border-b border-border/50"><div class="relative overflow-hidden"><div class="absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent"></div><div class="relative mx-auto max-w-6xl px-6 py-16 lg:py-20"><nav class="mb-4 flex items-center gap-2 text-sm text-muted-foreground"><span class="flex items-center gap-2"><a class="hover:text-foreground transition-colors" href="/blog/">Blog</a></span></nav><h1 class="text-3xl font-extrabold tracking-tight sm:text-4xl lg:text-5xl max-w-3xl">Correct Retraction: Why Delete Should Actually Delete</h1><p class="mt-4 text-lg text-muted-foreground max-w-2xl">January 15, 2026 Â· InputLayer Team</p></div></div></section><article class="mx-auto max-w-3xl px-6 py-12"><div class="docs-prose"><h1 id="correct-retraction-why-delete-should-actually-delete" node="[object Object]">Correct Retraction: Why Delete Should Actually Delete</h1>
<p>Three months after a security incident, the forensics team discovers something troubling. A former employee - let&#x27;s call him Bob - had his access revoked on the day he left. His account was deactivated. His role was removed from the auth system.</p>
<p>But Bob had authority over a team of six people. Those six people had authored documents. The system had derived that Bob&#x27;s manager, Alice, could access those documents through Bob. When Bob left, his direct access disappeared. But Alice&#x27;s transitive access to those documents - the part that was <em>derived</em> through Bob&#x27;s position - was never cleaned up.</p>
<p>For three months, Alice had access to documents she shouldn&#x27;t have been able to see. Not because anyone made an error, but because the system didn&#x27;t properly retract derived conclusions when a source fact was removed.</p>
<p>This is the correct retraction problem. And it&#x27;s one of the most under-appreciated issues in data systems that derive conclusions from connected facts.</p>
<h2 id="simple-on-the-surface-hard-underneath" node="[object Object]">Simple on the surface, hard underneath</h2>
<p>At first glance, retraction seems trivial. Delete a fact, delete everything that depended on it. Done.</p>
<p>Let&#x27;s walk through why it&#x27;s not that simple.</p>
<p>Alice manages Bob. Bob manages Charlie. The system derives transitive authority:</p>
<div class="my-8 space-y-2"><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-primary/10 border-primary/60">Alice</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Bob (direct report)</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Charlie (Bob&#x27;s direct report)</div></div></div></div></div></div></div></div></div>
<div class="my-8"><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-muted text-muted-foreground ring-border">1</div><div class="w-px flex-1 min-h-5 bg-border/60"></div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Alice has authority over Bob</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">direct</p></div></div><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-muted text-muted-foreground ring-border">2</div><div class="w-px flex-1 min-h-5 bg-border/60"></div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Bob has authority over Charlie</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">direct</p></div></div><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-muted text-muted-foreground ring-border">3</div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Alice has authority over Charlie</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">transitive: Alice to Bob to Charlie</p></div></div></div>
<p>Bob leaves the company. You remove &quot;Alice manages Bob.&quot; What should happen?</p>
<div class="my-8"><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 ring-red-300 dark:ring-red-700">1</div><div class="w-px flex-1 min-h-5 bg-border/60"></div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Alice has authority over Bob</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">RETRACT - no longer manages him</p></div></div><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 ring-red-300 dark:ring-red-700">2</div><div class="w-px flex-1 min-h-5 bg-border/60"></div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Alice has authority over Charlie</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">RETRACT - was derived through Bob</p></div></div><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300 ring-emerald-300 dark:ring-emerald-700">3</div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Bob has authority over Charlie</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">KEEP - this fact is independent of Alice</p></div></div></div>
<p>Alice loses authority over both Bob and Charlie. But Bob keeps authority over Charlie because that relationship doesn&#x27;t depend on Alice&#x27;s management of Bob. The retraction needs to be precise - it can&#x27;t just cascade blindly down the graph.</p>
<p>OK, that&#x27;s manageable. But now consider the harder case.</p>
<h2 id="the-diamond-problem" node="[object Object]">The diamond problem</h2>
<p>Alice manages both Bob and Diana. Both Bob and Diana manage Charlie.</p>
<div class="my-8 space-y-2"><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-primary/10 border-primary/60">Alice</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Bob</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Charlie</div></div></div></div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Diana</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Charlie</div></div></div></div></div></div></div></div></div>
<p>Alice has authority over Charlie through <em>two independent paths</em>: through Bob and through Diana. The derived fact <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">authority(Alice, Charlie)</code> has two reasons to exist.</p>
<p>Now Bob stops managing Charlie:</p>
<div class="my-8 space-y-2"><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-primary/10 border-primary/60">Alice</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-muted/50 border-border text-muted-foreground">Bob</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Diana</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200">Charlie</div></div></div></div></div></div></div></div></div>
<p>Should Alice lose authority over Charlie? <strong>No.</strong> The path through Diana still supports it.</p>
<p>Now Diana also stops managing Charlie:</p>
<div class="my-8 space-y-2"><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-primary/10 border-primary/60">Alice</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-muted/50 border-border text-muted-foreground">Bob</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-muted/50 border-border text-muted-foreground">Diana</div></div></div></div></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200 font-medium">Charlie (no paths remain)</div></div></div>
<p><em>Now</em> Alice should lose authority over Charlie. Both supporting paths are gone.</p>
<p>This is the multiple derivation path problem, and it&#x27;s what makes correct retraction genuinely difficult. A derived conclusion should only disappear when <em>every</em> path that supports it has been removed. Not when the first path is removed. Not when most paths are removed. Only when the count reaches zero.</p>
<h2 id="how-most-systems-get-this-wrong" node="[object Object]">How most systems get this wrong</h2>
<p>There are three common approaches, and each fails in a different way.</p>
<p><strong>Approach 1: Don&#x27;t retract derived data at all.</strong> Many systems are append-only for derived conclusions. You can mark a source fact as deleted, but the derived facts remain in whatever cache, index, or materialized view they were written to. This is the &quot;phantom permissions&quot; problem - users retain access that should have been revoked. It&#x27;s also the &quot;ghost recommendations&quot; problem - discontinued products keep showing up because the derived recommendation was never cleaned up.</p>
<p><strong>Approach 2: Recompute everything from scratch.</strong> Throw away all derived data and re-derive it all. This is correct but expensive. On a knowledge graph with millions of derived facts, recomputation takes seconds or minutes. You can run it as a batch job, but between batch runs, your data is potentially inconsistent.</p>
<p><strong>Approach 3: Delete derived facts that &quot;look related.&quot;</strong> Walk from the retracted fact and delete anything downstream. This is fast, but it&#x27;s wrong whenever the diamond problem appears. You&#x27;ll delete conclusions that should have survived because they had alternative derivation paths.</p>
<div class="my-8 space-y-2"><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-primary/10 border-primary/60">Approaches compared</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Append-only (no retraction)</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200 font-medium">Simple retraction: No</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200 font-medium">Diamond problem: No</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-muted/50 border-border text-muted-foreground">Performance: N/A</div></div></div></div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Full recomputation</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200">Simple retraction: Yes</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200">Diamond problem: Yes</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200 font-medium">Performance: Slow (seconds to minutes)</div></div></div></div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Naive cascade deletion</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200">Simple retraction: Yes</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200 font-medium">Diamond problem: No (deletes too much)</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200 font-medium">Performance: Fast but incorrect</div></div></div></div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Weighted differences (InputLayer)</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200">Simple retraction: Yes</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200">Diamond problem: Yes</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200">Performance: Fast and correct</div></div></div></div></div></div></div></div></div>
<h2 id="how-inputlayer-solves-it-weighted-differences" node="[object Object]">How InputLayer solves it: weighted differences</h2>
<p>InputLayer is built on Differential Dataflow, which represents every derived fact as a weighted record. The weight counts the number of independent derivation paths that support the conclusion.</p>
<p>Here&#x27;s the diamond example, step by step:</p>
<div class="my-8"><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-muted text-muted-foreground ring-border">1</div><div class="w-px flex-1 min-h-5 bg-border/60"></div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Initial state: Alice manages Bob and Diana, both manage Charlie</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">authority(Alice, Charlie) has weight 2</p></div></div><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300 ring-emerald-300 dark:ring-emerald-700">2</div><div class="w-px flex-1 min-h-5 bg-border/60"></div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Remove &quot;Bob manages Charlie&quot;: -1 via Bob path</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">Weight is now 1 - conclusion SURVIVES</p></div></div><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 ring-red-300 dark:ring-red-700">3</div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Remove &quot;Diana manages Charlie&quot;: -1 via Diana path</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">Weight is now 0 - conclusion RETRACTED</p></div></div></div>
<p>The engine doesn&#x27;t need to search for alternative paths or do any special-case reasoning. The weight arithmetic handles it automatically. And this works through any number of recursive levels - if the derivation chain is 10 hops deep with branching paths at every level, the weights still track correctly.</p>
<h2 id="retraction-through-recursive-chains" node="[object Object]">Retraction through recursive chains</h2>
<p>The diamond problem is hard enough with a single level of derivation. With recursion, it gets harder - but the weighted approach still handles it.</p>
<p>Consider a deeper hierarchy:</p>
<div class="my-8 overflow-x-auto"><div class="flex items-center justify-center gap-0 min-w-max px-2"><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Alice</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Bob</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Charlie</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Diana</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-primary/10 border-primary/60">Eve</div></div></div></div>
<p>The derived fact <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">authority(Alice, Eve)</code> goes through 4 hops. If you remove &quot;Charlie manages Diana,&quot; the engine needs to retract not just <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">authority(Charlie, Diana)</code> but also <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">authority(Alice, Diana)</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">authority(Bob, Diana)</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">authority(Alice, Eve)</code>, <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">authority(Bob, Eve)</code>, and <code class="bg-muted rounded px-1.5 py-0.5 font-mono text-sm" node="[object Object]">authority(Charlie, Eve)</code> - every derived authority that passed through the Charlie-Diana link.</p>
<p>But if Diana also reports to someone else (say, Frank, who reports to Alice through a different branch), some of those authority relationships might survive through the alternative path.</p>
<p>The engine tracks all of this through differences. Each removal spreads as a -1 difference through the derivation graph. At each node, the difference combines with existing weights. Conclusions retract when and only when their weight reaches zero. No manual reasoning about paths needed.</p>
<h2 id="why-this-matters-three-real-scenarios" node="[object Object]">Why this matters: three real scenarios</h2>
<p><strong>Access control:</strong> When someone leaves the company, every permission derived through their position needs to disappear. But only the permissions that were <em>exclusively</em> derived through their position. If a document was accessible through two independent authorization paths and one is removed, access should continue through the remaining path. Getting this wrong means either phantom permissions (security risk) or over-retraction (broken access for people who should still have it).</p>
<p><strong>Recommendations:</strong> When a product is discontinued, every recommendation that included it should vanish. If a recommendation was &quot;users who bought X also bought Y,&quot; and Y is discontinued, the recommendation disappears. But if Y was also recommended through a different signal (semantic similarity, category affinity), that recommendation should survive through the remaining signal.</p>
<p><strong>Compliance:</strong> When an entity is removed from a sanctions list, every downstream flag derived from that designation should clear. But if an entity had sanctions exposure through two different ownership paths, removing one designation should correctly preserve the remaining exposure. Your compliance team should not be chasing alerts that are no longer valid. They should also not miss alerts that are still valid because the retraction was too aggressive.</p>
<h2 id="performance" node="[object Object]">Performance</h2>
<p>Correct retraction is only useful if it&#x27;s fast enough to happen in real time. If propagating a retraction takes seconds, you&#x27;re back to batch processing.</p>
<div class="my-4 overflow-x-auto"><table class="w-full border-collapse" node="[object Object]"><thead><tr><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Operation</th><th class="border px-4 py-2 text-left font-semibold bg-muted/50" node="[object Object]">Time (2,000-node graph)</th></tr></thead><tbody><tr><td class="border px-4 py-2" node="[object Object]">Retract 1 edge, propagate all downstream changes</td><td class="border px-4 py-2" node="[object Object]">&lt;10ms</td></tr><tr><td class="border px-4 py-2" node="[object Object]">Retract 10 edges, propagate all downstream changes</td><td class="border px-4 py-2" node="[object Object]">~100ms</td></tr><tr><td class="border px-4 py-2" node="[object Object]">Retract 100 edges, propagate all downstream changes</td><td class="border px-4 py-2" node="[object Object]">~1 second</td></tr></tbody></table></div>
<p>These numbers come from our benchmark graph with ~400,000 derived relationships. The incremental approach means each retraction only touches the affected portion of the derivation graph. The total graph size barely matters - what matters is the size of the ripple effect from the specific retraction.</p>
<h2 id="getting-started" node="[object Object]">Getting started</h2>
<p>If you want to see correct retraction in action, the <a node="[object Object]" href="/docs/guides/quickstart/">quickstart guide</a> walks through a hands-on example. The <a node="[object Object]" href="/docs/guides/recursion/">recursion documentation</a> explains how recursive rules interact with retraction. And our <a node="[object Object]" href="/blog/benchmarks-1587x-faster-recursive-queries/">benchmarks post</a> covers the performance characteristics in detail.</p>
<pre class="rounded-lg bg-[var(--code-bg)] p-4 overflow-x-auto mb-4 text-sm font-mono" node="[object Object]"><code class="language-bash text-sm"><span class="syn-builtin">docker</span> run <span class="syn-meta">-p</span> 8080:8080 ghcr.io/inputlayer/inputlayer</code></pre></div></article><section class="border-t border-border/50"><div class="mx-auto max-w-6xl px-6 py-16"><div class="relative rounded-2xl border border-border bg-gradient-to-br from-primary/10 via-transparent to-primary/5 p-12 text-center space-y-6"><h2 class="text-3xl font-bold tracking-tight">Ready to get started?</h2><p class="text-muted-foreground text-lg max-w-xl mx-auto">InputLayer is open-source. Pull the Docker image and start building.</p><div class="flex flex-wrap justify-center gap-3 pt-2"><a class="inline-flex items-center gap-2 rounded-md bg-primary px-6 py-3 text-sm font-medium text-primary-foreground hover:bg-primary/90 transition-colors" href="/docs/">Read the docs<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right h-4 w-4"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 rounded-md border border-border bg-background px-6 py-3 text-sm font-medium hover:bg-secondary transition-colors">View on GitHub<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3.5 w-3.5"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></div></div></div></section></main><footer class="border-t border-border/50 bg-card/50"><div class="mx-auto max-w-6xl px-6 py-12"><div class="grid grid-cols-2 gap-8 md:grid-cols-4 lg:gap-12"><div><h3 class="text-sm font-semibold text-foreground mb-3">Product</h3><ul class="space-y-2"><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/#features">Features</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/use-cases/">Use Cases</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/compare/">Compare</a></li><li><a href="https://demo.inputlayer.ai" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">Demo<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li></ul></div><div><h3 class="text-sm font-semibold text-foreground mb-3">Resources</h3><ul class="space-y-2"><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/">Documentation</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/blog/">Blog</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/guides/quickstart/">Quickstart</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/guides/python-sdk/">Python SDK</a></li></ul></div><div><h3 class="text-sm font-semibold text-foreground mb-3">Company</h3><ul class="space-y-2"><li><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">GitHub<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li><li><a href="https://github.com/inputlayer/inputlayer/blob/main/LICENSE" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">License<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li></ul></div><div><h3 class="text-sm font-semibold text-foreground mb-3">Community</h3><ul class="space-y-2"><li><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">Star on GitHub<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li><li><a href="https://github.com/inputlayer/inputlayer/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">Contributing<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li></ul></div></div><div class="mt-10 flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-border/50 pt-8"><div class="flex items-center gap-4"><span class="inline-flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg><span class="font-extrabold tracking-tight text-base">InputLayer</span></span><span class="text-sm text-muted-foreground">AGPL-3.0 License</span></div><p class="text-xs text-muted-foreground">A symbolic reasoning engine for AI agents.</p></div></div></footer></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1942,[\"177\",\"static/chunks/app/layout-7e9963bf811be36b.js\"],\"ThemeProvider\"]\n3:I[7121,[],\"\"]\n4:I[4581,[],\"\"]\n6:I[484,[],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[484,[],\"ViewportBoundary\"]\nb:I[484,[],\"MetadataBoundary\"]\nd:I[7123,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/4bd7a24b7976d4e6.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"05bjYGyiAumoEMBrfWHih\",\"c\":[\"\",\"blog\",\"correct-retraction-why-delete-should-actually-delete\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"correct-retraction-why-delete-should-actually-delete\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4bd7a24b7976d4e6.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_188709 __variable_9a8899 font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:I[1268,[\"758\",\"static/chunks/758-3cb69ce377cde046.js\",\"121\",\"static/chunks/121-aece4f809b101dc1.js\",\"830\",\"static/chunks/830-dbae36b1030f3d7c.js\",\"689\",\"static/chunks/689-4fcf9680fdc90283.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-a68506d98e2282cb.js\"],\"BlogPostClient\"]\nf:T25cb,"])</script><script>self.__next_f.push([1,"\n# Correct Retraction: Why Delete Should Actually Delete\n\nThree months after a security incident, the forensics team discovers something troubling. A former employee - let's call him Bob - had his access revoked on the day he left. His account was deactivated. His role was removed from the auth system.\n\nBut Bob had authority over a team of six people. Those six people had authored documents. The system had derived that Bob's manager, Alice, could access those documents through Bob. When Bob left, his direct access disappeared. But Alice's transitive access to those documents - the part that was *derived* through Bob's position - was never cleaned up.\n\nFor three months, Alice had access to documents she shouldn't have been able to see. Not because anyone made an error, but because the system didn't properly retract derived conclusions when a source fact was removed.\n\nThis is the correct retraction problem. And it's one of the most under-appreciated issues in data systems that derive conclusions from connected facts.\n\n## Simple on the surface, hard underneath\n\nAt first glance, retraction seems trivial. Delete a fact, delete everything that depended on it. Done.\n\nLet's walk through why it's not that simple.\n\nAlice manages Bob. Bob manages Charlie. The system derives transitive authority:\n\n```tree\nAlice [primary]\n  Bob (direct report)\n    Charlie (Bob's direct report)\n```\n\n```steps\nAlice has authority over Bob :: direct\nBob has authority over Charlie :: direct\nAlice has authority over Charlie :: transitive: Alice to Bob to Charlie\n```\n\nBob leaves the company. You remove \"Alice manages Bob.\" What should happen?\n\n```steps\nAlice has authority over Bob :: RETRACT - no longer manages him [highlight]\nAlice has authority over Charlie :: RETRACT - was derived through Bob [highlight]\nBob has authority over Charlie :: KEEP - this fact is independent of Alice [success]\n```\n\nAlice loses authority over both Bob and Charlie. But Bob keeps authority over Charlie because that relationship doesn't depend on Alice's management of Bob. The retraction needs to be precise - it can't just cascade blindly down the graph.\n\nOK, that's manageable. But now consider the harder case.\n\n## The diamond problem\n\nAlice manages both Bob and Diana. Both Bob and Diana manage Charlie.\n\n```tree\nAlice [primary]\n  Bob\n    Charlie\n  Diana\n    Charlie\n```\n\nAlice has authority over Charlie through *two independent paths*: through Bob and through Diana. The derived fact `authority(Alice, Charlie)` has two reasons to exist.\n\nNow Bob stops managing Charlie:\n\n```tree\nAlice [primary]\n  Bob [muted]\n  Diana\n    Charlie [success]\n```\n\nShould Alice lose authority over Charlie? **No.** The path through Diana still supports it.\n\nNow Diana also stops managing Charlie:\n\n```tree\nAlice [primary]\n  Bob [muted]\n  Diana [muted]\nCharlie (no paths remain) [highlight]\n```\n\n*Now* Alice should lose authority over Charlie. Both supporting paths are gone.\n\nThis is the multiple derivation path problem, and it's what makes correct retraction genuinely difficult. A derived conclusion should only disappear when *every* path that supports it has been removed. Not when the first path is removed. Not when most paths are removed. Only when the count reaches zero.\n\n## How most systems get this wrong\n\nThere are three common approaches, and each fails in a different way.\n\n**Approach 1: Don't retract derived data at all.** Many systems are append-only for derived conclusions. You can mark a source fact as deleted, but the derived facts remain in whatever cache, index, or materialized view they were written to. This is the \"phantom permissions\" problem - users retain access that should have been revoked. It's also the \"ghost recommendations\" problem - discontinued products keep showing up because the derived recommendation was never cleaned up.\n\n**Approach 2: Recompute everything from scratch.** Throw away all derived data and re-derive it all. This is correct but expensive. On a knowledge graph with millions of derived facts, recomputation takes seconds or minutes. You can run it as a batch job, but between batch runs, your data is potentially inconsistent.\n\n**Approach 3: Delete derived facts that \"look related.\"** Walk from the retracted fact and delete anything downstream. This is fast, but it's wrong whenever the diamond problem appears. You'll delete conclusions that should have survived because they had alternative derivation paths.\n\n```tree\nApproaches compared [primary]\n  Append-only (no retraction)\n    Simple retraction: No [highlight]\n    Diamond problem: No [highlight]\n    Performance: N/A [muted]\n  Full recomputation\n    Simple retraction: Yes [success]\n    Diamond problem: Yes [success]\n    Performance: Slow (seconds to minutes) [highlight]\n  Naive cascade deletion\n    Simple retraction: Yes [success]\n    Diamond problem: No (deletes too much) [highlight]\n    Performance: Fast but incorrect [highlight]\n  Weighted differences (InputLayer)\n    Simple retraction: Yes [success]\n    Diamond problem: Yes [success]\n    Performance: Fast and correct [success]\n```\n\n## How InputLayer solves it: weighted differences\n\nInputLayer is built on Differential Dataflow, which represents every derived fact as a weighted record. The weight counts the number of independent derivation paths that support the conclusion.\n\nHere's the diamond example, step by step:\n\n```steps\nInitial state: Alice manages Bob and Diana, both manage Charlie :: authority(Alice, Charlie) has weight 2\nRemove \"Bob manages Charlie\": -1 via Bob path :: Weight is now 1 - conclusion SURVIVES [success]\nRemove \"Diana manages Charlie\": -1 via Diana path :: Weight is now 0 - conclusion RETRACTED [highlight]\n```\n\nThe engine doesn't need to search for alternative paths or do any special-case reasoning. The weight arithmetic handles it automatically. And this works through any number of recursive levels - if the derivation chain is 10 hops deep with branching paths at every level, the weights still track correctly.\n\n## Retraction through recursive chains\n\nThe diamond problem is hard enough with a single level of derivation. With recursion, it gets harder - but the weighted approach still handles it.\n\nConsider a deeper hierarchy:\n\n```flow\nAlice -\u003e Bob -\u003e Charlie -\u003e Diana -\u003e Eve [primary]\n```\n\nThe derived fact `authority(Alice, Eve)` goes through 4 hops. If you remove \"Charlie manages Diana,\" the engine needs to retract not just `authority(Charlie, Diana)` but also `authority(Alice, Diana)`, `authority(Bob, Diana)`, `authority(Alice, Eve)`, `authority(Bob, Eve)`, and `authority(Charlie, Eve)` - every derived authority that passed through the Charlie-Diana link.\n\nBut if Diana also reports to someone else (say, Frank, who reports to Alice through a different branch), some of those authority relationships might survive through the alternative path.\n\nThe engine tracks all of this through differences. Each removal spreads as a -1 difference through the derivation graph. At each node, the difference combines with existing weights. Conclusions retract when and only when their weight reaches zero. No manual reasoning about paths needed.\n\n## Why this matters: three real scenarios\n\n**Access control:** When someone leaves the company, every permission derived through their position needs to disappear. But only the permissions that were *exclusively* derived through their position. If a document was accessible through two independent authorization paths and one is removed, access should continue through the remaining path. Getting this wrong means either phantom permissions (security risk) or over-retraction (broken access for people who should still have it).\n\n**Recommendations:** When a product is discontinued, every recommendation that included it should vanish. If a recommendation was \"users who bought X also bought Y,\" and Y is discontinued, the recommendation disappears. But if Y was also recommended through a different signal (semantic similarity, category affinity), that recommendation should survive through the remaining signal.\n\n**Compliance:** When an entity is removed from a sanctions list, every downstream flag derived from that designation should clear. But if an entity had sanctions exposure through two different ownership paths, removing one designation should correctly preserve the remaining exposure. Your compliance team should not be chasing alerts that are no longer valid. They should also not miss alerts that are still valid because the retraction was too aggressive.\n\n## Performance\n\nCorrect retraction is only useful if it's fast enough to happen in real time. If propagating a retraction takes seconds, you're back to batch processing.\n\n| Operation | Time (2,000-node graph) |\n|---|---|\n| Retract 1 edge, propagate all downstream changes | \u003c10ms |\n| Retract 10 edges, propagate all downstream changes | ~100ms |\n| Retract 100 edges, propagate all downstream changes | ~1 second |\n\nThese numbers come from our benchmark graph with ~400,000 derived relationships. The incremental approach means each retraction only touches the affected portion of the derivation graph. The total graph size barely matters - what matters is the size of the ripple effect from the specific retraction.\n\n## Getting started\n\nIf you want to see correct retraction in action, the [quickstart guide](/docs/guides/quickstart/) walks through a hands-on example. The [recursion documentation](/docs/guides/recursion/) explains how recursive rules interact with retraction. And our [benchmarks post](/blog/benchmarks-1587x-faster-recursive-queries/) covers the performance characteristics in detail.\n\n```bash\ndocker run -p 8080:8080 ghcr.io/inputlayer/inputlayer\n```"])</script><script>self.__next_f.push([1,"5:[\"$\",\"$Le\",null,{\"post\":{\"slug\":\"correct-retraction-why-delete-should-actually-delete\",\"title\":\"Correct Retraction: Why Delete Should Actually Delete\",\"date\":\"2026-01-15\",\"author\":\"InputLayer Team\",\"category\":\"Engineering\",\"excerpt\":\"When you delete a fact from a knowledge graph, what happens to everything that was derived from it? Most systems get this wrong. Here's why it matters and how InputLayer handles it.\",\"content\":\"$f\",\"toc\":[{\"level\":2,\"text\":\"Simple on the surface, hard underneath\",\"id\":\"simple-on-the-surface-hard-underneath\"},{\"level\":2,\"text\":\"The diamond problem\",\"id\":\"the-diamond-problem\"},{\"level\":2,\"text\":\"How most systems get this wrong\",\"id\":\"how-most-systems-get-this-wrong\"},{\"level\":2,\"text\":\"How InputLayer solves it: weighted differences\",\"id\":\"how-inputlayer-solves-it-weighted-differences\"},{\"level\":2,\"text\":\"Retraction through recursive chains\",\"id\":\"retraction-through-recursive-chains\"},{\"level\":2,\"text\":\"Why this matters: three real scenarios\",\"id\":\"why-this-matters-three-real-scenarios\"},{\"level\":2,\"text\":\"Performance\",\"id\":\"performance\"},{\"level\":2,\"text\":\"Getting started\",\"id\":\"getting-started\"}]},\"slug\":\"correct-retraction-why-delete-should-actually-delete\"}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[6869,[],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"InputLayer - A symbolic reasoning engine for AI agents\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/icon.svg\"}],[\"$\",\"$L10\",\"3\",{}]]\n8:null\n"])</script></body></html>