<!DOCTYPE html><!--05bjYGyiAumoEMBrfWHih--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/4bd7a24b7976d4e6.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js"/><script src="/_next/static/chunks/4bd1b696-deba172d32c79f82.js" async=""></script><script src="/_next/static/chunks/794-275dc9ebd3a29fbf.js" async=""></script><script src="/_next/static/chunks/main-app-1fa5b694e5d36a75.js" async=""></script><script src="/_next/static/chunks/app/layout-7e9963bf811be36b.js" async=""></script><script src="/_next/static/chunks/758-3cb69ce377cde046.js" async=""></script><script src="/_next/static/chunks/121-aece4f809b101dc1.js" async=""></script><script src="/_next/static/chunks/830-dbae36b1030f3d7c.js" async=""></script><script src="/_next/static/chunks/689-4fcf9680fdc90283.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-a68506d98e2282cb.js" async=""></script><meta name="next-size-adjust" content=""/><title>InputLayer - A symbolic reasoning engine for AI agents</title><meta name="description" content="Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system."/><link rel="icon" href="/icon.svg"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_188709 __variable_9a8899 font-sans antialiased"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","dark",null,["light","dark"],null,true,true)</script><div class="flex flex-col min-h-dvh"><header class="sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"><div class="flex h-14 items-center px-6"><a class="mr-8" href="/"><span class="inline-flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg><span class="font-extrabold tracking-tight text-lg">InputLayer</span></span></a><nav class="hidden md:flex items-center gap-6 text-sm"><a class="text-muted-foreground transition-colors hover:text-foreground" href="/docs/">Docs</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/blog/">Blog</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/use-cases/">Use Cases</a><a class="text-muted-foreground transition-colors hover:text-foreground" href="/compare/">Compare</a><a href="https://demo.inputlayer.ai" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-muted-foreground transition-colors hover:text-foreground">Demo<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></nav><div class="ml-auto flex items-center gap-3"><div class="inline-flex items-center gap-1.5"><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star h-3.5 w-3.5"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg><span>Star</span></a><a href="https://github.com/inputlayer/inputlayer/fork" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1.5 rounded-md border border-border bg-secondary/50 px-2.5 py-1 text-xs font-medium text-muted-foreground transition-colors hover:text-foreground hover:bg-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-git-fork h-3.5 w-3.5"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg><span>Fork</span></a></div><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 h-9 w-9"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun h-4 w-4"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg></button><div class="md:hidden"><button class="inline-flex items-center justify-center rounded-md p-2 text-muted-foreground hover:text-foreground hover:bg-secondary transition-colors" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></div></header><main class="flex-1"><section class="border-b border-border/50"><div class="relative overflow-hidden"><div class="absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent"></div><div class="relative mx-auto max-w-6xl px-6 py-16 lg:py-20"><nav class="mb-4 flex items-center gap-2 text-sm text-muted-foreground"><span class="flex items-center gap-2"><a class="hover:text-foreground transition-colors" href="/blog/">Blog</a></span></nav><h1 class="text-3xl font-extrabold tracking-tight sm:text-4xl lg:text-5xl max-w-3xl">Why We Built InputLayer on Differential Dataflow</h1><p class="mt-4 text-lg text-muted-foreground max-w-2xl">January 30, 2026 Â· InputLayer Team</p></div></div></section><article class="mx-auto max-w-3xl px-6 py-12"><div class="docs-prose"><h1 id="why-we-built-inputlayer-on-differential-dataflow" node="[object Object]">Why We Built InputLayer on Differential Dataflow</h1>
<p>Every engineering team has that one decision that shaped everything that came after. For us, it was choosing <a href="https://github.com/TimelyDataflow/differential-dataflow" target="_blank" rel="noopener noreferrer" node="[object Object]">Differential Dataflow</a> as the computation engine underneath InputLayer. It determined what we could build, what performance we could offer, and which problems we could solve that other systems can&#x27;t.</p>
<p>This is the story of why we made that choice and what it means for the people building on InputLayer today.</p>
<h2 id="the-problem-that-started-everything" node="[object Object]">The problem that started everything</h2>
<p>We wanted to build a knowledge graph engine that could do something deceptively simple: keep derived conclusions up to date when facts change.</p>
<p>That sounds straightforward until you think about scale. Imagine a knowledge graph with 100,000 facts and 50 rules that derive new conclusions from those facts. Some of those rules are recursive - their output feeds back into their input. The initial computation produces millions of derived facts. Fine - that&#x27;s a one-time cost.</p>
<p>But then a single fact changes. One employee transfers departments. One entity gets added to a sanctions list. One product goes out of stock.</p>
<div class="my-8 flex flex-col items-center gap-0"><div class="rounded-lg border px-5 py-2.5 text-sm text-center max-w-xs w-full shadow-sm bg-card border-border">100,000 source facts feed into 50 rules</div><div class="flex flex-col items-center py-0.5"><div class="w-px h-2.5 bg-border"></div><span class="text-[11px] text-muted-foreground leading-tight py-px">initial computation</span><div class="w-px h-2.5 bg-border"></div><div class="w-0 h-0 border-l-[5px] border-r-[5px] border-t-[6px] border-l-transparent border-r-transparent border-t-border"></div></div><div class="rounded-lg border px-5 py-2.5 text-sm text-center max-w-xs w-full shadow-sm bg-primary/10 border-primary/60">2,000,000 derived facts</div><div class="flex flex-col items-center py-0.5"><div class="w-px h-2.5 bg-border"></div><span class="text-[11px] text-muted-foreground leading-tight py-px">then one fact changes</span><div class="w-px h-2.5 bg-border"></div><div class="w-0 h-0 border-l-[5px] border-r-[5px] border-t-[6px] border-l-transparent border-r-transparent border-t-border"></div></div><div class="rounded-lg border px-5 py-2.5 text-sm text-center max-w-xs w-full shadow-sm bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200 font-medium">How many of those 2M derived facts are affected?</div><div class="rounded-lg px-5 py-2.5 text-sm text-center max-w-xs w-full shadow-sm bg-primary/10 border-2 border-primary font-medium">Usually just a few hundred. But the naive approach recomputes all 2 million.</div></div>
<p>With a naive approach, you throw away all 2 million derived facts and recompute them from scratch. For small graphs, that&#x27;s fast enough. For production workloads, it doesn&#x27;t work. At 11 seconds per recomputation on a 2,000-node graph, you&#x27;re locked into batch processing. Real-time permission checks, live compliance screening, instant recommendation updates - none of that is practical.</p>
<p>We needed an engine that could update just the affected derivations, correctly, in milliseconds.</p>
<h2 id="what-we-evaluated" node="[object Object]">What we evaluated</h2>
<p>We spent months evaluating different approaches. Each one taught us something about what we needed.</p>
<p><strong>Batch-oriented engines</strong> are the gold standard for one-time rule evaluation. They compile rules into extremely efficient programs that process an entire dataset in one pass. Some even generate low-level code that runs blazingly fast for batch workloads.</p>
<p>The limitation: there&#x27;s no concept of &quot;update.&quot; If you add a fact, you rerun the entire program. For a knowledge graph that changes frequently - which is most production use cases - that means paying the full computation cost every time anything changes.</p>
<p><strong>Graph databases</strong> offer incremental capabilities for simple path queries. But their query languages weren&#x27;t designed for recursive derivation. They can traverse stored edges, but they can&#x27;t derive <em>new</em> edges based on rules and then recursively reason over those derived edges. And they don&#x27;t maintain results incrementally when the graph changes.</p>
<p><strong>Building from scratch</strong> was tempting. We could design an incremental engine perfectly suited to our needs. But correct incremental maintenance through recursive fixpoints is one of the hardest problems in database research. Tracking which derived facts should retract when a source fact is removed - especially when derived facts might have multiple supporting paths - is notoriously subtle. Teams that have tried typically spend years before reaching production quality.</p>
<div class="my-8 space-y-2"><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-primary/10 border-primary/60">What we needed</div><div class="ml-3.5 mt-1.5 border-l-2 border-border/50 pl-5 space-y-1.5 pb-0.5"><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Fast batch computation</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Incremental updates (not full recompute)</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Recursive derivation (rules that reference themselves)</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Correct retraction (delete actually deletes)</div></div></div><div class="relative"><div class="absolute left-[-22px] top-[13px] w-[18px] h-px bg-border/50"></div><div><div class="rounded-md border px-3 py-1.5 text-sm inline-block shadow-sm bg-card border-border">Reasonable time to production</div></div></div></div></div></div>
<div class="my-8 rounded-r-lg border border-l-4 px-5 py-4 border-l-amber-400 dark:border-l-amber-500 bg-amber-50/60 dark:bg-amber-950/20"><p class="text-sm leading-relaxed whitespace-pre-line">No single existing approach gave us everything we needed. Batch engines lacked incremental updates. Graph databases lacked recursive derivation. Building from scratch would take years.</p></div>
<h2 id="finding-differential-dataflow" node="[object Object]">Finding Differential Dataflow</h2>
<p>Then we found Frank McSherry&#x27;s work on <a href="https://github.com/TimelyDataflow/differential-dataflow" target="_blank" rel="noopener noreferrer" node="[object Object]">Differential Dataflow</a>, built on top of <a href="https://github.com/TimelyDataflow/timely-dataflow" target="_blank" rel="noopener noreferrer" node="[object Object]">Timely Dataflow</a>. Both are Rust libraries. The performance was a bonus. The computational model was the real discovery.</p>
<p>The core idea is simple enough to explain in a paragraph: instead of storing derived data as static results, the engine represents everything as <em>weighted differences</em>. Adding a fact is a +1 difference. Removing a fact is a -1 difference. Every computation in the system processes differences in and produces differences out. This means every operation is naturally incremental - it never looks at the whole dataset, only at what changed.</p>
<div class="my-8 overflow-x-auto"><div class="flex items-center justify-center gap-0 min-w-max px-2"><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Traditional: Input facts</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Compute ALL</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Static results</div></div></div></div>
<div class="my-8 overflow-x-auto"><div class="flex items-center justify-center gap-0 min-w-max px-2"><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">After change (traditional): Changed fact</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-red-50 dark:bg-red-950/30 border-red-300 dark:border-red-800 text-red-800 dark:text-red-200 font-medium">Compute ALL again</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Rebuilt results</div></div></div></div>
<div class="my-8 overflow-x-auto"><div class="flex items-center justify-center gap-0 min-w-max px-2"><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Differential: Changed fact</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-emerald-50 dark:bg-emerald-950/30 border-emerald-300 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200">Compute DIFFERENCE only</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Only changed derivations</div></div></div></div>
<h2 id="how-it-handles-the-hard-part-recursive-retraction" node="[object Object]">How it handles the hard part: recursive retraction</h2>
<p>The real test of an incremental system isn&#x27;t additions - it&#x27;s deletions. And specifically, deletions through recursive derivation chains.</p>
<p>Here&#x27;s the scenario that breaks naive incremental systems. Alice has authority over Charlie through two independent paths:</p>
<div class="my-8 overflow-x-auto"><div class="flex items-center justify-center gap-0 min-w-max px-2"><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Path 1: Alice</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Bob</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-primary/10 border-primary/60">Charlie</div></div></div></div>
<div class="my-8 overflow-x-auto"><div class="flex items-center justify-center gap-0 min-w-max px-2"><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Path 2: Alice</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-card border-border">Diana</div><div class="flex items-center px-1"><div class="w-5 h-px bg-border"></div><div class="w-0 h-0 border-t-[4px] border-b-[4px] border-l-[6px] border-t-transparent border-b-transparent border-l-border"></div></div></div><div class="flex items-center shrink-0"><div class="rounded-lg border px-4 py-2 text-sm shadow-sm whitespace-nowrap bg-primary/10 border-primary/60">Charlie</div></div></div></div>
<p>Remove Bob&#x27;s management of Charlie. Does Alice lose authority over Charlie? <em>No</em> - the path through Diana still supports it. Now remove Diana&#x27;s management of Charlie too. Does Alice lose authority over Charlie? <em>Yes</em> - there are no remaining paths.</p>
<p>Differential Dataflow handles this through its weight-based model. Each derived fact carries a weight representing the number of independent derivation paths. Removing a path decreases the weight. The fact only retracts when the weight hits zero.</p>
<div class="my-8"><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-muted text-muted-foreground ring-border">1</div><div class="w-px flex-1 min-h-5 bg-border/60"></div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Both paths exist: authority(Alice, Charlie) weight is 2</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">Alive</p></div></div><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300 ring-emerald-300 dark:ring-emerald-700">2</div><div class="w-px flex-1 min-h-5 bg-border/60"></div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Remove Bob&#x27;s path: weight drops to 1</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">Still alive - Diana&#x27;s path remains</p></div></div><div class="flex gap-3.5"><div class="flex flex-col items-center"><div class="w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ring-2 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 ring-red-300 dark:ring-red-700">3</div></div><div class="pb-5 pt-1 min-w-0"><p class="text-sm font-medium leading-snug">Remove Diana&#x27;s path: weight drops to 0</p><p class="text-xs text-muted-foreground mt-0.5 leading-snug">Retracted</p></div></div></div>
<p>This sounds simple in theory. In practice, getting it right through multiple levels of recursive derivation, where intermediate conclusions can also have multiple support paths, is extraordinarily difficult. Differential Dataflow solves it at the engine level, which means we didn&#x27;t have to.</p>
<h2 id="what-this-gives-inputlayer-users" node="[object Object]">What this gives InputLayer users</h2>
<p>Building on Differential Dataflow gave us three properties that show up directly in what you can build with InputLayer.</p>
<p><strong>Incremental maintenance:</strong> When a fact changes, only the affected derivations recompute. On a 2,000-node graph with 400,000 derived relationships, updating a single edge takes 6.83ms instead of 11.3 seconds. That&#x27;s a 1,652x speedup that turns batch-only workloads into real-time operations.</p>
<p><strong>Correct retraction:</strong> Delete a fact, and everything derived through it disappears - but only if there&#x27;s no alternative derivation path. Phantom permissions, stale recommendations, lingering compliance flags - these bugs simply don&#x27;t exist when the engine handles retraction correctly.</p>
<p><strong>Demand-driven evaluation:</strong> We combined Differential Dataflow with Magic Sets optimization, which rewrites recursive rules to only compute what&#x27;s needed for a specific query. Ask &quot;who does Alice have authority over?&quot; and the engine starts from Alice and follows only her paths - it doesn&#x27;t compute authority for the entire organization. Query time is proportional to the relevant portion of the graph.</p>
<h2 id="the-tradeoffs" node="[object Object]">The tradeoffs</h2>
<p>No engineering decision is free. Here&#x27;s what we trade.</p>
<p><strong>Memory:</strong> Differential Dataflow maintains operator state in memory. For very large datasets, memory usage grows with the size of the maintained derivations. We handle this with persistent storage - Parquet files plus a write-ahead log - that lets us recover state without keeping everything in memory indefinitely. But it&#x27;s a real consideration for very large knowledge graphs.</p>
<p><strong>Complexity floor:</strong> The Timely/Differential Dataflow programming model is powerful but has a steep learning curve. We invested significant engineering time building the abstraction layer that compiles high-level rules into efficient dataflow graphs. Users never touch the dataflow layer directly - but we do, and it required deep expertise to get right.</p>
<p><strong>Single-node:</strong> Currently, InputLayer runs on a single node. Timely Dataflow supports distributed computation, and that&#x27;s on our roadmap. But today, the engine is bounded by what a single machine can handle. For most knowledge graph workloads, that&#x27;s millions of facts and derived relationships - but it&#x27;s a real limit for truly massive datasets.</p>
<h2 id="where-the-choice-matters-most" node="[object Object]">Where the choice matters most</h2>
<p>The Differential Dataflow foundation matters most for use cases where data changes frequently and derived conclusions need to stay current. Access control hierarchies where people change roles regularly. Supply chain graphs where supplier status changes daily. Compliance systems where entity relationships and sanctions lists are updated constantly. Agent memory systems where new observations arrive continuously.</p>
<p>For batch-once-query-many workloads with no updates, a simpler engine would be fine. But the moment your facts change and you need derived conclusions to stay correct, the incremental approach pays for itself immediately.</p>
<p>Our <a node="[object Object]" href="/blog/benchmarks-1587x-faster-recursive-queries/">benchmarks post</a> has the specific numbers. And the <a node="[object Object]" href="/docs/guides/quickstart/">quickstart guide</a> gets you running in about 5 minutes so you can see it in action.</p></div></article><section class="border-t border-border/50"><div class="mx-auto max-w-6xl px-6 py-16"><div class="relative rounded-2xl border border-border bg-gradient-to-br from-primary/10 via-transparent to-primary/5 p-12 text-center space-y-6"><h2 class="text-3xl font-bold tracking-tight">Ready to get started?</h2><p class="text-muted-foreground text-lg max-w-xl mx-auto">InputLayer is open-source. Pull the Docker image and start building.</p><div class="flex flex-wrap justify-center gap-3 pt-2"><a class="inline-flex items-center gap-2 rounded-md bg-primary px-6 py-3 text-sm font-medium text-primary-foreground hover:bg-primary/90 transition-colors" href="/docs/">Read the docs<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right h-4 w-4"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></a><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 rounded-md border border-border bg-background px-6 py-3 text-sm font-medium hover:bg-secondary transition-colors">View on GitHub<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3.5 w-3.5"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></div></div></div></section></main><footer class="border-t border-border/50 bg-card/50"><div class="mx-auto max-w-6xl px-6 py-12"><div class="grid grid-cols-2 gap-8 md:grid-cols-4 lg:gap-12"><div><h3 class="text-sm font-semibold text-foreground mb-3">Product</h3><ul class="space-y-2"><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/#features">Features</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/use-cases/">Use Cases</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/compare/">Compare</a></li><li><a href="https://demo.inputlayer.ai" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">Demo<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li></ul></div><div><h3 class="text-sm font-semibold text-foreground mb-3">Resources</h3><ul class="space-y-2"><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/">Documentation</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/blog/">Blog</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/guides/quickstart/">Quickstart</a></li><li><a class="text-sm text-muted-foreground hover:text-foreground transition-colors" href="/docs/guides/python-sdk/">Python SDK</a></li></ul></div><div><h3 class="text-sm font-semibold text-foreground mb-3">Company</h3><ul class="space-y-2"><li><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">GitHub<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li><li><a href="https://github.com/inputlayer/inputlayer/blob/main/LICENSE" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">License<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li></ul></div><div><h3 class="text-sm font-semibold text-foreground mb-3">Community</h3><ul class="space-y-2"><li><a href="https://github.com/inputlayer/inputlayer" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">Star on GitHub<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li><li><a href="https://github.com/inputlayer/inputlayer/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors">Contributing<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a></li></ul></div></div><div class="mt-10 flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-border/50 pt-8"><div class="flex items-center gap-4"><span class="inline-flex items-center gap-1.5"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg><span class="font-extrabold tracking-tight text-base">InputLayer</span></span><span class="text-sm text-muted-foreground">AGPL-3.0 License</span></div><p class="text-xs text-muted-foreground">A symbolic reasoning engine for AI agents.</p></div></div></footer></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-bd6546b43ab2ecbf.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1942,[\"177\",\"static/chunks/app/layout-7e9963bf811be36b.js\"],\"ThemeProvider\"]\n3:I[7121,[],\"\"]\n4:I[4581,[],\"\"]\n6:I[484,[],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[484,[],\"ViewportBoundary\"]\nb:I[484,[],\"MetadataBoundary\"]\nd:I[7123,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/4bd7a24b7976d4e6.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"05bjYGyiAumoEMBrfWHih\",\"c\":[\"\",\"blog\",\"why-we-built-on-differential-dataflow\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"why-we-built-on-differential-dataflow\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4bd7a24b7976d4e6.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_188709 __variable_9a8899 font-sans antialiased\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"dark\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:I[1268,[\"758\",\"static/chunks/758-3cb69ce377cde046.js\",\"121\",\"static/chunks/121-aece4f809b101dc1.js\",\"830\",\"static/chunks/830-dbae36b1030f3d7c.js\",\"689\",\"static/chunks/689-4fcf9680fdc90283.js\",\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-a68506d98e2282cb.js\"],\"BlogPostClient\"]\nf:T256a,"])</script><script>self.__next_f.push([1,"\n# Why We Built InputLayer on Differential Dataflow\n\nEvery engineering team has that one decision that shaped everything that came after. For us, it was choosing [Differential Dataflow](https://github.com/TimelyDataflow/differential-dataflow) as the computation engine underneath InputLayer. It determined what we could build, what performance we could offer, and which problems we could solve that other systems can't.\n\nThis is the story of why we made that choice and what it means for the people building on InputLayer today.\n\n## The problem that started everything\n\nWe wanted to build a knowledge graph engine that could do something deceptively simple: keep derived conclusions up to date when facts change.\n\nThat sounds straightforward until you think about scale. Imagine a knowledge graph with 100,000 facts and 50 rules that derive new conclusions from those facts. Some of those rules are recursive - their output feeds back into their input. The initial computation produces millions of derived facts. Fine - that's a one-time cost.\n\nBut then a single fact changes. One employee transfers departments. One entity gets added to a sanctions list. One product goes out of stock.\n\n```chain\n100,000 source facts feed into 50 rules\n-- initial computation\n2,000,000 derived facts [primary]\n-- then one fact changes\nHow many of those 2M derived facts are affected? [highlight]\n=\u003e Usually just a few hundred. But the naive approach recomputes all 2 million.\n```\n\nWith a naive approach, you throw away all 2 million derived facts and recompute them from scratch. For small graphs, that's fast enough. For production workloads, it doesn't work. At 11 seconds per recomputation on a 2,000-node graph, you're locked into batch processing. Real-time permission checks, live compliance screening, instant recommendation updates - none of that is practical.\n\nWe needed an engine that could update just the affected derivations, correctly, in milliseconds.\n\n## What we evaluated\n\nWe spent months evaluating different approaches. Each one taught us something about what we needed.\n\n**Batch-oriented engines** are the gold standard for one-time rule evaluation. They compile rules into extremely efficient programs that process an entire dataset in one pass. Some even generate low-level code that runs blazingly fast for batch workloads.\n\nThe limitation: there's no concept of \"update.\" If you add a fact, you rerun the entire program. For a knowledge graph that changes frequently - which is most production use cases - that means paying the full computation cost every time anything changes.\n\n**Graph databases** offer incremental capabilities for simple path queries. But their query languages weren't designed for recursive derivation. They can traverse stored edges, but they can't derive *new* edges based on rules and then recursively reason over those derived edges. And they don't maintain results incrementally when the graph changes.\n\n**Building from scratch** was tempting. We could design an incremental engine perfectly suited to our needs. But correct incremental maintenance through recursive fixpoints is one of the hardest problems in database research. Tracking which derived facts should retract when a source fact is removed - especially when derived facts might have multiple supporting paths - is notoriously subtle. Teams that have tried typically spend years before reaching production quality.\n\n```tree\nWhat we needed [primary]\n  Fast batch computation\n  Incremental updates (not full recompute)\n  Recursive derivation (rules that reference themselves)\n  Correct retraction (delete actually deletes)\n  Reasonable time to production\n```\n\n```note\ntype: warning\nNo single existing approach gave us everything we needed. Batch engines lacked incremental updates. Graph databases lacked recursive derivation. Building from scratch would take years.\n```\n\n## Finding Differential Dataflow\n\nThen we found Frank McSherry's work on [Differential Dataflow](https://github.com/TimelyDataflow/differential-dataflow), built on top of [Timely Dataflow](https://github.com/TimelyDataflow/timely-dataflow). Both are Rust libraries. The performance was a bonus. The computational model was the real discovery.\n\nThe core idea is simple enough to explain in a paragraph: instead of storing derived data as static results, the engine represents everything as *weighted differences*. Adding a fact is a +1 difference. Removing a fact is a -1 difference. Every computation in the system processes differences in and produces differences out. This means every operation is naturally incremental - it never looks at the whole dataset, only at what changed.\n\n```flow\nTraditional: Input facts -\u003e Compute ALL -\u003e Static results\n```\n\n```flow\nAfter change (traditional): Changed fact -\u003e Compute ALL again [highlight] -\u003e Rebuilt results\n```\n\n```flow\nDifferential: Changed fact -\u003e Compute DIFFERENCE only [success] -\u003e Only changed derivations\n```\n\n## How it handles the hard part: recursive retraction\n\nThe real test of an incremental system isn't additions - it's deletions. And specifically, deletions through recursive derivation chains.\n\nHere's the scenario that breaks naive incremental systems. Alice has authority over Charlie through two independent paths:\n\n```flow\nPath 1: Alice -\u003e Bob -\u003e Charlie [primary]\n```\n\n```flow\nPath 2: Alice -\u003e Diana -\u003e Charlie [primary]\n```\n\nRemove Bob's management of Charlie. Does Alice lose authority over Charlie? *No* - the path through Diana still supports it. Now remove Diana's management of Charlie too. Does Alice lose authority over Charlie? *Yes* - there are no remaining paths.\n\nDifferential Dataflow handles this through its weight-based model. Each derived fact carries a weight representing the number of independent derivation paths. Removing a path decreases the weight. The fact only retracts when the weight hits zero.\n\n```steps\nBoth paths exist: authority(Alice, Charlie) weight is 2 :: Alive\nRemove Bob's path: weight drops to 1 :: Still alive - Diana's path remains [success]\nRemove Diana's path: weight drops to 0 :: Retracted [highlight]\n```\n\nThis sounds simple in theory. In practice, getting it right through multiple levels of recursive derivation, where intermediate conclusions can also have multiple support paths, is extraordinarily difficult. Differential Dataflow solves it at the engine level, which means we didn't have to.\n\n## What this gives InputLayer users\n\nBuilding on Differential Dataflow gave us three properties that show up directly in what you can build with InputLayer.\n\n**Incremental maintenance:** When a fact changes, only the affected derivations recompute. On a 2,000-node graph with 400,000 derived relationships, updating a single edge takes 6.83ms instead of 11.3 seconds. That's a 1,652x speedup that turns batch-only workloads into real-time operations.\n\n**Correct retraction:** Delete a fact, and everything derived through it disappears - but only if there's no alternative derivation path. Phantom permissions, stale recommendations, lingering compliance flags - these bugs simply don't exist when the engine handles retraction correctly.\n\n**Demand-driven evaluation:** We combined Differential Dataflow with Magic Sets optimization, which rewrites recursive rules to only compute what's needed for a specific query. Ask \"who does Alice have authority over?\" and the engine starts from Alice and follows only her paths - it doesn't compute authority for the entire organization. Query time is proportional to the relevant portion of the graph.\n\n## The tradeoffs\n\nNo engineering decision is free. Here's what we trade.\n\n**Memory:** Differential Dataflow maintains operator state in memory. For very large datasets, memory usage grows with the size of the maintained derivations. We handle this with persistent storage - Parquet files plus a write-ahead log - that lets us recover state without keeping everything in memory indefinitely. But it's a real consideration for very large knowledge graphs.\n\n**Complexity floor:** The Timely/Differential Dataflow programming model is powerful but has a steep learning curve. We invested significant engineering time building the abstraction layer that compiles high-level rules into efficient dataflow graphs. Users never touch the dataflow layer directly - but we do, and it required deep expertise to get right.\n\n**Single-node:** Currently, InputLayer runs on a single node. Timely Dataflow supports distributed computation, and that's on our roadmap. But today, the engine is bounded by what a single machine can handle. For most knowledge graph workloads, that's millions of facts and derived relationships - but it's a real limit for truly massive datasets.\n\n## Where the choice matters most\n\nThe Differential Dataflow foundation matters most for use cases where data changes frequently and derived conclusions need to stay current. Access control hierarchies where people change roles regularly. Supply chain graphs where supplier status changes daily. Compliance systems where entity relationships and sanctions lists are updated constantly. Agent memory systems where new observations arrive continuously.\n\nFor batch-once-query-many workloads with no updates, a simpler engine would be fine. But the moment your facts change and you need derived conclusions to stay correct, the incremental approach pays for itself immediately.\n\nOur [benchmarks post](/blog/benchmarks-1587x-faster-recursive-queries/) has the specific numbers. And the [quickstart guide](/docs/guides/quickstart/) gets you running in about 5 minutes so you can see it in action."])</script><script>self.__next_f.push([1,"5:[\"$\",\"$Le\",null,{\"post\":{\"slug\":\"why-we-built-on-differential-dataflow\",\"title\":\"Why We Built InputLayer on Differential Dataflow\",\"date\":\"2026-01-30\",\"author\":\"InputLayer Team\",\"category\":\"Engineering\",\"excerpt\":\"The story behind our choice of Timely and Differential Dataflow as the computation engine, and what that means for the kinds of problems InputLayer can solve.\",\"content\":\"$f\",\"toc\":[{\"level\":2,\"text\":\"The problem that started everything\",\"id\":\"the-problem-that-started-everything\"},{\"level\":2,\"text\":\"What we evaluated\",\"id\":\"what-we-evaluated\"},{\"level\":2,\"text\":\"Finding Differential Dataflow\",\"id\":\"finding-differential-dataflow\"},{\"level\":2,\"text\":\"How it handles the hard part: recursive retraction\",\"id\":\"how-it-handles-the-hard-part-recursive-retraction\"},{\"level\":2,\"text\":\"What this gives InputLayer users\",\"id\":\"what-this-gives-inputlayer-users\"},{\"level\":2,\"text\":\"The tradeoffs\",\"id\":\"the-tradeoffs\"},{\"level\":2,\"text\":\"Where the choice matters most\",\"id\":\"where-the-choice-matters-most\"}]},\"slug\":\"why-we-built-on-differential-dataflow\"}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[6869,[],\"IconMark\"]\nc:[[\"$\",\"title\",\"0\",{\"children\":\"InputLayer - A symbolic reasoning engine for AI agents\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Store facts, define rules, and derive everything that logically follows. Vector search, graph traversal, and incremental computation in one system.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/icon.svg\"}],[\"$\",\"$L10\",\"3\",{}]]\n8:null\n"])</script></body></html>